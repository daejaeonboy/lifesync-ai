(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function o_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mf={exports:{}},fa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function vx(){if(vy)return fa;vy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:u,ref:r!==void 0?r:null,props:l}}return fa.Fragment=e,fa.jsx=n,fa.jsxs=n,fa}var _y;function _x(){return _y||(_y=1,mf.exports=vx()),mf.exports}var S=_x(),pf={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function bx(){if(by)return Le;by=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=_&&k[_]||k["@@iterator"],typeof k=="function"?k:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function D(k,G,oe){this.props=k,this.context=G,this.refs=C,this.updater=oe||T}D.prototype.isReactComponent={},D.prototype.setState=function(k,G){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,G,"setState")},D.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function N(){}N.prototype=D.prototype;function I(k,G,oe){this.props=k,this.context=G,this.refs=C,this.updater=oe||T}var U=I.prototype=new N;U.constructor=I,A(U,D.prototype),U.isPureReactComponent=!0;var L=Array.isArray;function B(){}var z={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function W(k,G,oe){var le=oe.ref;return{$$typeof:t,type:k,key:G,ref:le!==void 0?le:null,props:oe}}function ie(k,G){return W(k.type,G,k.props)}function ue(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function fe(k){var G={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return G[oe]})}var _e=/\/+/g;function Ce(k,G){return typeof k=="object"&&k!==null&&k.key!=null?fe(""+k.key):G.toString(36)}function qe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(B,B):(k.status="pending",k.then(function(G){k.status==="pending"&&(k.status="fulfilled",k.value=G)},function(G){k.status==="pending"&&(k.status="rejected",k.reason=G)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function J(k,G,oe,le,K){var Q=typeof k;(Q==="undefined"||Q==="boolean")&&(k=null);var ge=!1;if(k===null)ge=!0;else switch(Q){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(k.$$typeof){case t:case e:ge=!0;break;case y:return ge=k._init,J(ge(k._payload),G,oe,le,K)}}if(ge)return K=K(k),ge=le===""?"."+Ce(k,0):le,L(K)?(oe="",ge!=null&&(oe=ge.replace(_e,"$&/")+"/"),J(K,G,oe,"",function(Ee){return Ee})):K!=null&&(ue(K)&&(K=ie(K,oe+(K.key==null||k&&k.key===K.key?"":(""+K.key).replace(_e,"$&/")+"/")+ge)),G.push(K)),1;ge=0;var Ae=le===""?".":le+":";if(L(k))for(var ye=0;ye<k.length;ye++)le=k[ye],Q=Ae+Ce(le,ye),ge+=J(le,G,oe,Q,K);else if(ye=w(k),typeof ye=="function")for(k=ye.call(k),ye=0;!(le=k.next()).done;)le=le.value,Q=Ae+Ce(le,ye++),ge+=J(le,G,oe,Q,K);else if(Q==="object"){if(typeof k.then=="function")return J(qe(k),G,oe,le,K);throw G=String(k),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ge}function ee(k,G,oe){if(k==null)return k;var le=[],K=0;return J(k,le,"","",function(Q){return G.call(oe,Q,K++)}),le}function ae(k){if(k._status===-1){var G=k._result;G=G(),G.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=G)}if(k._status===1)return k._result.default;throw k._result}var be=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},de={map:ee,forEach:function(k,G,oe){ee(k,function(){G.apply(this,arguments)},oe)},count:function(k){var G=0;return ee(k,function(){G++}),G},toArray:function(k){return ee(k,function(G){return G})||[]},only:function(k){if(!ue(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Le.Activity=b,Le.Children=de,Le.Component=D,Le.Fragment=n,Le.Profiler=r,Le.PureComponent=I,Le.StrictMode=s,Le.Suspense=m,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Le.__COMPILER_RUNTIME={__proto__:null,c:function(k){return z.H.useMemoCache(k)}},Le.cache=function(k){return function(){return k.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(k,G,oe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=A({},k.props),K=k.key;if(G!=null)for(Q in G.key!==void 0&&(K=""+G.key),G)!Z.call(G,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&G.ref===void 0||(le[Q]=G[Q]);var Q=arguments.length-2;if(Q===1)le.children=oe;else if(1<Q){for(var ge=Array(Q),Ae=0;Ae<Q;Ae++)ge[Ae]=arguments[Ae+2];le.children=ge}return W(k.type,K,le)},Le.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Le.createElement=function(k,G,oe){var le,K={},Q=null;if(G!=null)for(le in G.key!==void 0&&(Q=""+G.key),G)Z.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(K[le]=G[le]);var ge=arguments.length-2;if(ge===1)K.children=oe;else if(1<ge){for(var Ae=Array(ge),ye=0;ye<ge;ye++)Ae[ye]=arguments[ye+2];K.children=Ae}if(k&&k.defaultProps)for(le in ge=k.defaultProps,ge)K[le]===void 0&&(K[le]=ge[le]);return W(k,Q,K)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(k){return{$$typeof:d,render:k}},Le.isValidElement=ue,Le.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:ae}},Le.memo=function(k,G){return{$$typeof:h,type:k,compare:G===void 0?null:G}},Le.startTransition=function(k){var G=z.T,oe={};z.T=oe;try{var le=k(),K=z.S;K!==null&&K(oe,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(B,be)}catch(Q){be(Q)}finally{G!==null&&oe.types!==null&&(G.types=oe.types),z.T=G}},Le.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Le.use=function(k){return z.H.use(k)},Le.useActionState=function(k,G,oe){return z.H.useActionState(k,G,oe)},Le.useCallback=function(k,G){return z.H.useCallback(k,G)},Le.useContext=function(k){return z.H.useContext(k)},Le.useDebugValue=function(){},Le.useDeferredValue=function(k,G){return z.H.useDeferredValue(k,G)},Le.useEffect=function(k,G){return z.H.useEffect(k,G)},Le.useEffectEvent=function(k){return z.H.useEffectEvent(k)},Le.useId=function(){return z.H.useId()},Le.useImperativeHandle=function(k,G,oe){return z.H.useImperativeHandle(k,G,oe)},Le.useInsertionEffect=function(k,G){return z.H.useInsertionEffect(k,G)},Le.useLayoutEffect=function(k,G){return z.H.useLayoutEffect(k,G)},Le.useMemo=function(k,G){return z.H.useMemo(k,G)},Le.useOptimistic=function(k,G){return z.H.useOptimistic(k,G)},Le.useReducer=function(k,G,oe){return z.H.useReducer(k,G,oe)},Le.useRef=function(k){return z.H.useRef(k)},Le.useState=function(k){return z.H.useState(k)},Le.useSyncExternalStore=function(k,G,oe){return z.H.useSyncExternalStore(k,G,oe)},Le.useTransition=function(){return z.H.useTransition()},Le.version="19.2.4",Le}var Sy;function dh(){return Sy||(Sy=1,pf.exports=bx()),pf.exports}var M=dh();const _t=o_(M);var gf={exports:{}},ha={},yf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function Sx(){return wy||(wy=1,(function(t){function e(J,ee){var ae=J.length;J.push(ee);e:for(;0<ae;){var be=ae-1>>>1,de=J[be];if(0<r(de,ee))J[be]=ee,J[ae]=de,ae=be;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ee=J[0],ae=J.pop();if(ae!==ee){J[0]=ae;e:for(var be=0,de=J.length,k=de>>>1;be<k;){var G=2*(be+1)-1,oe=J[G],le=G+1,K=J[le];if(0>r(oe,ae))le<de&&0>r(K,oe)?(J[be]=K,J[le]=ae,be=le):(J[be]=oe,J[G]=ae,be=G);else if(le<de&&0>r(K,ae))J[be]=K,J[le]=ae,be=le;else break e}}return ee}function r(J,ee){var ae=J.sortIndex-ee.sortIndex;return ae!==0?ae:J.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var m=[],h=[],y=1,b=null,_=3,w=!1,T=!1,A=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function U(J){for(var ee=n(h);ee!==null;){if(ee.callback===null)s(h);else if(ee.startTime<=J)s(h),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=n(h)}}function L(J){if(A=!1,U(J),!T)if(n(m)!==null)T=!0,B||(B=!0,fe());else{var ee=n(h);ee!==null&&qe(L,ee.startTime-J)}}var B=!1,z=-1,Z=5,W=-1;function ie(){return C?!0:!(t.unstable_now()-W<Z)}function ue(){if(C=!1,B){var J=t.unstable_now();W=J;var ee=!0;try{e:{T=!1,A&&(A=!1,N(z),z=-1),w=!0;var ae=_;try{t:{for(U(J),b=n(m);b!==null&&!(b.expirationTime>J&&ie());){var be=b.callback;if(typeof be=="function"){b.callback=null,_=b.priorityLevel;var de=be(b.expirationTime<=J);if(J=t.unstable_now(),typeof de=="function"){b.callback=de,U(J),ee=!0;break t}b===n(m)&&s(m),U(J)}else s(m);b=n(m)}if(b!==null)ee=!0;else{var k=n(h);k!==null&&qe(L,k.startTime-J),ee=!1}}break e}finally{b=null,_=ae,w=!1}ee=void 0}}finally{ee?fe():B=!1}}}var fe;if(typeof I=="function")fe=function(){I(ue)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ce=_e.port2;_e.port1.onmessage=ue,fe=function(){Ce.postMessage(null)}}else fe=function(){D(ue,0)};function qe(J,ee){z=D(function(){J(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(J){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var ae=_;_=ee;try{return J()}finally{_=ae}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ae=_;_=J;try{return ee()}finally{_=ae}},t.unstable_scheduleCallback=function(J,ee,ae){var be=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?be+ae:be):ae=be,J){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ae+de,J={id:y++,callback:ee,priorityLevel:J,startTime:ae,expirationTime:de,sortIndex:-1},ae>be?(J.sortIndex=ae,e(h,J),n(m)===null&&J===n(h)&&(A?(N(z),z=-1):A=!0,qe(L,ae-be))):(J.sortIndex=de,e(m,J),T||w||(T=!0,B||(B=!0,fe()))),J},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(J){var ee=_;return function(){var ae=_;_=ee;try{return J.apply(this,arguments)}finally{_=ae}}}})(vf)),vf}var xy;function wx(){return xy||(xy=1,yf.exports=Sx()),yf.exports}var _f={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function xx(){if(Ty)return fn;Ty=1;var t=dh();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,h,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:m,containerInfo:h,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fn.createPortal=function(m,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(m,h,null,y)},fn.flushSync=function(m){var h=u.T,y=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=h,s.p=y,s.d.f()}},fn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(m,h))},fn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},fn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var y=h.as,b=d(y,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?s.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:w}):y==="script"&&s.d.X(m,{crossOrigin:b,integrity:_,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},fn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=d(h.as,h.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(m)},fn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,b=d(y,h.crossOrigin);s.d.L(m,y,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},fn.preloadModule=function(m,h){if(typeof m=="string")if(h){var y=d(h.as,h.crossOrigin);s.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(m)},fn.requestFormReset=function(m){s.d.r(m)},fn.unstable_batchedUpdates=function(m,h){return m(h)},fn.useFormState=function(m,h,y){return u.H.useFormState(m,h,y)},fn.useFormStatus=function(){return u.H.useHostTransitionStatus()},fn.version="19.2.4",fn}var Ey;function r_(){if(Ey)return _f.exports;Ey=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_f.exports=xx(),_f.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function Tx(){if(Ay)return ha;Ay=1;var t=wx(),e=dh(),n=r_();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function h(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,c=o;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){a=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return m(g),i;if(v===c)return m(g),o;v=v.sibling}throw Error(s(188))}if(a.return!==c.return)a=g,c=v;else{for(var x=!1,E=g.child;E;){if(E===a){x=!0,a=g,c=v;break}if(E===c){x=!0,c=g,a=v;break}E=E.sibling}if(!x){for(E=v.child;E;){if(E===a){x=!0,a=v,c=g;break}if(E===c){x=!0,c=v,a=g;break}E=E.sibling}if(!x)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function y(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=y(i),o!==null)return o;i=i.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function fe(i){return i===null||typeof i!="object"?null:(i=ue&&i[ue]||i["@@iterator"],typeof i=="function"?i:null)}var _e=Symbol.for("react.client.reference");function Ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===_e?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case D:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case I:return i.displayName||"Context";case N:return(i._context.displayName||"Context")+".Consumer";case U:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return o=i.displayName||null,o!==null?o:Ce(i.type)||"Memo";case Z:o=i._payload,i=i._init;try{return Ce(i(o))}catch{}}return null}var qe=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},be=[],de=-1;function k(i){return{current:i}}function G(i){0>de||(i.current=be[de],be[de]=null,de--)}function oe(i,o){de++,be[de]=i.current,i.current=o}var le=k(null),K=k(null),Q=k(null),ge=k(null);function Ae(i,o){switch(oe(Q,o),oe(K,i),oe(le,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?zg(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=zg(o),i=Bg(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(le),oe(le,i)}function ye(){G(le),G(K),G(Q)}function Ee(i){i.memoizedState!==null&&oe(ge,i);var o=le.current,a=Bg(o,i.type);o!==a&&(oe(K,i),oe(le,a))}function He(i){K.current===i&&(G(le),G(K)),ge.current===i&&(G(ge),la._currentValue=ae)}var Ne,je;function ke(i){if(Ne===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Ne=o&&o[1]||"",je=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+i+je}var pe=!1;function ze(i,o){if(!i||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(X){var Y=X}Reflect.construct(i,[],se)}else{try{se.call()}catch(X){Y=X}i.call(se.prototype)}}else{try{throw Error()}catch(X){Y=X}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),x=v[0],E=v[1];if(x&&E){var O=x.split(`
`),$=E.split(`
`);for(g=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;g<$.length&&!$[g].includes("DetermineComponentFrameRoot");)g++;if(c===O.length||g===$.length)for(c=O.length-1,g=$.length-1;1<=c&&0<=g&&O[c]!==$[g];)g--;for(;1<=c&&0<=g;c--,g--)if(O[c]!==$[g]){if(c!==1||g!==1)do if(c--,g--,0>g||O[c]!==$[g]){var te=`
`+O[c].replace(" at new "," at ");return i.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",i.displayName)),te}while(1<=c&&0<=g);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ke(a):""}function Gt(i,o){switch(i.tag){case 26:case 27:case 5:return ke(i.type);case 16:return ke("Lazy");case 13:return i.child!==o&&o!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return ze(i.type,!1);case 11:return ze(i.type.render,!1);case 1:return ze(i.type,!0);case 31:return ke("Activity");default:return""}}function Zt(i){try{var o="",a=null;do o+=Gt(i,a),a=i,i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var pt=Object.prototype.hasOwnProperty,ht=t.unstable_scheduleCallback,It=t.unstable_cancelCallback,Ht=t.unstable_shouldYield,re=t.unstable_requestPaint,he=t.unstable_now,zt=t.unstable_getCurrentPriorityLevel,Mt=t.unstable_ImmediatePriority,Et=t.unstable_UserBlockingPriority,bt=t.unstable_NormalPriority,mn=t.unstable_LowPriority,Ai=t.unstable_IdlePriority,at=t.log,Mn=t.unstable_setDisableYieldValue,Dn=null,Jt=null;function wn(i){if(typeof at=="function"&&Mn(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Dn,i)}catch{}}var Bt=Math.clz32?Math.clz32:xr,wr=Math.log,fo=Math.LN2;function xr(i){return i>>>=0,i===0?32:31-(wr(i)/fo|0)|0}var ts=256,Ci=262144,St=4194304;function nt(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Dt(i,o,a){var c=i.pendingLanes;if(c===0)return 0;var g=0,v=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var E=c&134217727;return E!==0?(c=E&~v,c!==0?g=nt(c):(x&=E,x!==0?g=nt(x):a||(a=E&~i,a!==0&&(g=nt(a))))):(E=c&~v,E!==0?g=nt(E):x!==0?g=nt(x):a||(a=c&~i,a!==0&&(g=nt(a)))),g===0?0:o!==0&&o!==g&&(o&v)===0&&(v=g&-g,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:g}function en(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function un(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vt(){var i=St;return St<<=1,(St&62914560)===0&&(St=4194304),i}function cn(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function xn(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function At(i,o,a,c,g,v){var x=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var E=i.entanglements,O=i.expirationTimes,$=i.hiddenUpdates;for(a=x&~a;0<a;){var te=31-Bt(a),se=1<<te;E[te]=0,O[te]=-1;var Y=$[te];if(Y!==null)for($[te]=null,te=0;te<Y.length;te++){var X=Y[te];X!==null&&(X.lane&=-536870913)}a&=~se}c!==0&&kn(i,c,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(x&~o))}function kn(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var c=31-Bt(o);i.entangledLanes|=o,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function pn(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var c=31-Bt(a),g=1<<c;g&o|i[c]&o&&(i[c]|=o),a&=~g}}function it(i,o){var a=o&-o;return a=(a&42)!==0?1:Yt(a),(a&(i.suspendedLanes|o))!==0?0:a}function Yt(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function oi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Un(){var i=ee.p;return i!==0?i:(i=window.event,i===void 0?32:dy(i.type))}function yi(i,o){var a=ee.p;try{return ee.p=i,o()}finally{ee.p=a}}var Tn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Tn,dn="__reactProps$"+Tn,ns="__reactContainer$"+Tn,Os="__reactEvents$"+Tn,oc="__reactListeners$"+Tn,rc="__reactHandles$"+Tn,ja="__reactResources$"+Tn,is="__reactMarker$"+Tn;function Ps(i){delete i[Ct],delete i[dn],delete i[Os],delete i[oc],delete i[rc]}function ss(i){var o=i[Ct];if(o)return o;for(var a=i.parentNode;a;){if(o=a[ns]||a[Ct]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Kg(i);i!==null;){if(a=i[Ct])return a;i=Kg(i)}return o}i=a,a=i.parentNode}return null}function os(i){if(i=i[Ct]||i[ns]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Ls(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ni(i){var o=i[ja];return o||(o=i[ja]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kt(i){i[is]=!0}var Tr=new Set,Fa={};function vi(i,o){Ri(i,o),Ri(i+"Capture",o)}function Ri(i,o){for(Fa[i]=o,i=0;i<o.length;i++)Tr.add(o[i])}var Ja=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),R={},P={};function j(i){return pt.call(P,i)?!0:pt.call(R,i)?!1:Ja.test(i)?P[i]=!0:(R[i]=!0,!1)}function F(i,o,a){if(j(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function ce(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function Se(i,o,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+c)}}function we(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function lt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ie(i,o,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){a=""+x,v.call(this,x)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function We(i){if(!i._valueTracker){var o=lt(i)?"checked":"value";i._valueTracker=Ie(i,o,""+i[o])}}function rs(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return i&&(c=lt(i)?i.checked?"true":"false":i.value),i=c,i!==a?(o.setValue(i),!0):!1}function ho(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var fS=/[\n"\\]/g;function Fn(i){return i.replace(fS,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ac(i,o,a,c,g,v,x,E){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),o!=null?x==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+we(o)):i.value!==""+we(o)&&(i.value=""+we(o)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),o!=null?lc(i,x,we(o)):a!=null?lc(i,x,we(a)):c!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.name=""+we(E):i.removeAttribute("name")}function Oh(i,o,a,c,g,v,x,E){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){We(i);return}a=a!=null?""+we(a):"",o=o!=null?""+we(o):a,E||o===i.value||(i.value=o),i.defaultValue=o}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=E?i.checked:!!c,i.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x),We(i)}function lc(i,o,a){o==="number"&&ho(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function mo(i,o,a,c){if(i=i.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=o.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&c&&(i[a].defaultSelected=!0)}else{for(a=""+we(a),o=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,c&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Ph(i,o,a){if(o!=null&&(o=""+we(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+we(a):""}function Lh(i,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(s(92));if(qe(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=we(o),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),We(i)}function po(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var hS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qh(i,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":c?i.setProperty(o,a):typeof a!="number"||a===0||hS.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Gh(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var g in o)c=o[g],o.hasOwnProperty(g)&&a[g]!==c&&qh(i,g,c)}else for(var v in o)o.hasOwnProperty(v)&&qh(i,v,o[v])}function uc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(i){return pS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ii(){}var cc=null;function dc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var go=null,yo=null;function Hh(i){var o=os(i);if(o&&(i=o.stateNode)){var a=i[dn]||null;e:switch(i=o.stateNode,o.type){case"input":if(ac(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Fn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==i&&c.form===i.form){var g=c[dn]||null;if(!g)throw Error(s(90));ac(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===i.form&&rs(c)}break e;case"textarea":Ph(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&mo(i,!!a.multiple,o,!1)}}}var fc=!1;function zh(i,o,a){if(fc)return i(o,a);fc=!0;try{var c=i(o);return c}finally{if(fc=!1,(go!==null||yo!==null)&&(Ol(),go&&(o=go,i=yo,yo=go=null,Hh(o),i)))for(o=0;o<i.length;o++)Hh(i[o])}}function Er(i,o){var a=i.stateNode;if(a===null)return null;var c=a[dn]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=!1;if(Mi)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){hc=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{hc=!1}var as=null,mc=null,Ka=null;function Bh(){if(Ka)return Ka;var i,o=mc,a=o.length,c,g="value"in as?as.value:as.textContent,v=g.length;for(i=0;i<a&&o[i]===g[i];i++);var x=a-i;for(c=1;c<=x&&o[a-c]===g[v-c];c++);return Ka=g.slice(i,1<c?1-c:void 0)}function Wa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Xa(){return!0}function Vh(){return!1}function En(i){function o(a,c,g,v,x){this._reactName=a,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(a=i[E],this[E]=a?a(v):v[E]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Xa:Vh,this.isPropagationStopped=Vh,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),o}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=En(qs),Cr=b({},qs,{view:0,detail:0}),gS=En(Cr),pc,gc,Nr,Za=b({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Nr&&(Nr&&i.type==="mousemove"?(pc=i.screenX-Nr.screenX,gc=i.screenY-Nr.screenY):gc=pc=0,Nr=i),pc)},movementY:function(i){return"movementY"in i?i.movementY:gc}}),$h=En(Za),yS=b({},Za,{dataTransfer:0}),vS=En(yS),_S=b({},Cr,{relatedTarget:0}),yc=En(_S),bS=b({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),SS=En(bS),wS=b({},qs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),xS=En(wS),TS=b({},qs,{data:0}),jh=En(TS),ES={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=CS[i])?!!o[i]:!1}function vc(){return NS}var RS=b({},Cr,{key:function(i){if(i.key){var o=ES[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Wa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?AS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(i){return i.type==="keypress"?Wa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Wa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),IS=En(RS),MS=b({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=En(MS),DS=b({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),kS=En(DS),US=b({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),OS=En(US),PS=b({},Za,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),LS=En(PS),qS=b({},qs,{newState:0,oldState:0}),GS=En(qS),HS=[9,13,27,32],_c=Mi&&"CompositionEvent"in window,Rr=null;Mi&&"documentMode"in document&&(Rr=document.documentMode);var zS=Mi&&"TextEvent"in window&&!Rr,Jh=Mi&&(!_c||Rr&&8<Rr&&11>=Rr),Yh=" ",Kh=!1;function Wh(i,o){switch(i){case"keyup":return HS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xh(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var vo=!1;function BS(i,o){switch(i){case"compositionend":return Xh(o);case"keypress":return o.which!==32?null:(Kh=!0,Yh);case"textInput":return i=o.data,i===Yh&&Kh?null:i;default:return null}}function VS(i,o){if(vo)return i==="compositionend"||!_c&&Wh(i,o)?(i=Bh(),Ka=mc=as=null,vo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Jh&&o.locale!=="ko"?null:o.data;default:return null}}var $S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!$S[i.type]:o==="textarea"}function Zh(i,o,a,c){go?yo?yo.push(c):yo=[c]:go=c,o=Bl(o,"onChange"),0<o.length&&(a=new Qa("onChange","change",null,a,c),i.push({event:a,listeners:o}))}var Ir=null,Mr=null;function jS(i){Og(i,0)}function el(i){var o=Ls(i);if(rs(o))return i}function em(i,o){if(i==="change")return o}var tm=!1;if(Mi){var bc;if(Mi){var Sc="oninput"in document;if(!Sc){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),Sc=typeof nm.oninput=="function"}bc=Sc}else bc=!1;tm=bc&&(!document.documentMode||9<document.documentMode)}function im(){Ir&&(Ir.detachEvent("onpropertychange",sm),Mr=Ir=null)}function sm(i){if(i.propertyName==="value"&&el(Mr)){var o=[];Zh(o,Mr,i,dc(i)),zh(jS,o)}}function FS(i,o,a){i==="focusin"?(im(),Ir=o,Mr=a,Ir.attachEvent("onpropertychange",sm)):i==="focusout"&&im()}function JS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return el(Mr)}function YS(i,o){if(i==="click")return el(o)}function KS(i,o){if(i==="input"||i==="change")return el(o)}function WS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var On=typeof Object.is=="function"?Object.is:WS;function Dr(i,o){if(On(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var g=a[c];if(!pt.call(o,g)||!On(i[g],o[g]))return!1}return!0}function om(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function rm(i,o){var a=om(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=o&&c>=o)return{node:a,offset:o-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=om(a)}}function am(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?am(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function lm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=ho(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=ho(i.document)}return o}function wc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var XS=Mi&&"documentMode"in document&&11>=document.documentMode,_o=null,xc=null,kr=null,Tc=!1;function um(i,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tc||_o==null||_o!==ho(c)||(c=_o,"selectionStart"in c&&wc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),kr&&Dr(kr,c)||(kr=c,c=Bl(xc,"onSelect"),0<c.length&&(o=new Qa("onSelect","select",null,o,a),i.push({event:o,listeners:c}),o.target=_o)))}function Gs(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var bo={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},Ec={},cm={};Mi&&(cm=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Hs(i){if(Ec[i])return Ec[i];if(!bo[i])return i;var o=bo[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in cm)return Ec[i]=o[a];return i}var dm=Hs("animationend"),fm=Hs("animationiteration"),hm=Hs("animationstart"),QS=Hs("transitionrun"),ZS=Hs("transitionstart"),ew=Hs("transitioncancel"),mm=Hs("transitionend"),pm=new Map,Ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ac.push("scrollEnd");function ri(i,o){pm.set(i,o),vi(o,[i])}var tl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Jn=[],So=0,Cc=0;function nl(){for(var i=So,o=Cc=So=0;o<i;){var a=Jn[o];Jn[o++]=null;var c=Jn[o];Jn[o++]=null;var g=Jn[o];Jn[o++]=null;var v=Jn[o];if(Jn[o++]=null,c!==null&&g!==null){var x=c.pending;x===null?g.next=g:(g.next=x.next,x.next=g),c.pending=g}v!==0&&gm(a,g,v)}}function il(i,o,a,c){Jn[So++]=i,Jn[So++]=o,Jn[So++]=a,Jn[So++]=c,Cc|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Nc(i,o,a,c){return il(i,o,a,c),sl(i)}function zs(i,o){return il(i,null,null,o),sl(i)}function gm(i,o,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var g=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&o!==null&&(g=31-Bt(a),i=v.hiddenUpdates,c=i[g],c===null?i[g]=[o]:c.push(o),o.lane=a|536870912),v):null}function sl(i){if(50<ta)throw ta=0,Ld=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var wo={};function tw(i,o,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(i,o,a,c){return new tw(i,o,a,c)}function Rc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Di(i,o){var a=i.alternate;return a===null?(a=Pn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function ym(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function ol(i,o,a,c,g,v){var x=0;if(c=i,typeof i=="function")Rc(i)&&(x=1);else if(typeof i=="string")x=rx(i,a,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case W:return i=Pn(31,a,o,g),i.elementType=W,i.lanes=v,i;case A:return Bs(a.children,g,v,o);case C:x=8,g|=24;break;case D:return i=Pn(12,a,o,g|2),i.elementType=D,i.lanes=v,i;case L:return i=Pn(13,a,o,g),i.elementType=L,i.lanes=v,i;case B:return i=Pn(19,a,o,g),i.elementType=B,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:x=10;break e;case N:x=9;break e;case U:x=11;break e;case z:x=14;break e;case Z:x=16,c=null;break e}x=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return o=Pn(x,a,o,g),o.elementType=i,o.type=c,o.lanes=v,o}function Bs(i,o,a,c){return i=Pn(7,i,c,o),i.lanes=a,i}function Ic(i,o,a){return i=Pn(6,i,null,o),i.lanes=a,i}function vm(i){var o=Pn(18,null,null,0);return o.stateNode=i,o}function Mc(i,o,a){return o=Pn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var _m=new WeakMap;function Yn(i,o){if(typeof i=="object"&&i!==null){var a=_m.get(i);return a!==void 0?a:(o={value:i,source:o,stack:Zt(o)},_m.set(i,o),o)}return{value:i,source:o,stack:Zt(o)}}var xo=[],To=0,rl=null,Ur=0,Kn=[],Wn=0,ls=null,_i=1,bi="";function ki(i,o){xo[To++]=Ur,xo[To++]=rl,rl=i,Ur=o}function bm(i,o,a){Kn[Wn++]=_i,Kn[Wn++]=bi,Kn[Wn++]=ls,ls=i;var c=_i;i=bi;var g=32-Bt(c)-1;c&=~(1<<g),a+=1;var v=32-Bt(o)+g;if(30<v){var x=g-g%5;v=(c&(1<<x)-1).toString(32),c>>=x,g-=x,_i=1<<32-Bt(o)+g|a<<g|c,bi=v+i}else _i=1<<v|a<<g|c,bi=i}function Dc(i){i.return!==null&&(ki(i,1),bm(i,1,0))}function kc(i){for(;i===rl;)rl=xo[--To],xo[To]=null,Ur=xo[--To],xo[To]=null;for(;i===ls;)ls=Kn[--Wn],Kn[Wn]=null,bi=Kn[--Wn],Kn[Wn]=null,_i=Kn[--Wn],Kn[Wn]=null}function Sm(i,o){Kn[Wn++]=_i,Kn[Wn++]=bi,Kn[Wn++]=ls,_i=o.id,bi=o.overflow,ls=i}var tn=null,gt=null,Ye=!1,us=null,Xn=!1,Uc=Error(s(519));function cs(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(Yn(o,i)),Uc}function wm(i){var o=i.stateNode,a=i.type,c=i.memoizedProps;switch(o[Ct]=i,o[dn]=c,a){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(a=0;a<ia.length;a++)$e(ia[a],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":$e("invalid",o),Oh(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":$e("invalid",o);break;case"textarea":$e("invalid",o),Lh(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||Gg(o.textContent,a)?(c.popover!=null&&($e("beforetoggle",o),$e("toggle",o)),c.onScroll!=null&&$e("scroll",o),c.onScrollEnd!=null&&$e("scrollend",o),c.onClick!=null&&(o.onclick=Ii),o=!0):o=!1,o||cs(i,!0)}function xm(i){for(tn=i.return;tn;)switch(tn.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:tn=tn.return}}function Eo(i){if(i!==tn)return!1;if(!Ye)return xm(i),Ye=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Qd(i.type,i.memoizedProps)),a=!a),a&&gt&&cs(i),xm(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));gt=Yg(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));gt=Yg(i)}else o===27?(o=gt,Ts(i.type)?(i=sf,sf=null,gt=i):gt=o):gt=tn?Zn(i.stateNode.nextSibling):null;return!0}function Vs(){gt=tn=null,Ye=!1}function Oc(){var i=us;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),us=null),i}function Or(i){us===null?us=[i]:us.push(i)}var Pc=k(null),$s=null,Ui=null;function ds(i,o,a){oe(Pc,o._currentValue),o._currentValue=a}function Oi(i){i._currentValue=Pc.current,G(Pc)}function Lc(i,o,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),i===a)break;i=i.return}}function qc(i,o,a,c){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var x=g.child;v=v.firstContext;e:for(;v!==null;){var E=v;v=g;for(var O=0;O<o.length;O++)if(E.context===o[O]){v.lanes|=a,E=v.alternate,E!==null&&(E.lanes|=a),Lc(v.return,a,i),c||(x=null);break e}v=E.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(s(341));x.lanes|=a,v=x.alternate,v!==null&&(v.lanes|=a),Lc(x,a,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Ao(i,o,a,c){i=null;for(var g=o,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var E=g.type;On(g.pendingProps.value,x.value)||(i!==null?i.push(E):i=[E])}}else if(g===ge.current){if(x=g.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(la):i=[la])}g=g.return}i!==null&&qc(o,i,a,c),o.flags|=262144}function al(i){for(i=i.firstContext;i!==null;){if(!On(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function js(i){$s=i,Ui=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function nn(i){return Tm($s,i)}function ll(i,o){return $s===null&&js(i),Tm(i,o)}function Tm(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Ui===null){if(i===null)throw Error(s(308));Ui=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Ui=Ui.next=o;return a}var nw=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},iw=t.unstable_scheduleCallback,sw=t.unstable_NormalPriority,Ut={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gc(){return{controller:new nw,data:new Map,refCount:0}}function Pr(i){i.refCount--,i.refCount===0&&iw(sw,function(){i.controller.abort()})}var Lr=null,Hc=0,Co=0,No=null;function ow(i,o){if(Lr===null){var a=Lr=[];Hc=0,Co=Vd(),No={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Hc++,o.then(Em,Em),o}function Em(){if(--Hc===0&&Lr!==null){No!==null&&(No.status="fulfilled");var i=Lr;Lr=null,Co=0,No=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function rw(i,o){var a=[],c={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){c.status="fulfilled",c.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(c.status="rejected",c.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),c}var Am=J.S;J.S=function(i,o){ug=he(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&ow(i,o),Am!==null&&Am(i,o)};var Fs=k(null);function zc(){var i=Fs.current;return i!==null?i:ft.pooledCache}function ul(i,o){o===null?oe(Fs,Fs.current):oe(Fs,o.pool)}function Cm(){var i=zc();return i===null?null:{parent:Ut._currentValue,pool:i}}var Ro=Error(s(460)),Bc=Error(s(474)),cl=Error(s(542)),dl={then:function(){}};function Nm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rm(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Ii,Ii),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Mm(i),i;default:if(typeof o.status=="string")o.then(Ii,Ii);else{if(i=ft,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(c){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=c}},function(c){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Mm(i),i}throw Ys=o,Ro}}function Js(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ys=a,Ro):a}}var Ys=null;function Im(){if(Ys===null)throw Error(s(459));var i=Ys;return Ys=null,i}function Mm(i){if(i===Ro||i===cl)throw Error(s(483))}var Io=null,qr=0;function fl(i){var o=qr;return qr+=1,Io===null&&(Io=[]),Rm(Io,i,o)}function Gr(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function hl(i,o){throw o.$$typeof===_?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Dm(i){function o(H,q){if(i){var V=H.deletions;V===null?(H.deletions=[q],H.flags|=16):V.push(q)}}function a(H,q){if(!i)return null;for(;q!==null;)o(H,q),q=q.sibling;return null}function c(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function g(H,q){return H=Di(H,q),H.index=0,H.sibling=null,H}function v(H,q,V){return H.index=V,i?(V=H.alternate,V!==null?(V=V.index,V<q?(H.flags|=67108866,q):V):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function x(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function E(H,q,V,ne){return q===null||q.tag!==6?(q=Ic(V,H.mode,ne),q.return=H,q):(q=g(q,V),q.return=H,q)}function O(H,q,V,ne){var Re=V.type;return Re===A?te(H,q,V.props.children,ne,V.key):q!==null&&(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&Js(Re)===q.type)?(q=g(q,V.props),Gr(q,V),q.return=H,q):(q=ol(V.type,V.key,V.props,null,H.mode,ne),Gr(q,V),q.return=H,q)}function $(H,q,V,ne){return q===null||q.tag!==4||q.stateNode.containerInfo!==V.containerInfo||q.stateNode.implementation!==V.implementation?(q=Mc(V,H.mode,ne),q.return=H,q):(q=g(q,V.children||[]),q.return=H,q)}function te(H,q,V,ne,Re){return q===null||q.tag!==7?(q=Bs(V,H.mode,ne,Re),q.return=H,q):(q=g(q,V),q.return=H,q)}function se(H,q,V){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ic(""+q,H.mode,V),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return V=ol(q.type,q.key,q.props,null,H.mode,V),Gr(V,q),V.return=H,V;case T:return q=Mc(q,H.mode,V),q.return=H,q;case Z:return q=Js(q),se(H,q,V)}if(qe(q)||fe(q))return q=Bs(q,H.mode,V,null),q.return=H,q;if(typeof q.then=="function")return se(H,fl(q),V);if(q.$$typeof===I)return se(H,ll(H,q),V);hl(H,q)}return null}function Y(H,q,V,ne){var Re=q!==null?q.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Re!==null?null:E(H,q,""+V,ne);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return V.key===Re?O(H,q,V,ne):null;case T:return V.key===Re?$(H,q,V,ne):null;case Z:return V=Js(V),Y(H,q,V,ne)}if(qe(V)||fe(V))return Re!==null?null:te(H,q,V,ne,null);if(typeof V.then=="function")return Y(H,q,fl(V),ne);if(V.$$typeof===I)return Y(H,q,ll(H,V),ne);hl(H,V)}return null}function X(H,q,V,ne,Re){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return H=H.get(V)||null,E(q,H,""+ne,Re);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return H=H.get(ne.key===null?V:ne.key)||null,O(q,H,ne,Re);case T:return H=H.get(ne.key===null?V:ne.key)||null,$(q,H,ne,Re);case Z:return ne=Js(ne),X(H,q,V,ne,Re)}if(qe(ne)||fe(ne))return H=H.get(V)||null,te(q,H,ne,Re,null);if(typeof ne.then=="function")return X(H,q,V,fl(ne),Re);if(ne.$$typeof===I)return X(H,q,V,ll(q,ne),Re);hl(q,ne)}return null}function ve(H,q,V,ne){for(var Re=null,Xe=null,xe=q,Be=q=0,Je=null;xe!==null&&Be<V.length;Be++){xe.index>Be?(Je=xe,xe=null):Je=xe.sibling;var Qe=Y(H,xe,V[Be],ne);if(Qe===null){xe===null&&(xe=Je);break}i&&xe&&Qe.alternate===null&&o(H,xe),q=v(Qe,q,Be),Xe===null?Re=Qe:Xe.sibling=Qe,Xe=Qe,xe=Je}if(Be===V.length)return a(H,xe),Ye&&ki(H,Be),Re;if(xe===null){for(;Be<V.length;Be++)xe=se(H,V[Be],ne),xe!==null&&(q=v(xe,q,Be),Xe===null?Re=xe:Xe.sibling=xe,Xe=xe);return Ye&&ki(H,Be),Re}for(xe=c(xe);Be<V.length;Be++)Je=X(xe,H,Be,V[Be],ne),Je!==null&&(i&&Je.alternate!==null&&xe.delete(Je.key===null?Be:Je.key),q=v(Je,q,Be),Xe===null?Re=Je:Xe.sibling=Je,Xe=Je);return i&&xe.forEach(function(Rs){return o(H,Rs)}),Ye&&ki(H,Be),Re}function De(H,q,V,ne){if(V==null)throw Error(s(151));for(var Re=null,Xe=null,xe=q,Be=q=0,Je=null,Qe=V.next();xe!==null&&!Qe.done;Be++,Qe=V.next()){xe.index>Be?(Je=xe,xe=null):Je=xe.sibling;var Rs=Y(H,xe,Qe.value,ne);if(Rs===null){xe===null&&(xe=Je);break}i&&xe&&Rs.alternate===null&&o(H,xe),q=v(Rs,q,Be),Xe===null?Re=Rs:Xe.sibling=Rs,Xe=Rs,xe=Je}if(Qe.done)return a(H,xe),Ye&&ki(H,Be),Re;if(xe===null){for(;!Qe.done;Be++,Qe=V.next())Qe=se(H,Qe.value,ne),Qe!==null&&(q=v(Qe,q,Be),Xe===null?Re=Qe:Xe.sibling=Qe,Xe=Qe);return Ye&&ki(H,Be),Re}for(xe=c(xe);!Qe.done;Be++,Qe=V.next())Qe=X(xe,H,Be,Qe.value,ne),Qe!==null&&(i&&Qe.alternate!==null&&xe.delete(Qe.key===null?Be:Qe.key),q=v(Qe,q,Be),Xe===null?Re=Qe:Xe.sibling=Qe,Xe=Qe);return i&&xe.forEach(function(yx){return o(H,yx)}),Ye&&ki(H,Be),Re}function dt(H,q,V,ne){if(typeof V=="object"&&V!==null&&V.type===A&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case w:e:{for(var Re=V.key;q!==null;){if(q.key===Re){if(Re=V.type,Re===A){if(q.tag===7){a(H,q.sibling),ne=g(q,V.props.children),ne.return=H,H=ne;break e}}else if(q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&Js(Re)===q.type){a(H,q.sibling),ne=g(q,V.props),Gr(ne,V),ne.return=H,H=ne;break e}a(H,q);break}else o(H,q);q=q.sibling}V.type===A?(ne=Bs(V.props.children,H.mode,ne,V.key),ne.return=H,H=ne):(ne=ol(V.type,V.key,V.props,null,H.mode,ne),Gr(ne,V),ne.return=H,H=ne)}return x(H);case T:e:{for(Re=V.key;q!==null;){if(q.key===Re)if(q.tag===4&&q.stateNode.containerInfo===V.containerInfo&&q.stateNode.implementation===V.implementation){a(H,q.sibling),ne=g(q,V.children||[]),ne.return=H,H=ne;break e}else{a(H,q);break}else o(H,q);q=q.sibling}ne=Mc(V,H.mode,ne),ne.return=H,H=ne}return x(H);case Z:return V=Js(V),dt(H,q,V,ne)}if(qe(V))return ve(H,q,V,ne);if(fe(V)){if(Re=fe(V),typeof Re!="function")throw Error(s(150));return V=Re.call(V),De(H,q,V,ne)}if(typeof V.then=="function")return dt(H,q,fl(V),ne);if(V.$$typeof===I)return dt(H,q,ll(H,V),ne);hl(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,q!==null&&q.tag===6?(a(H,q.sibling),ne=g(q,V),ne.return=H,H=ne):(a(H,q),ne=Ic(V,H.mode,ne),ne.return=H,H=ne),x(H)):a(H,q)}return function(H,q,V,ne){try{qr=0;var Re=dt(H,q,V,ne);return Io=null,Re}catch(xe){if(xe===Ro||xe===cl)throw xe;var Xe=Pn(29,xe,null,H.mode);return Xe.lanes=ne,Xe.return=H,Xe}finally{}}}var Ks=Dm(!0),km=Dm(!1),fs=!1;function Vc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function hs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ms(i,o,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(et&2)!==0){var g=c.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),c.pending=o,o=sl(i),gm(i,null,a),o}return il(i,c,o,a),sl(i)}function Hr(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,pn(i,a)}}function jc(i,o){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=x:v=v.next=x,a=a.next}while(a!==null);v===null?g=v=o:v=v.next=o}else g=v=o;a={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var Fc=!1;function zr(){if(Fc){var i=No;if(i!==null)throw i}}function Br(i,o,a,c){Fc=!1;var g=i.updateQueue;fs=!1;var v=g.firstBaseUpdate,x=g.lastBaseUpdate,E=g.shared.pending;if(E!==null){g.shared.pending=null;var O=E,$=O.next;O.next=null,x===null?v=$:x.next=$,x=O;var te=i.alternate;te!==null&&(te=te.updateQueue,E=te.lastBaseUpdate,E!==x&&(E===null?te.firstBaseUpdate=$:E.next=$,te.lastBaseUpdate=O))}if(v!==null){var se=g.baseState;x=0,te=$=O=null,E=v;do{var Y=E.lane&-536870913,X=Y!==E.lane;if(X?(Fe&Y)===Y:(c&Y)===Y){Y!==0&&Y===Co&&(Fc=!0),te!==null&&(te=te.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ve=i,De=E;Y=o;var dt=a;switch(De.tag){case 1:if(ve=De.payload,typeof ve=="function"){se=ve.call(dt,se,Y);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=De.payload,Y=typeof ve=="function"?ve.call(dt,se,Y):ve,Y==null)break e;se=b({},se,Y);break e;case 2:fs=!0}}Y=E.callback,Y!==null&&(i.flags|=64,X&&(i.flags|=8192),X=g.callbacks,X===null?g.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:E.tag,payload:E.payload,callback:E.callback,next:null},te===null?($=te=X,O=se):te=te.next=X,x|=Y;if(E=E.next,E===null){if(E=g.shared.pending,E===null)break;X=E,E=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);te===null&&(O=se),g.baseState=O,g.firstBaseUpdate=$,g.lastBaseUpdate=te,v===null&&(g.shared.lanes=0),_s|=x,i.lanes=x,i.memoizedState=se}}function Um(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Om(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Um(a[i],o)}var Mo=k(null),ml=k(0);function Pm(i,o){i=$i,oe(ml,i),oe(Mo,o),$i=i|o.baseLanes}function Jc(){oe(ml,$i),oe(Mo,Mo.current)}function Yc(){$i=ml.current,G(Mo),G(ml)}var Ln=k(null),Qn=null;function ps(i){var o=i.alternate;oe(Nt,Nt.current&1),oe(Ln,i),Qn===null&&(o===null||Mo.current!==null||o.memoizedState!==null)&&(Qn=i)}function Kc(i){oe(Nt,Nt.current),oe(Ln,i),Qn===null&&(Qn=i)}function Lm(i){i.tag===22?(oe(Nt,Nt.current),oe(Ln,i),Qn===null&&(Qn=i)):gs()}function gs(){oe(Nt,Nt.current),oe(Ln,Ln.current)}function qn(i){G(Ln),Qn===i&&(Qn=null),G(Nt)}var Nt=k(0);function pl(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tf(a)||nf(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Pi=0,Ge=null,ut=null,Ot=null,gl=!1,Do=!1,Ws=!1,yl=0,Vr=0,ko=null,aw=0;function wt(){throw Error(s(321))}function Wc(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!On(i[a],o[a]))return!1;return!0}function Xc(i,o,a,c,g,v){return Pi=v,Ge=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,J.H=i===null||i.memoizedState===null?bp:fd,Ws=!1,v=a(c,g),Ws=!1,Do&&(v=Gm(o,a,c,g)),qm(i),v}function qm(i){J.H=Fr;var o=ut!==null&&ut.next!==null;if(Pi=0,Ot=ut=Ge=null,gl=!1,Vr=0,ko=null,o)throw Error(s(300));i===null||Pt||(i=i.dependencies,i!==null&&al(i)&&(Pt=!0))}function Gm(i,o,a,c){Ge=i;var g=0;do{if(Do&&(ko=null),Vr=0,Do=!1,25<=g)throw Error(s(301));if(g+=1,Ot=ut=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=Sp,v=o(a,c)}while(Do);return v}function lw(){var i=J.H,o=i.useState()[0];return o=typeof o.then=="function"?$r(o):o,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(Ge.flags|=1024),o}function Qc(){var i=yl!==0;return yl=0,i}function Zc(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function ed(i){if(gl){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}gl=!1}Pi=0,Ot=ut=Ge=null,Do=!1,Vr=yl=0,ko=null}function gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ge.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function Rt(){if(ut===null){var i=Ge.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var o=Ot===null?Ge.memoizedState:Ot.next;if(o!==null)Ot=o,ut=i;else{if(i===null)throw Ge.alternate===null?Error(s(467)):Error(s(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Ot===null?Ge.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $r(i){var o=Vr;return Vr+=1,ko===null&&(ko=[]),i=Rm(ko,i,o),o=Ge,(Ot===null?o.memoizedState:Ot.next)===null&&(o=o.alternate,J.H=o===null||o.memoizedState===null?bp:fd),i}function _l(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $r(i);if(i.$$typeof===I)return nn(i)}throw Error(s(438,String(i)))}function td(i){var o=null,a=Ge.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=Ge.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=vl(),Ge.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),c=0;c<i;c++)a[c]=ie;return o.index++,a}function Li(i,o){return typeof o=="function"?o(i):o}function bl(i){var o=Rt();return nd(o,ut,i)}function nd(i,o,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var g=i.baseQueue,v=c.pending;if(v!==null){if(g!==null){var x=g.next;g.next=v.next,v.next=x}o.baseQueue=g=v,c.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{o=g.next;var E=x=null,O=null,$=o,te=!1;do{var se=$.lane&-536870913;if(se!==$.lane?(Fe&se)===se:(Pi&se)===se){var Y=$.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),se===Co&&(te=!0);else if((Pi&Y)===Y){$=$.next,Y===Co&&(te=!0);continue}else se={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(E=O=se,x=v):O=O.next=se,Ge.lanes|=Y,_s|=Y;se=$.action,Ws&&a(v,se),v=$.hasEagerState?$.eagerState:a(v,se)}else Y={lane:se,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(E=O=Y,x=v):O=O.next=Y,Ge.lanes|=se,_s|=se;$=$.next}while($!==null&&$!==o);if(O===null?x=v:O.next=E,!On(v,i.memoizedState)&&(Pt=!0,te&&(a=No,a!==null)))throw a;i.memoizedState=v,i.baseState=x,i.baseQueue=O,c.lastRenderedState=v}return g===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function id(i){var o=Rt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,g=a.pending,v=o.memoizedState;if(g!==null){a.pending=null;var x=g=g.next;do v=i(v,x.action),x=x.next;while(x!==g);On(v,o.memoizedState)||(Pt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function Hm(i,o,a){var c=Ge,g=Rt(),v=Ye;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var x=!On((ut||g).memoizedState,a);if(x&&(g.memoizedState=a,Pt=!0),g=g.queue,rd(Vm.bind(null,c,g,i),[i]),g.getSnapshot!==o||x||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,Uo(9,{destroy:void 0},Bm.bind(null,c,g,a,o),null),ft===null)throw Error(s(349));v||(Pi&127)!==0||zm(c,o,a)}return a}function zm(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Ge.updateQueue,o===null?(o=vl(),Ge.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Bm(i,o,a,c){o.value=a,o.getSnapshot=c,$m(o)&&jm(i)}function Vm(i,o,a){return a(function(){$m(o)&&jm(i)})}function $m(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!On(i,a)}catch{return!0}}function jm(i){var o=zs(i,2);o!==null&&In(o,i,2)}function sd(i){var o=gn();if(typeof i=="function"){var a=i;if(i=a(),Ws){wn(!0);try{a()}finally{wn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:i},o}function Fm(i,o,a,c){return i.baseState=a,nd(i,ut,typeof c=="function"?c:Li)}function uw(i,o,a,c,g){if(xl(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){v.listeners.push(x)}};J.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,Jm(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Jm(i,o){var a=o.action,c=o.payload,g=i.state;if(o.isTransition){var v=J.T,x={};J.T=x;try{var E=a(g,c),O=J.S;O!==null&&O(x,E),Ym(i,o,E)}catch($){od(i,o,$)}finally{v!==null&&x.types!==null&&(v.types=x.types),J.T=v}}else try{v=a(g,c),Ym(i,o,v)}catch($){od(i,o,$)}}function Ym(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Km(i,o,c)},function(c){return od(i,o,c)}):Km(i,o,a)}function Km(i,o,a){o.status="fulfilled",o.value=a,Wm(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Jm(i,a)))}function od(i,o,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,Wm(o),o=o.next;while(o!==c)}i.action=null}function Wm(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Xm(i,o){return o}function Qm(i,o){if(Ye){var a=ft.formState;if(a!==null){e:{var c=Ge;if(Ye){if(gt){t:{for(var g=gt,v=Xn;g.nodeType!==8;){if(!v){g=null;break t}if(g=Zn(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){gt=Zn(g.nextSibling),c=g.data==="F!";break e}}cs(c)}c=!1}c&&(o=a[0])}}return a=gn(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:o},a.queue=c,a=yp.bind(null,Ge,c),c.dispatch=a,c=sd(!1),v=dd.bind(null,Ge,!1,c.queue),c=gn(),g={state:o,dispatch:null,action:i,pending:null},c.queue=g,a=uw.bind(null,Ge,g,v,a),g.dispatch=a,c.memoizedState=i,[o,a,!1]}function Zm(i){var o=Rt();return ep(o,ut,i)}function ep(i,o,a){if(o=nd(i,o,Xm)[0],i=bl(Li)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=$r(o)}catch(x){throw x===Ro?cl:x}else c=o;o=Rt();var g=o.queue,v=g.dispatch;return a!==o.memoizedState&&(Ge.flags|=2048,Uo(9,{destroy:void 0},cw.bind(null,g,a),null)),[c,v,i]}function cw(i,o){i.action=o}function tp(i){var o=Rt(),a=ut;if(a!==null)return ep(o,a,i);Rt(),o=o.memoizedState,a=Rt();var c=a.queue.dispatch;return a.memoizedState=i,[o,c,!1]}function Uo(i,o,a,c){return i={tag:i,create:a,deps:c,inst:o,next:null},o=Ge.updateQueue,o===null&&(o=vl(),Ge.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,o.lastEffect=i),i}function np(){return Rt().memoizedState}function Sl(i,o,a,c){var g=gn();Ge.flags|=i,g.memoizedState=Uo(1|o,{destroy:void 0},a,c===void 0?null:c)}function wl(i,o,a,c){var g=Rt();c=c===void 0?null:c;var v=g.memoizedState.inst;ut!==null&&c!==null&&Wc(c,ut.memoizedState.deps)?g.memoizedState=Uo(o,v,a,c):(Ge.flags|=i,g.memoizedState=Uo(1|o,v,a,c))}function ip(i,o){Sl(8390656,8,i,o)}function rd(i,o){wl(2048,8,i,o)}function dw(i){Ge.flags|=4;var o=Ge.updateQueue;if(o===null)o=vl(),Ge.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function sp(i){var o=Rt().memoizedState;return dw({ref:o,nextImpl:i}),function(){if((et&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function op(i,o){return wl(4,2,i,o)}function rp(i,o){return wl(4,4,i,o)}function ap(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function lp(i,o,a){a=a!=null?a.concat([i]):null,wl(4,4,ap.bind(null,o,i),a)}function ad(){}function up(i,o){var a=Rt();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&Wc(o,c[1])?c[0]:(a.memoizedState=[i,o],i)}function cp(i,o){var a=Rt();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&Wc(o,c[1]))return c[0];if(c=i(),Ws){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[c,o],c}function ld(i,o,a){return a===void 0||(Pi&1073741824)!==0&&(Fe&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=dg(),Ge.lanes|=i,_s|=i,a)}function dp(i,o,a,c){return On(a,o)?a:Mo.current!==null?(i=ld(i,a,c),On(i,o)||(Pt=!0),i):(Pi&42)===0||(Pi&1073741824)!==0&&(Fe&261930)===0?(Pt=!0,i.memoizedState=a):(i=dg(),Ge.lanes|=i,_s|=i,o)}function fp(i,o,a,c,g){var v=ee.p;ee.p=v!==0&&8>v?v:8;var x=J.T,E={};J.T=E,dd(i,!1,o,a);try{var O=g(),$=J.S;if($!==null&&$(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var te=rw(O,c);jr(i,o,te,zn(i))}else jr(i,o,c,zn(i))}catch(se){jr(i,o,{then:function(){},status:"rejected",reason:se},zn())}finally{ee.p=v,x!==null&&E.types!==null&&(x.types=E.types),J.T=x}}function fw(){}function ud(i,o,a,c){if(i.tag!==5)throw Error(s(476));var g=hp(i).queue;fp(i,g,o,ae,a===null?fw:function(){return mp(i),a(c)})}function hp(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:ae},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function mp(i){var o=hp(i);o.next===null&&(o=i.alternate.memoizedState),jr(i,o.next.queue,{},zn())}function cd(){return nn(la)}function pp(){return Rt().memoizedState}function gp(){return Rt().memoizedState}function hw(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=zn();i=hs(a);var c=ms(o,i,a);c!==null&&(In(c,o,a),Hr(c,o,a)),o={cache:Gc()},i.payload=o;return}o=o.return}}function mw(i,o,a){var c=zn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xl(i)?vp(o,a):(a=Nc(i,o,a,c),a!==null&&(In(a,i,c),_p(a,o,c)))}function yp(i,o,a){var c=zn();jr(i,o,a,c)}function jr(i,o,a,c){var g={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xl(i))vp(o,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var x=o.lastRenderedState,E=v(x,a);if(g.hasEagerState=!0,g.eagerState=E,On(E,x))return il(i,o,g,0),ft===null&&nl(),!1}catch{}finally{}if(a=Nc(i,o,g,c),a!==null)return In(a,i,c),_p(a,o,c),!0}return!1}function dd(i,o,a,c){if(c={lane:2,revertLane:Vd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},xl(i)){if(o)throw Error(s(479))}else o=Nc(i,a,c,2),o!==null&&In(o,i,2)}function xl(i){var o=i.alternate;return i===Ge||o!==null&&o===Ge}function vp(i,o){Do=gl=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function _p(i,o,a){if((a&4194048)!==0){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,pn(i,a)}}var Fr={readContext:nn,use:_l,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Fr.useEffectEvent=wt;var bp={readContext:nn,use:_l,useCallback:function(i,o){return gn().memoizedState=[i,o===void 0?null:o],i},useContext:nn,useEffect:ip,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Sl(4194308,4,ap.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Sl(4194308,4,i,o)},useInsertionEffect:function(i,o){Sl(4,2,i,o)},useMemo:function(i,o){var a=gn();o=o===void 0?null:o;var c=i();if(Ws){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[c,o],c},useReducer:function(i,o,a){var c=gn();if(a!==void 0){var g=a(o);if(Ws){wn(!0);try{a(o)}finally{wn(!1)}}}else g=o;return c.memoizedState=c.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},c.queue=i,i=i.dispatch=mw.bind(null,Ge,i),[c.memoizedState,i]},useRef:function(i){var o=gn();return i={current:i},o.memoizedState=i},useState:function(i){i=sd(i);var o=i.queue,a=yp.bind(null,Ge,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:ad,useDeferredValue:function(i,o){var a=gn();return ld(a,i,o)},useTransition:function(){var i=sd(!1);return i=fp.bind(null,Ge,i.queue,!0,!1),gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var c=Ge,g=gn();if(Ye){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),ft===null)throw Error(s(349));(Fe&127)!==0||zm(c,o,a)}g.memoizedState=a;var v={value:a,getSnapshot:o};return g.queue=v,ip(Vm.bind(null,c,v,i),[i]),c.flags|=2048,Uo(9,{destroy:void 0},Bm.bind(null,c,v,a,o),null),a},useId:function(){var i=gn(),o=ft.identifierPrefix;if(Ye){var a=bi,c=_i;a=(c&~(1<<32-Bt(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=yl++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=aw++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:cd,useFormState:Qm,useActionState:Qm,useOptimistic:function(i){var o=gn();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=dd.bind(null,Ge,!0,a),a.dispatch=o,[i,o]},useMemoCache:td,useCacheRefresh:function(){return gn().memoizedState=hw.bind(null,Ge)},useEffectEvent:function(i){var o=gn(),a={impl:i};return o.memoizedState=a,function(){if((et&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},fd={readContext:nn,use:_l,useCallback:up,useContext:nn,useEffect:rd,useImperativeHandle:lp,useInsertionEffect:op,useLayoutEffect:rp,useMemo:cp,useReducer:bl,useRef:np,useState:function(){return bl(Li)},useDebugValue:ad,useDeferredValue:function(i,o){var a=Rt();return dp(a,ut.memoizedState,i,o)},useTransition:function(){var i=bl(Li)[0],o=Rt().memoizedState;return[typeof i=="boolean"?i:$r(i),o]},useSyncExternalStore:Hm,useId:pp,useHostTransitionStatus:cd,useFormState:Zm,useActionState:Zm,useOptimistic:function(i,o){var a=Rt();return Fm(a,ut,i,o)},useMemoCache:td,useCacheRefresh:gp};fd.useEffectEvent=sp;var Sp={readContext:nn,use:_l,useCallback:up,useContext:nn,useEffect:rd,useImperativeHandle:lp,useInsertionEffect:op,useLayoutEffect:rp,useMemo:cp,useReducer:id,useRef:np,useState:function(){return id(Li)},useDebugValue:ad,useDeferredValue:function(i,o){var a=Rt();return ut===null?ld(a,i,o):dp(a,ut.memoizedState,i,o)},useTransition:function(){var i=id(Li)[0],o=Rt().memoizedState;return[typeof i=="boolean"?i:$r(i),o]},useSyncExternalStore:Hm,useId:pp,useHostTransitionStatus:cd,useFormState:tp,useActionState:tp,useOptimistic:function(i,o){var a=Rt();return ut!==null?Fm(a,ut,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:td,useCacheRefresh:gp};Sp.useEffectEvent=sp;function hd(i,o,a,c){o=i.memoizedState,a=a(c,o),a=a==null?o:b({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var md={enqueueSetState:function(i,o,a){i=i._reactInternals;var c=zn(),g=hs(c);g.payload=o,a!=null&&(g.callback=a),o=ms(i,g,c),o!==null&&(In(o,i,c),Hr(o,i,c))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var c=zn(),g=hs(c);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=ms(i,g,c),o!==null&&(In(o,i,c),Hr(o,i,c))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=zn(),c=hs(a);c.tag=2,o!=null&&(c.callback=o),o=ms(i,c,a),o!==null&&(In(o,i,a),Hr(o,i,a))}};function wp(i,o,a,c,g,v,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,x):o.prototype&&o.prototype.isPureReactComponent?!Dr(a,c)||!Dr(g,v):!0}function xp(i,o,a,c){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==i&&md.enqueueReplaceState(o,o.state,null)}function Xs(i,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(i=i.defaultProps){a===o&&(a=b({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Tp(i){tl(i)}function Ep(i){console.error(i)}function Ap(i){tl(i)}function Tl(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function Cp(i,o,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function pd(i,o,a){return a=hs(a),a.tag=3,a.payload={element:null},a.callback=function(){Tl(i,o)},a}function Np(i){return i=hs(i),i.tag=3,i}function Rp(i,o,a,c){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;i.payload=function(){return g(v)},i.callback=function(){Cp(o,a,c)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){Cp(o,a,c),typeof g!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function pw(i,o,a,c,g){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&Ao(o,a,g,!0),a=Ln.current,a!==null){switch(a.tag){case 31:case 13:return Qn===null?Pl():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,c===dl?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),Hd(i,c,g)),!1;case 22:return a.flags|=65536,c===dl?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),Hd(i,c,g)),!1}throw Error(s(435,a.tag))}return Hd(i,c,g),Pl(),!1}if(Ye)return o=Ln.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,c!==Uc&&(i=Error(s(422),{cause:c}),Or(Yn(i,a)))):(c!==Uc&&(o=Error(s(423),{cause:c}),Or(Yn(o,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,c=Yn(c,a),g=pd(i.stateNode,c,g),jc(i,g),xt!==4&&(xt=2)),!1;var v=Error(s(520),{cause:c});if(v=Yn(v,a),ea===null?ea=[v]:ea.push(v),xt!==4&&(xt=2),o===null)return!0;c=Yn(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=pd(a.stateNode,c,i),jc(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bs===null||!bs.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Np(g),Rp(g,i,a,c),jc(a,g),!1}a=a.return}while(a!==null);return!1}var gd=Error(s(461)),Pt=!1;function sn(i,o,a,c){o.child=i===null?km(o,null,a,c):Ks(o,i.child,a,c)}function Ip(i,o,a,c,g){a=a.render;var v=o.ref;if("ref"in c){var x={};for(var E in c)E!=="ref"&&(x[E]=c[E])}else x=c;return js(o),c=Xc(i,o,a,x,v,g),E=Qc(),i!==null&&!Pt?(Zc(i,o,g),qi(i,o,g)):(Ye&&E&&Dc(o),o.flags|=1,sn(i,o,c,g),o.child)}function Mp(i,o,a,c,g){if(i===null){var v=a.type;return typeof v=="function"&&!Rc(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,Dp(i,o,v,c,g)):(i=ol(a.type,null,c,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!Td(i,g)){var x=v.memoizedProps;if(a=a.compare,a=a!==null?a:Dr,a(x,c)&&i.ref===o.ref)return qi(i,o,g)}return o.flags|=1,i=Di(v,c),i.ref=o.ref,i.return=o,o.child=i}function Dp(i,o,a,c,g){if(i!==null){var v=i.memoizedProps;if(Dr(v,c)&&i.ref===o.ref)if(Pt=!1,o.pendingProps=c=v,Td(i,g))(i.flags&131072)!==0&&(Pt=!0);else return o.lanes=i.lanes,qi(i,o,g)}return yd(i,o,a,c,g)}function kp(i,o,a,c){var g=c.children,v=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=o.child=i.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~v}else c=0,o.child=null;return Up(i,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ul(o,v!==null?v.cachePool:null),v!==null?Pm(o,v):Jc(),Lm(o);else return c=o.lanes=536870912,Up(i,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(ul(o,v.cachePool),Pm(o,v),gs(),o.memoizedState=null):(i!==null&&ul(o,null),Jc(),gs());return sn(i,o,g,a),o.child}function Jr(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Up(i,o,a,c,g){var v=zc();return v=v===null?null:{parent:Ut._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},i!==null&&ul(o,null),Jc(),Lm(o),i!==null&&Ao(i,o,c,!0),o.childLanes=g,null}function El(i,o){return o=Cl({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Op(i,o,a){return Ks(o,i.child,null,a),i=El(o,o.pendingProps),i.flags|=2,qn(o),o.memoizedState=null,i}function gw(i,o,a){var c=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ye){if(c.mode==="hidden")return i=El(o,c),o.lanes=536870912,Jr(null,i);if(Kc(o),(i=gt)?(i=Jg(i,Xn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ls!==null?{id:_i,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=vm(i),a.return=o,o.child=a,tn=o,gt=null)):i=null,i===null)throw cs(o);return o.lanes=536870912,null}return El(o,c)}var v=i.memoizedState;if(v!==null){var x=v.dehydrated;if(Kc(o),g)if(o.flags&256)o.flags&=-257,o=Op(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Pt||Ao(i,o,a,!1),g=(a&i.childLanes)!==0,Pt||g){if(c=ft,c!==null&&(x=it(c,a),x!==0&&x!==v.retryLane))throw v.retryLane=x,zs(i,x),In(c,i,x),gd;Pl(),o=Op(i,o,a)}else i=v.treeContext,gt=Zn(x.nextSibling),tn=o,Ye=!0,us=null,Xn=!1,i!==null&&Sm(o,i),o=El(o,c),o.flags|=4096;return o}return i=Di(i.child,{mode:c.mode,children:c.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Al(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function yd(i,o,a,c,g){return js(o),a=Xc(i,o,a,c,void 0,g),c=Qc(),i!==null&&!Pt?(Zc(i,o,g),qi(i,o,g)):(Ye&&c&&Dc(o),o.flags|=1,sn(i,o,a,g),o.child)}function Pp(i,o,a,c,g,v){return js(o),o.updateQueue=null,a=Gm(o,c,a,g),qm(i),c=Qc(),i!==null&&!Pt?(Zc(i,o,v),qi(i,o,v)):(Ye&&c&&Dc(o),o.flags|=1,sn(i,o,a,v),o.child)}function Lp(i,o,a,c,g){if(js(o),o.stateNode===null){var v=wo,x=a.contextType;typeof x=="object"&&x!==null&&(v=nn(x)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=md,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Vc(o),x=a.contextType,v.context=typeof x=="object"&&x!==null?nn(x):wo,v.state=o.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(hd(o,a,x,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(x=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),x!==v.state&&md.enqueueReplaceState(v,v.state,null),Br(o,c,v,g),zr(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(i===null){v=o.stateNode;var E=o.memoizedProps,O=Xs(a,E);v.props=O;var $=v.context,te=a.contextType;x=wo,typeof te=="object"&&te!==null&&(x=nn(te));var se=a.getDerivedStateFromProps;te=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E||$!==x)&&xp(o,v,c,x),fs=!1;var Y=o.memoizedState;v.state=Y,Br(o,c,v,g),zr(),$=o.memoizedState,E||Y!==$||fs?(typeof se=="function"&&(hd(o,a,se,c),$=o.memoizedState),(O=fs||wp(o,a,O,c,Y,$,x))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=$),v.props=c,v.state=$,v.context=x,c=O):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,$c(i,o),x=o.memoizedProps,te=Xs(a,x),v.props=te,se=o.pendingProps,Y=v.context,$=a.contextType,O=wo,typeof $=="object"&&$!==null&&(O=nn($)),E=a.getDerivedStateFromProps,($=typeof E=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==se||Y!==O)&&xp(o,v,c,O),fs=!1,Y=o.memoizedState,v.state=Y,Br(o,c,v,g),zr();var X=o.memoizedState;x!==se||Y!==X||fs||i!==null&&i.dependencies!==null&&al(i.dependencies)?(typeof E=="function"&&(hd(o,a,E,c),X=o.memoizedState),(te=fs||wp(o,a,te,c,Y,X,O)||i!==null&&i.dependencies!==null&&al(i.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,X,O),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,X,O)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=X),v.props=c,v.state=X,v.context=O,c=te):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),c=!1)}return v=c,Al(i,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&c?(o.child=Ks(o,i.child,null,g),o.child=Ks(o,null,a,g)):sn(i,o,a,g),o.memoizedState=v.state,i=o.child):i=qi(i,o,g),i}function qp(i,o,a,c){return Vs(),o.flags|=256,sn(i,o,a,c),o.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _d(i){return{baseLanes:i,cachePool:Cm()}}function bd(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Hn),i}function Gp(i,o,a){var c=o.pendingProps,g=!1,v=(o.flags&128)!==0,x;if((x=v)||(x=i!==null&&i.memoizedState===null?!1:(Nt.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ye){if(g?ps(o):gs(),(i=gt)?(i=Jg(i,Xn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ls!==null?{id:_i,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=vm(i),a.return=o,o.child=a,tn=o,gt=null)):i=null,i===null)throw cs(o);return nf(i)?o.lanes=32:o.lanes=536870912,null}var E=c.children;return c=c.fallback,g?(gs(),g=o.mode,E=Cl({mode:"hidden",children:E},g),c=Bs(c,g,a,null),E.return=o,c.return=o,E.sibling=c,o.child=E,c=o.child,c.memoizedState=_d(a),c.childLanes=bd(i,x,a),o.memoizedState=vd,Jr(null,c)):(ps(o),Sd(o,E))}var O=i.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(v)o.flags&256?(ps(o),o.flags&=-257,o=wd(i,o,a)):o.memoizedState!==null?(gs(),o.child=i.child,o.flags|=128,o=null):(gs(),E=c.fallback,g=o.mode,c=Cl({mode:"visible",children:c.children},g),E=Bs(E,g,a,null),E.flags|=2,c.return=o,E.return=o,c.sibling=E,o.child=c,Ks(o,i.child,null,a),c=o.child,c.memoizedState=_d(a),c.childLanes=bd(i,x,a),o.memoizedState=vd,o=Jr(null,c));else if(ps(o),nf(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var $=x.dgst;x=$,c=Error(s(419)),c.stack="",c.digest=x,Or({value:c,source:null,stack:null}),o=wd(i,o,a)}else if(Pt||Ao(i,o,a,!1),x=(a&i.childLanes)!==0,Pt||x){if(x=ft,x!==null&&(c=it(x,a),c!==0&&c!==O.retryLane))throw O.retryLane=c,zs(i,c),In(x,i,c),gd;tf(E)||Pl(),o=wd(i,o,a)}else tf(E)?(o.flags|=192,o.child=i.child,o=null):(i=O.treeContext,gt=Zn(E.nextSibling),tn=o,Ye=!0,us=null,Xn=!1,i!==null&&Sm(o,i),o=Sd(o,c.children),o.flags|=4096);return o}return g?(gs(),E=c.fallback,g=o.mode,O=i.child,$=O.sibling,c=Di(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,$!==null?E=Di($,E):(E=Bs(E,g,a,null),E.flags|=2),E.return=o,c.return=o,c.sibling=E,o.child=c,Jr(null,c),c=o.child,E=i.child.memoizedState,E===null?E=_d(a):(g=E.cachePool,g!==null?(O=Ut._currentValue,g=g.parent!==O?{parent:O,pool:O}:g):g=Cm(),E={baseLanes:E.baseLanes|a,cachePool:g}),c.memoizedState=E,c.childLanes=bd(i,x,a),o.memoizedState=vd,Jr(i.child,c)):(ps(o),a=i.child,i=a.sibling,a=Di(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,i!==null&&(x=o.deletions,x===null?(o.deletions=[i],o.flags|=16):x.push(i)),o.child=a,o.memoizedState=null,a)}function Sd(i,o){return o=Cl({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Cl(i,o){return i=Pn(22,i,null,o),i.lanes=0,i}function wd(i,o,a){return Ks(o,i.child,null,a),i=Sd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Hp(i,o,a){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o),Lc(i.return,o,a)}function xd(i,o,a,c,g,v){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:g,treeForkCount:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=a,x.tailMode=g,x.treeForkCount=v)}function zp(i,o,a){var c=o.pendingProps,g=c.revealOrder,v=c.tail;c=c.children;var x=Nt.current,E=(x&2)!==0;if(E?(x=x&1|2,o.flags|=128):x&=1,oe(Nt,x),sn(i,o,c,a),c=Ye?Ur:0,!E&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Hp(i,a,o);else if(i.tag===19)Hp(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)i=a.alternate,i!==null&&pl(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),xd(o,!1,g,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&pl(i)===null){o.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}xd(o,!0,a,null,v,c);break;case"together":xd(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function qi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),_s|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(Ao(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Di(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Di(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Td(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&al(i)))}function yw(i,o,a){switch(o.tag){case 3:Ae(o,o.stateNode.containerInfo),ds(o,Ut,i.memoizedState.cache),Vs();break;case 27:case 5:Ee(o);break;case 4:Ae(o,o.stateNode.containerInfo);break;case 10:ds(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Kc(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(ps(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Gp(i,o,a):(ps(o),i=qi(i,o,a),i!==null?i.sibling:null);ps(o);break;case 19:var g=(i.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(Ao(i,o,a,!1),c=(a&o.childLanes)!==0),g){if(c)return zp(i,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),oe(Nt,Nt.current),c)break;return null;case 22:return o.lanes=0,kp(i,o,a,o.pendingProps);case 24:ds(o,Ut,i.memoizedState.cache)}return qi(i,o,a)}function Bp(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Pt=!0;else{if(!Td(i,a)&&(o.flags&128)===0)return Pt=!1,yw(i,o,a);Pt=(i.flags&131072)!==0}else Pt=!1,Ye&&(o.flags&1048576)!==0&&bm(o,Ur,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(i=Js(o.elementType),o.type=i,typeof i=="function")Rc(i)?(c=Xs(i,c),o.tag=1,o=Lp(null,o,i,c,a)):(o.tag=0,o=yd(null,o,i,c,a));else{if(i!=null){var g=i.$$typeof;if(g===U){o.tag=11,o=Ip(null,o,i,c,a);break e}else if(g===z){o.tag=14,o=Mp(null,o,i,c,a);break e}}throw o=Ce(i)||i,Error(s(306,o,""))}}return o;case 0:return yd(i,o,o.type,o.pendingProps,a);case 1:return c=o.type,g=Xs(c,o.pendingProps),Lp(i,o,c,g,a);case 3:e:{if(Ae(o,o.stateNode.containerInfo),i===null)throw Error(s(387));c=o.pendingProps;var v=o.memoizedState;g=v.element,$c(i,o),Br(o,c,null,a);var x=o.memoizedState;if(c=x.cache,ds(o,Ut,c),c!==v.cache&&qc(o,[Ut],a,!0),zr(),c=x.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=qp(i,o,c,a);break e}else if(c!==g){g=Yn(Error(s(424)),o),Or(g),o=qp(i,o,c,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(gt=Zn(i.firstChild),tn=o,Ye=!0,us=null,Xn=!0,a=km(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vs(),c===g){o=qi(i,o,a);break e}sn(i,o,c,a)}o=o.child}return o;case 26:return Al(i,o),i===null?(a=Zg(o.type,null,o.pendingProps,null))?o.memoizedState=a:Ye||(a=o.type,i=o.pendingProps,c=Vl(Q.current).createElement(a),c[Ct]=o,c[dn]=i,on(c,a,i),kt(c),o.stateNode=c):o.memoizedState=Zg(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ee(o),i===null&&Ye&&(c=o.stateNode=Wg(o.type,o.pendingProps,Q.current),tn=o,Xn=!0,g=gt,Ts(o.type)?(sf=g,gt=Zn(c.firstChild)):gt=g),sn(i,o,o.pendingProps.children,a),Al(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ye&&((g=c=gt)&&(c=Jw(c,o.type,o.pendingProps,Xn),c!==null?(o.stateNode=c,tn=o,gt=Zn(c.firstChild),Xn=!1,g=!0):g=!1),g||cs(o)),Ee(o),g=o.type,v=o.pendingProps,x=i!==null?i.memoizedProps:null,c=v.children,Qd(g,v)?c=null:x!==null&&Qd(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=Xc(i,o,lw,null,null,a),la._currentValue=g),Al(i,o),sn(i,o,c,a),o.child;case 6:return i===null&&Ye&&((i=a=gt)&&(a=Yw(a,o.pendingProps,Xn),a!==null?(o.stateNode=a,tn=o,gt=null,i=!0):i=!1),i||cs(o)),null;case 13:return Gp(i,o,a);case 4:return Ae(o,o.stateNode.containerInfo),c=o.pendingProps,i===null?o.child=Ks(o,null,c,a):sn(i,o,c,a),o.child;case 11:return Ip(i,o,o.type,o.pendingProps,a);case 7:return sn(i,o,o.pendingProps,a),o.child;case 8:return sn(i,o,o.pendingProps.children,a),o.child;case 12:return sn(i,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,ds(o,o.type,c.value),sn(i,o,c.children,a),o.child;case 9:return g=o.type._context,c=o.pendingProps.children,js(o),g=nn(g),c=c(g),o.flags|=1,sn(i,o,c,a),o.child;case 14:return Mp(i,o,o.type,o.pendingProps,a);case 15:return Dp(i,o,o.type,o.pendingProps,a);case 19:return zp(i,o,a);case 31:return gw(i,o,a);case 22:return kp(i,o,a,o.pendingProps);case 24:return js(o),c=nn(Ut),i===null?(g=zc(),g===null&&(g=ft,v=Gc(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),o.memoizedState={parent:c,cache:g},Vc(o),ds(o,Ut,g)):((i.lanes&a)!==0&&($c(i,o),Br(o,null,null,a),zr()),g=i.memoizedState,v=o.memoizedState,g.parent!==c?(g={parent:c,cache:c},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ds(o,Ut,c)):(c=v.cache,ds(o,Ut,c),c!==g.cache&&qc(o,[Ut],a,!0))),sn(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Gi(i){i.flags|=4}function Ed(i,o,a,c,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(pg())i.flags|=8192;else throw Ys=dl,Bc}else i.flags&=-16777217}function Vp(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!sy(o))if(pg())i.flags|=8192;else throw Ys=dl,Bc}function Nl(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Vt():536870912,i.lanes|=o,qo|=o)}function Yr(i,o){if(!Ye)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function yt(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(o)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=c,i.childLanes=a,o}function vw(i,o,a){var c=o.pendingProps;switch(kc(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(o),null;case 1:return yt(o),null;case 3:return a=o.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Oi(Ut),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Eo(o)?Gi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Oc())),yt(o),null;case 26:var g=o.type,v=o.memoizedState;return i===null?(Gi(o),v!==null?(yt(o),Vp(o,v)):(yt(o),Ed(o,g,null,c,a))):v?v!==i.memoizedState?(Gi(o),yt(o),Vp(o,v)):(yt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==c&&Gi(o),yt(o),Ed(o,g,i,c,a)),null;case 27:if(He(o),a=Q.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&Gi(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return yt(o),null}i=le.current,Eo(o)?wm(o):(i=Wg(g,c,a),o.stateNode=i,Gi(o))}return yt(o),null;case 5:if(He(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&Gi(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return yt(o),null}if(v=le.current,Eo(o))wm(o);else{var x=Vl(Q.current);switch(v){case 1:v=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=x.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?x.createElement(g,{is:c.is}):x.createElement(g)}}v[Ct]=o,v[dn]=c;e:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)v.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break e;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=v;e:switch(on(v,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Gi(o)}}return yt(o),Ed(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==c&&Gi(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(i=Q.current,Eo(o)){if(i=o.stateNode,a=o.memoizedProps,c=null,g=tn,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}i[Ct]=o,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Gg(i.nodeValue,a)),i||cs(o,!0)}else i=Vl(i).createTextNode(c),i[Ct]=o,o.stateNode=i}return yt(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(c=Eo(o),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ct]=o}else Vs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),i=!1}else a=Oc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(qn(o),o):(qn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return yt(o),null;case 13:if(c=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Eo(o),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Ct]=o}else Vs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),g=!1}else g=Oc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(qn(o),o):(qn(o),null)}return qn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=o.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Nl(o,o.updateQueue),yt(o),null);case 4:return ye(),i===null&&Jd(o.stateNode.containerInfo),yt(o),null;case 10:return Oi(o.type),yt(o),null;case 19:if(G(Nt),c=o.memoizedState,c===null)return yt(o),null;if(g=(o.flags&128)!==0,v=c.rendering,v===null)if(g)Yr(c,!1);else{if(xt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=pl(i),v!==null){for(o.flags|=128,Yr(c,!1),i=v.updateQueue,o.updateQueue=i,Nl(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)ym(a,i),a=a.sibling;return oe(Nt,Nt.current&1|2),Ye&&ki(o,c.treeForkCount),o.child}i=i.sibling}c.tail!==null&&he()>kl&&(o.flags|=128,g=!0,Yr(c,!1),o.lanes=4194304)}else{if(!g)if(i=pl(v),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,Nl(o,i),Yr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ye)return yt(o),null}else 2*he()-c.renderingStartTime>kl&&a!==536870912&&(o.flags|=128,g=!0,Yr(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(i=c.last,i!==null?i.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=he(),i.sibling=null,a=Nt.current,oe(Nt,g?a&1|2:a&1),Ye&&ki(o,c.treeForkCount),i):(yt(o),null);case 22:case 23:return qn(o),Yc(),c=o.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(yt(o),o.subtreeFlags&6&&(o.flags|=8192)):yt(o),a=o.updateQueue,a!==null&&Nl(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),i!==null&&G(Fs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Oi(Ut),yt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function _w(i,o){switch(kc(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Oi(Ut),ye(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return He(o),null;case 31:if(o.memoizedState!==null){if(qn(o),o.alternate===null)throw Error(s(340));Vs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(qn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Vs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return G(Nt),null;case 4:return ye(),null;case 10:return Oi(o.type),null;case 22:case 23:return qn(o),Yc(),i!==null&&G(Fs),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Oi(Ut),null;case 25:return null;default:return null}}function $p(i,o){switch(kc(o),o.tag){case 3:Oi(Ut),ye();break;case 26:case 27:case 5:He(o);break;case 4:ye();break;case 31:o.memoizedState!==null&&qn(o);break;case 13:qn(o);break;case 19:G(Nt);break;case 10:Oi(o.type);break;case 22:case 23:qn(o),Yc(),i!==null&&G(Fs);break;case 24:Oi(Ut)}}function Kr(i,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var g=c.next;a=g;do{if((a.tag&i)===i){c=void 0;var v=a.create,x=a.inst;c=v(),x.destroy=c}a=a.next}while(a!==g)}}catch(E){ot(o,o.return,E)}}function ys(i,o,a){try{var c=o.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&i)===i){var x=c.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,g=o;var O=a,$=E;try{$()}catch(te){ot(g,O,te)}}}c=c.next}while(c!==v)}}catch(te){ot(o,o.return,te)}}function jp(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Om(o,a)}catch(c){ot(i,i.return,c)}}}function Fp(i,o,a){a.props=Xs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){ot(i,o,c)}}function Wr(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(g){ot(i,o,g)}}function Si(i,o){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(g){ot(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){ot(i,o,g)}else a.current=null}function Jp(i){var o=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(g){ot(i,i.return,g)}}function Ad(i,o,a){try{var c=i.stateNode;zw(c,i.type,a,o),c[dn]=o}catch(g){ot(i,i.return,g)}}function Yp(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ts(i.type)||i.tag===4}function Cd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ts(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Nd(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Ii));else if(c!==4&&(c===27&&Ts(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(Nd(i,o,a),i=i.sibling;i!==null;)Nd(i,o,a),i=i.sibling}function Rl(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(c!==4&&(c===27&&Ts(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Rl(i,o,a),i=i.sibling;i!==null;)Rl(i,o,a),i=i.sibling}function Kp(i){var o=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);on(o,c,a),o[Ct]=i,o[dn]=a}catch(v){ot(i,i.return,v)}}var Hi=!1,Lt=!1,Rd=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function bw(i,o){if(i=i.containerInfo,Wd=Wl,i=lm(i),wc(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var x=0,E=-1,O=-1,$=0,te=0,se=i,Y=null;t:for(;;){for(var X;se!==a||g!==0&&se.nodeType!==3||(E=x+g),se!==v||c!==0&&se.nodeType!==3||(O=x+c),se.nodeType===3&&(x+=se.nodeValue.length),(X=se.firstChild)!==null;)Y=se,se=X;for(;;){if(se===i)break t;if(Y===a&&++$===g&&(E=x),Y===v&&++te===c&&(O=x),(X=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=X}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xd={focusedElem:i,selectionRange:a},Wl=!1,Kt=o;Kt!==null;)if(o=Kt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Kt=i;else for(;Kt!==null;){switch(o=Kt,v=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,g=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var ve=Xs(a.type,g);i=c.getSnapshotBeforeUpdate(ve,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(De){ot(a,a.return,De)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)ef(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ef(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Kt=i;break}Kt=o.return}}function Xp(i,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Bi(i,a),c&4&&Kr(5,a);break;case 1:if(Bi(i,a),c&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(x){ot(a,a.return,x)}else{var g=Xs(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(x){ot(a,a.return,x)}}c&64&&jp(a),c&512&&Wr(a,a.return);break;case 3:if(Bi(i,a),c&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Om(i,o)}catch(x){ot(a,a.return,x)}}break;case 27:o===null&&c&4&&Kp(a);case 26:case 5:Bi(i,a),o===null&&c&4&&Jp(a),c&512&&Wr(a,a.return);break;case 12:Bi(i,a);break;case 31:Bi(i,a),c&4&&eg(i,a);break;case 13:Bi(i,a),c&4&&tg(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=Rw.bind(null,a),Kw(i,a))));break;case 22:if(c=a.memoizedState!==null||Hi,!c){o=o!==null&&o.memoizedState!==null||Lt,g=Hi;var v=Lt;Hi=c,(Lt=o)&&!v?Vi(i,a,(a.subtreeFlags&8772)!==0):Bi(i,a),Hi=g,Lt=v}break;case 30:break;default:Bi(i,a)}}function Qp(i){var o=i.alternate;o!==null&&(i.alternate=null,Qp(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ps(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,An=!1;function zi(i,o,a){for(a=a.child;a!==null;)Zp(i,o,a),a=a.sibling}function Zp(i,o,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Dn,a)}catch{}switch(a.tag){case 26:Lt||Si(a,o),zi(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Lt||Si(a,o);var c=vt,g=An;Ts(a.type)&&(vt=a.stateNode,An=!1),zi(i,o,a),oa(a.stateNode),vt=c,An=g;break;case 5:Lt||Si(a,o);case 6:if(c=vt,g=An,vt=null,zi(i,o,a),vt=c,An=g,vt!==null)if(An)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(v){ot(a,o,v)}else try{vt.removeChild(a.stateNode)}catch(v){ot(a,o,v)}break;case 18:vt!==null&&(An?(i=vt,jg(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Fo(i)):jg(vt,a.stateNode));break;case 4:c=vt,g=An,vt=a.stateNode.containerInfo,An=!0,zi(i,o,a),vt=c,An=g;break;case 0:case 11:case 14:case 15:ys(2,a,o),Lt||ys(4,a,o),zi(i,o,a);break;case 1:Lt||(Si(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Fp(a,o,c)),zi(i,o,a);break;case 21:zi(i,o,a);break;case 22:Lt=(c=Lt)||a.memoizedState!==null,zi(i,o,a),Lt=c;break;default:zi(i,o,a)}}function eg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Fo(i)}catch(a){ot(o,o.return,a)}}}function tg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fo(i)}catch(a){ot(o,o.return,a)}}function Sw(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Wp),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Wp),o;default:throw Error(s(435,i.tag))}}function Il(i,o){var a=Sw(i);o.forEach(function(c){if(!a.has(c)){a.add(c);var g=Iw.bind(null,i,c);c.then(g,g)}})}function Cn(i,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var g=a[c],v=i,x=o,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(Ts(E.type)){vt=E.stateNode,An=!1;break e}break;case 5:vt=E.stateNode,An=!1;break e;case 3:case 4:vt=E.stateNode.containerInfo,An=!0;break e}E=E.return}if(vt===null)throw Error(s(160));Zp(v,x,g),vt=null,An=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ng(o,i),o=o.sibling}var ai=null;function ng(i,o){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Cn(o,i),Nn(i),c&4&&(ys(3,i,i.return),Kr(3,i),ys(5,i,i.return));break;case 1:Cn(o,i),Nn(i),c&512&&(Lt||a===null||Si(a,a.return)),c&64&&Hi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var g=ai;if(Cn(o,i),Nn(i),c&512&&(Lt||a===null||Si(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[is]||v[Ct]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),on(v,c,a),v[Ct]=i,kt(v),c=v;break e;case"link":var x=ny("link","href",g).get(c+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(v=x[E],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}v=g.createElement(c),on(v,c,a),g.head.appendChild(v);break;case"meta":if(x=ny("meta","content",g).get(c+(a.content||""))){for(E=0;E<x.length;E++)if(v=x[E],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}v=g.createElement(c),on(v,c,a),g.head.appendChild(v);break;default:throw Error(s(468,c))}v[Ct]=i,kt(v),c=v}i.stateNode=c}else iy(g,i.type,i.stateNode);else i.stateNode=ty(g,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?iy(g,i.type,i.stateNode):ty(g,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Ad(i,i.memoizedProps,a.memoizedProps)}break;case 27:Cn(o,i),Nn(i),c&512&&(Lt||a===null||Si(a,a.return)),a!==null&&c&4&&Ad(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Cn(o,i),Nn(i),c&512&&(Lt||a===null||Si(a,a.return)),i.flags&32){g=i.stateNode;try{po(g,"")}catch(ve){ot(i,i.return,ve)}}c&4&&i.stateNode!=null&&(g=i.memoizedProps,Ad(i,g,a!==null?a.memoizedProps:g)),c&1024&&(Rd=!0);break;case 6:if(Cn(o,i),Nn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(ve){ot(i,i.return,ve)}}break;case 3:if(Fl=null,g=ai,ai=$l(o.containerInfo),Cn(o,i),ai=g,Nn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Fo(o.containerInfo)}catch(ve){ot(i,i.return,ve)}Rd&&(Rd=!1,ig(i));break;case 4:c=ai,ai=$l(i.stateNode.containerInfo),Cn(o,i),Nn(i),ai=c;break;case 12:Cn(o,i),Nn(i);break;case 31:Cn(o,i),Nn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Il(i,c)));break;case 13:Cn(o,i),Nn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dl=he()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Il(i,c)));break;case 22:g=i.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,$=Hi,te=Lt;if(Hi=$||g,Lt=te||O,Cn(o,i),Lt=te,Hi=$,Nn(i),c&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||O||Hi||Lt||Qs(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){O=a=o;try{if(v=O.stateNode,g)x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=O.stateNode;var se=O.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;E.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ve){ot(O,O.return,ve)}}}else if(o.tag===6){if(a===null){O=o;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(ve){ot(O,O.return,ve)}}}else if(o.tag===18){if(a===null){O=o;try{var X=O.stateNode;g?Fg(X,!0):Fg(O.stateNode,!1)}catch(ve){ot(O,O.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Il(i,a))));break;case 19:Cn(o,i),Nn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Il(i,c)));break;case 30:break;case 21:break;default:Cn(o,i),Nn(i)}}function Nn(i){var o=i.flags;if(o&2){try{for(var a,c=i.return;c!==null;){if(Yp(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,v=Cd(i);Rl(i,v,g);break;case 5:var x=a.stateNode;a.flags&32&&(po(x,""),a.flags&=-33);var E=Cd(i);Rl(i,E,x);break;case 3:case 4:var O=a.stateNode.containerInfo,$=Cd(i);Nd(i,$,O);break;default:throw Error(s(161))}}catch(te){ot(i,i.return,te)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ig(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;ig(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Bi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Xp(i,o.alternate,o),o=o.sibling}function Qs(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ys(4,o,o.return),Qs(o);break;case 1:Si(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Fp(o,o.return,a),Qs(o);break;case 27:oa(o.stateNode);case 26:case 5:Si(o,o.return),Qs(o);break;case 22:o.memoizedState===null&&Qs(o);break;case 30:Qs(o);break;default:Qs(o)}i=i.sibling}}function Vi(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,g=i,v=o,x=v.flags;switch(v.tag){case 0:case 11:case 15:Vi(g,v,a),Kr(4,v);break;case 1:if(Vi(g,v,a),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch($){ot(c,c.return,$)}if(c=v,g=c.updateQueue,g!==null){var E=c.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)Um(O[g],E)}catch($){ot(c,c.return,$)}}a&&x&64&&jp(v),Wr(v,v.return);break;case 27:Kp(v);case 26:case 5:Vi(g,v,a),a&&c===null&&x&4&&Jp(v),Wr(v,v.return);break;case 12:Vi(g,v,a);break;case 31:Vi(g,v,a),a&&x&4&&eg(g,v);break;case 13:Vi(g,v,a),a&&x&4&&tg(g,v);break;case 22:v.memoizedState===null&&Vi(g,v,a),Wr(v,v.return);break;case 30:break;default:Vi(g,v,a)}o=o.sibling}}function Id(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Pr(a))}function Md(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Pr(i))}function li(i,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)sg(i,o,a,c),o=o.sibling}function sg(i,o,a,c){var g=o.flags;switch(o.tag){case 0:case 11:case 15:li(i,o,a,c),g&2048&&Kr(9,o);break;case 1:li(i,o,a,c);break;case 3:li(i,o,a,c),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Pr(i)));break;case 12:if(g&2048){li(i,o,a,c),i=o.stateNode;try{var v=o.memoizedProps,x=v.id,E=v.onPostCommit;typeof E=="function"&&E(x,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){ot(o,o.return,O)}}else li(i,o,a,c);break;case 31:li(i,o,a,c);break;case 13:li(i,o,a,c);break;case 23:break;case 22:v=o.stateNode,x=o.alternate,o.memoizedState!==null?v._visibility&2?li(i,o,a,c):Xr(i,o):v._visibility&2?li(i,o,a,c):(v._visibility|=2,Oo(i,o,a,c,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Id(x,o);break;case 24:li(i,o,a,c),g&2048&&Md(o.alternate,o);break;default:li(i,o,a,c)}}function Oo(i,o,a,c,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=i,x=o,E=a,O=c,$=x.flags;switch(x.tag){case 0:case 11:case 15:Oo(v,x,E,O,g),Kr(8,x);break;case 23:break;case 22:var te=x.stateNode;x.memoizedState!==null?te._visibility&2?Oo(v,x,E,O,g):Xr(v,x):(te._visibility|=2,Oo(v,x,E,O,g)),g&&$&2048&&Id(x.alternate,x);break;case 24:Oo(v,x,E,O,g),g&&$&2048&&Md(x.alternate,x);break;default:Oo(v,x,E,O,g)}o=o.sibling}}function Xr(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,c=o,g=c.flags;switch(c.tag){case 22:Xr(a,c),g&2048&&Id(c.alternate,c);break;case 24:Xr(a,c),g&2048&&Md(c.alternate,c);break;default:Xr(a,c)}o=o.sibling}}var Qr=8192;function Po(i,o,a){if(i.subtreeFlags&Qr)for(i=i.child;i!==null;)og(i,o,a),i=i.sibling}function og(i,o,a){switch(i.tag){case 26:Po(i,o,a),i.flags&Qr&&i.memoizedState!==null&&ax(a,ai,i.memoizedState,i.memoizedProps);break;case 5:Po(i,o,a);break;case 3:case 4:var c=ai;ai=$l(i.stateNode.containerInfo),Po(i,o,a),ai=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Qr,Qr=16777216,Po(i,o,a),Qr=c):Po(i,o,a));break;default:Po(i,o,a)}}function rg(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Zr(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Kt=c,lg(c,i)}rg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ag(i),i=i.sibling}function ag(i){switch(i.tag){case 0:case 11:case 15:Zr(i),i.flags&2048&&ys(9,i,i.return);break;case 3:Zr(i);break;case 12:Zr(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Ml(i)):Zr(i);break;default:Zr(i)}}function Ml(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Kt=c,lg(c,i)}rg(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ys(8,o,o.return),Ml(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Ml(o));break;default:Ml(o)}i=i.sibling}}function lg(i,o){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:ys(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pr(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Kt=c;else e:for(a=i;Kt!==null;){c=Kt;var g=c.sibling,v=c.return;if(Qp(c),c===a){Kt=null;break e}if(g!==null){g.return=v,Kt=g;break e}Kt=v}}}var ww={getCacheForType:function(i){var o=nn(Ut),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return nn(Ut).controller.signal}},xw=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,Ve=null,Fe=0,st=0,Gn=null,vs=!1,Lo=!1,Dd=!1,$i=0,xt=0,_s=0,Zs=0,kd=0,Hn=0,qo=0,ea=null,Rn=null,Ud=!1,Dl=0,ug=0,kl=1/0,Ul=null,bs=null,$t=0,Ss=null,Go=null,ji=0,Od=0,Pd=null,cg=null,ta=0,Ld=null;function zn(){return(et&2)!==0&&Fe!==0?Fe&-Fe:J.T!==null?Vd():Un()}function dg(){if(Hn===0)if((Fe&536870912)===0||Ye){var i=Ci;Ci<<=1,(Ci&3932160)===0&&(Ci=262144),Hn=i}else Hn=536870912;return i=Ln.current,i!==null&&(i.flags|=32),Hn}function In(i,o,a){(i===ft&&(st===2||st===9)||i.cancelPendingCommit!==null)&&(Ho(i,0),ws(i,Fe,Hn,!1)),xn(i,a),((et&2)===0||i!==ft)&&(i===ft&&((et&2)===0&&(Zs|=a),xt===4&&ws(i,Fe,Hn,!1)),wi(i))}function fg(i,o,a){if((et&6)!==0)throw Error(s(327));var c=!a&&(o&127)===0&&(o&i.expiredLanes)===0||en(i,o),g=c?Aw(i,o):Gd(i,o,!0),v=c;do{if(g===0){Lo&&!c&&ws(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!Tw(a)){g=Gd(i,o,!1),v=!1;continue}if(g===2){if(v=o,i.errorRecoveryDisabledLanes&v)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var E=i;g=ea;var O=E.current.memoizedState.isDehydrated;if(O&&(Ho(E,x).flags|=256),x=Gd(E,x,!1),x!==2){if(Dd&&!O){E.errorRecoveryDisabledLanes|=v,Zs|=v,g=4;break e}v=Rn,Rn=g,v!==null&&(Rn===null?Rn=v:Rn.push.apply(Rn,v))}g=x}if(v=!1,g!==2)continue}}if(g===1){Ho(i,0),ws(i,o,0,!0);break}e:{switch(c=i,v=g,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ws(c,o,Hn,!vs);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Dl+300-he(),10<g)){if(ws(c,o,Hn,!vs),Dt(c,0,!0)!==0)break e;ji=o,c.timeoutHandle=Vg(hg.bind(null,c,a,Rn,Ul,Ud,o,Hn,Zs,qo,vs,v,"Throttled",-0,0),g);break e}hg(c,a,Rn,Ul,Ud,o,Hn,Zs,qo,vs,v,null,-0,0)}}break}while(!0);wi(i)}function hg(i,o,a,c,g,v,x,E,O,$,te,se,Y,X){if(i.timeoutHandle=-1,se=o.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},og(o,v,se);var ve=(v&62914560)===v?Dl-he():(v&4194048)===v?ug-he():0;if(ve=lx(se,ve),ve!==null){ji=v,i.cancelPendingCommit=ve(Sg.bind(null,i,o,v,a,c,g,x,E,O,te,se,null,Y,X)),ws(i,v,x,!$);return}}Sg(i,o,v,a,c,g,x,E,O)}function Tw(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var g=a[c],v=g.getSnapshot;g=g.value;try{if(!On(v(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ws(i,o,a,c){o&=~kd,o&=~Zs,i.suspendedLanes|=o,i.pingedLanes&=~o,c&&(i.warmLanes|=o),c=i.expirationTimes;for(var g=o;0<g;){var v=31-Bt(g),x=1<<v;c[v]=-1,g&=~x}a!==0&&kn(i,a,o)}function Ol(){return(et&6)===0?(na(0),!1):!0}function qd(){if(Ve!==null){if(st===0)var i=Ve.return;else i=Ve,Ui=$s=null,ed(i),Io=null,qr=0,i=Ve;for(;i!==null;)$p(i.alternate,i),i=i.return;Ve=null}}function Ho(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,$w(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ji=0,qd(),ft=i,Ve=a=Di(i.current,null),Fe=o,st=0,Gn=null,vs=!1,Lo=en(i,o),Dd=!1,qo=Hn=kd=Zs=_s=xt=0,Rn=ea=null,Ud=!1,(o&8)!==0&&(o|=o&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=o;0<c;){var g=31-Bt(c),v=1<<g;o|=i[g],c&=~v}return $i=o,nl(),a}function mg(i,o){Ge=null,J.H=Fr,o===Ro||o===cl?(o=Im(),st=3):o===Bc?(o=Im(),st=4):st=o===gd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Gn=o,Ve===null&&(xt=1,Tl(i,Yn(o,i.current)))}function pg(){var i=Ln.current;return i===null?!0:(Fe&4194048)===Fe?Qn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?i===Qn:!1}function gg(){var i=J.H;return J.H=Fr,i===null?Fr:i}function yg(){var i=J.A;return J.A=ww,i}function Pl(){xt=4,vs||(Fe&4194048)!==Fe&&Ln.current!==null||(Lo=!0),(_s&134217727)===0&&(Zs&134217727)===0||ft===null||ws(ft,Fe,Hn,!1)}function Gd(i,o,a){var c=et;et|=2;var g=gg(),v=yg();(ft!==i||Fe!==o)&&(Ul=null,Ho(i,o)),o=!1;var x=xt;e:do try{if(st!==0&&Ve!==null){var E=Ve,O=Gn;switch(st){case 8:qd(),x=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(o=!0);var $=st;if(st=0,Gn=null,zo(i,E,O,$),a&&Lo){x=0;break e}break;default:$=st,st=0,Gn=null,zo(i,E,O,$)}}Ew(),x=xt;break}catch(te){mg(i,te)}while(!0);return o&&i.shellSuspendCounter++,Ui=$s=null,et=c,J.H=g,J.A=v,Ve===null&&(ft=null,Fe=0,nl()),x}function Ew(){for(;Ve!==null;)vg(Ve)}function Aw(i,o){var a=et;et|=2;var c=gg(),g=yg();ft!==i||Fe!==o?(Ul=null,kl=he()+500,Ho(i,o)):Lo=en(i,o);e:do try{if(st!==0&&Ve!==null){o=Ve;var v=Gn;t:switch(st){case 1:st=0,Gn=null,zo(i,o,v,1);break;case 2:case 9:if(Nm(v)){st=0,Gn=null,_g(o);break}o=function(){st!==2&&st!==9||ft!==i||(st=7),wi(i)},v.then(o,o);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Nm(v)?(st=0,Gn=null,_g(o)):(st=0,Gn=null,zo(i,o,v,7));break;case 5:var x=null;switch(Ve.tag){case 26:x=Ve.memoizedState;case 5:case 27:var E=Ve;if(x?sy(x):E.stateNode.complete){st=0,Gn=null;var O=E.sibling;if(O!==null)Ve=O;else{var $=E.return;$!==null?(Ve=$,Ll($)):Ve=null}break t}}st=0,Gn=null,zo(i,o,v,5);break;case 6:st=0,Gn=null,zo(i,o,v,6);break;case 8:qd(),xt=6;break e;default:throw Error(s(462))}}Cw();break}catch(te){mg(i,te)}while(!0);return Ui=$s=null,J.H=c,J.A=g,et=a,Ve!==null?0:(ft=null,Fe=0,nl(),xt)}function Cw(){for(;Ve!==null&&!Ht();)vg(Ve)}function vg(i){var o=Bp(i.alternate,i,$i);i.memoizedProps=i.pendingProps,o===null?Ll(i):Ve=o}function _g(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Pp(a,o,o.pendingProps,o.type,void 0,Fe);break;case 11:o=Pp(a,o,o.pendingProps,o.type.render,o.ref,Fe);break;case 5:ed(o);default:$p(a,o),o=Ve=ym(o,$i),o=Bp(a,o,$i)}i.memoizedProps=i.pendingProps,o===null?Ll(i):Ve=o}function zo(i,o,a,c){Ui=$s=null,ed(o),Io=null,qr=0;var g=o.return;try{if(pw(i,g,o,a,Fe)){xt=1,Tl(i,Yn(a,i.current)),Ve=null;return}}catch(v){if(g!==null)throw Ve=g,v;xt=1,Tl(i,Yn(a,i.current)),Ve=null;return}o.flags&32768?(Ye||c===1?i=!0:Lo||(Fe&536870912)!==0?i=!1:(vs=i=!0,(c===2||c===9||c===3||c===6)&&(c=Ln.current,c!==null&&c.tag===13&&(c.flags|=16384))),bg(o,i)):Ll(o)}function Ll(i){var o=i;do{if((o.flags&32768)!==0){bg(o,vs);return}i=o.return;var a=vw(o.alternate,o,$i);if(a!==null){Ve=a;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=i}while(o!==null);xt===0&&(xt=5)}function bg(i,o){do{var a=_w(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);xt=6,Ve=null}function Sg(i,o,a,c,g,v,x,E,O){i.cancelPendingCommit=null;do ql();while($t!==0);if((et&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=Cc,At(i,a,v,x,E,O),i===ft&&(Ve=ft=null,Fe=0),Go=o,Ss=i,ji=a,Od=v,Pd=g,cg=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Mw(bt,function(){return Ag(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,g=ee.p,ee.p=2,x=et,et|=4;try{bw(i,o,a)}finally{et=x,ee.p=g,J.T=c}}$t=1,wg(),xg(),Tg()}}function wg(){if($t===1){$t=0;var i=Ss,o=Go,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var c=ee.p;ee.p=2;var g=et;et|=4;try{ng(o,i);var v=Xd,x=lm(i.containerInfo),E=v.focusedElem,O=v.selectionRange;if(x!==E&&E&&E.ownerDocument&&am(E.ownerDocument.documentElement,E)){if(O!==null&&wc(E)){var $=O.start,te=O.end;if(te===void 0&&(te=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(te,E.value.length);else{var se=E.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),ve=E.textContent.length,De=Math.min(O.start,ve),dt=O.end===void 0?De:Math.min(O.end,ve);!X.extend&&De>dt&&(x=dt,dt=De,De=x);var H=rm(E,De),q=rm(E,dt);if(H&&q&&(X.rangeCount!==1||X.anchorNode!==H.node||X.anchorOffset!==H.offset||X.focusNode!==q.node||X.focusOffset!==q.offset)){var V=se.createRange();V.setStart(H.node,H.offset),X.removeAllRanges(),De>dt?(X.addRange(V),X.extend(q.node,q.offset)):(V.setEnd(q.node,q.offset),X.addRange(V))}}}}for(se=[],X=E;X=X.parentNode;)X.nodeType===1&&se.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<se.length;E++){var ne=se[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Wl=!!Wd,Xd=Wd=null}finally{et=g,ee.p=c,J.T=a}}i.current=o,$t=2}}function xg(){if($t===2){$t=0;var i=Ss,o=Go,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var c=ee.p;ee.p=2;var g=et;et|=4;try{Xp(i,o.alternate,o)}finally{et=g,ee.p=c,J.T=a}}$t=3}}function Tg(){if($t===4||$t===3){$t=0,re();var i=Ss,o=Go,a=ji,c=cg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?$t=5:($t=0,Go=Ss=null,Eg(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(bs=null),oi(a),o=o.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Dn,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=J.T,g=ee.p,ee.p=2,J.T=null;try{for(var v=i.onRecoverableError,x=0;x<c.length;x++){var E=c[x];v(E.value,{componentStack:E.stack})}}finally{J.T=o,ee.p=g}}(ji&3)!==0&&ql(),wi(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Ld?ta++:(ta=0,Ld=i):ta=0,na(0)}}function Eg(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Pr(o)))}function ql(){return wg(),xg(),Tg(),Ag()}function Ag(){if($t!==5)return!1;var i=Ss,o=Od;Od=0;var a=oi(ji),c=J.T,g=ee.p;try{ee.p=32>a?32:a,J.T=null,a=Pd,Pd=null;var v=Ss,x=ji;if($t=0,Go=Ss=null,ji=0,(et&6)!==0)throw Error(s(331));var E=et;if(et|=4,ag(v.current),sg(v,v.current,x,a),et=E,na(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Dn,v)}catch{}return!0}finally{ee.p=g,J.T=c,Eg(i,o)}}function Cg(i,o,a){o=Yn(a,o),o=pd(i.stateNode,o,2),i=ms(i,o,2),i!==null&&(xn(i,2),wi(i))}function ot(i,o,a){if(i.tag===3)Cg(i,i,a);else for(;o!==null;){if(o.tag===3){Cg(o,i,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(bs===null||!bs.has(c))){i=Yn(a,i),a=Np(2),c=ms(o,a,2),c!==null&&(Rp(a,c,o,i),xn(c,2),wi(c));break}}o=o.return}}function Hd(i,o,a){var c=i.pingCache;if(c===null){c=i.pingCache=new xw;var g=new Set;c.set(o,g)}else g=c.get(o),g===void 0&&(g=new Set,c.set(o,g));g.has(a)||(Dd=!0,g.add(a),i=Nw.bind(null,i,o,a),o.then(i,i))}function Nw(i,o,a){var c=i.pingCache;c!==null&&c.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ft===i&&(Fe&a)===a&&(xt===4||xt===3&&(Fe&62914560)===Fe&&300>he()-Dl?(et&2)===0&&Ho(i,0):kd|=a,qo===Fe&&(qo=0)),wi(i)}function Ng(i,o){o===0&&(o=Vt()),i=zs(i,o),i!==null&&(xn(i,o),wi(i))}function Rw(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Ng(i,a)}function Iw(i,o){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),Ng(i,a)}function Mw(i,o){return ht(i,o)}var Gl=null,Bo=null,zd=!1,Hl=!1,Bd=!1,xs=0;function wi(i){i!==Bo&&i.next===null&&(Bo===null?Gl=Bo=i:Bo=Bo.next=i),Hl=!0,zd||(zd=!0,kw())}function na(i,o){if(!Bd&&Hl){Bd=!0;do for(var a=!1,c=Gl;c!==null;){if(i!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var x=c.suspendedLanes,E=c.pingedLanes;v=(1<<31-Bt(42|i)+1)-1,v&=g&~(x&~E),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Dg(c,v))}else v=Fe,v=Dt(c,c===ft?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||en(c,v)||(a=!0,Dg(c,v));c=c.next}while(a);Bd=!1}}function Dw(){Rg()}function Rg(){Hl=zd=!1;var i=0;xs!==0&&Vw()&&(i=xs);for(var o=he(),a=null,c=Gl;c!==null;){var g=c.next,v=Ig(c,o);v===0?(c.next=null,a===null?Gl=g:a.next=g,g===null&&(Bo=a)):(a=c,(i!==0||(v&3)!==0)&&(Hl=!0)),c=g}$t!==0&&$t!==5||na(i),xs!==0&&(xs=0)}function Ig(i,o){for(var a=i.suspendedLanes,c=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var x=31-Bt(v),E=1<<x,O=g[x];O===-1?((E&a)===0||(E&c)!==0)&&(g[x]=un(E,o)):O<=o&&(i.expiredLanes|=E),v&=~E}if(o=ft,a=Fe,a=Dt(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===o&&(st===2||st===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&It(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||en(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(c!==null&&It(c),oi(a)){case 2:case 8:a=Et;break;case 32:a=bt;break;case 268435456:a=Ai;break;default:a=bt}return c=Mg.bind(null,i),a=ht(a,c),i.callbackPriority=o,i.callbackNode=a,o}return c!==null&&c!==null&&It(c),i.callbackPriority=2,i.callbackNode=null,2}function Mg(i,o){if($t!==0&&$t!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ql()&&i.callbackNode!==a)return null;var c=Fe;return c=Dt(i,i===ft?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(fg(i,c,o),Ig(i,he()),i.callbackNode!=null&&i.callbackNode===a?Mg.bind(null,i):null)}function Dg(i,o){if(ql())return null;fg(i,o,!0)}function kw(){jw(function(){(et&6)!==0?ht(Mt,Dw):Rg()})}function Vd(){if(xs===0){var i=Co;i===0&&(i=ts,ts<<=1,(ts&261888)===0&&(ts=256)),xs=i}return xs}function kg(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ya(""+i)}function Ug(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function Uw(i,o,a,c,g){if(o==="submit"&&a&&a.stateNode===g){var v=kg((g[dn]||null).action),x=c.submitter;x&&(o=(o=x[dn]||null)?kg(o.formAction):x.getAttribute("formAction"),o!==null&&(v=o,x=null));var E=new Qa("action","action",null,c,g);i.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(xs!==0){var O=x?Ug(g,x):new FormData(g);ud(a,{pending:!0,data:O,method:g.method,action:v},null,O)}}else typeof v=="function"&&(E.preventDefault(),O=x?Ug(g,x):new FormData(g),ud(a,{pending:!0,data:O,method:g.method,action:v},v,O))},currentTarget:g}]})}}for(var $d=0;$d<Ac.length;$d++){var jd=Ac[$d],Ow=jd.toLowerCase(),Pw=jd[0].toUpperCase()+jd.slice(1);ri(Ow,"on"+Pw)}ri(dm,"onAnimationEnd"),ri(fm,"onAnimationIteration"),ri(hm,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(QS,"onTransitionRun"),ri(ZS,"onTransitionStart"),ri(ew,"onTransitionCancel"),ri(mm,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ia));function Og(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],g=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var x=c.length-1;0<=x;x--){var E=c[x],O=E.instance,$=E.currentTarget;if(E=E.listener,O!==v&&g.isPropagationStopped())break e;v=E,g.currentTarget=$;try{v(g)}catch(te){tl(te)}g.currentTarget=null,v=O}else for(x=0;x<c.length;x++){if(E=c[x],O=E.instance,$=E.currentTarget,E=E.listener,O!==v&&g.isPropagationStopped())break e;v=E,g.currentTarget=$;try{v(g)}catch(te){tl(te)}g.currentTarget=null,v=O}}}}function $e(i,o){var a=o[Os];a===void 0&&(a=o[Os]=new Set);var c=i+"__bubble";a.has(c)||(Pg(o,i,2,!1),a.add(c))}function Fd(i,o,a){var c=0;o&&(c|=4),Pg(a,i,c,o)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Jd(i){if(!i[zl]){i[zl]=!0,Tr.forEach(function(a){a!=="selectionchange"&&(Lw.has(a)||Fd(a,!1,i),Fd(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[zl]||(o[zl]=!0,Fd("selectionchange",!1,o))}}function Pg(i,o,a,c){switch(dy(o)){case 2:var g=dx;break;case 8:g=fx;break;default:g=uf}a=g.bind(null,o,a,i),g=void 0,!hc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),c?g!==void 0?i.addEventListener(o,a,{capture:!0,passive:g}):i.addEventListener(o,a,!0):g!==void 0?i.addEventListener(o,a,{passive:g}):i.addEventListener(o,a,!1)}function Yd(i,o,a,c,g){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var E=c.stateNode.containerInfo;if(E===g)break;if(x===4)for(x=c.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;E!==null;){if(x=ss(E),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){c=v=x;continue e}E=E.parentNode}}c=c.return}zh(function(){var $=v,te=dc(a),se=[];e:{var Y=pm.get(i);if(Y!==void 0){var X=Qa,ve=i;switch(i){case"keypress":if(Wa(a)===0)break e;case"keydown":case"keyup":X=IS;break;case"focusin":ve="focus",X=yc;break;case"focusout":ve="blur",X=yc;break;case"beforeblur":case"afterblur":X=yc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=$h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=vS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=kS;break;case dm:case fm:case hm:X=SS;break;case mm:X=OS;break;case"scroll":case"scrollend":X=gS;break;case"wheel":X=LS;break;case"copy":case"cut":case"paste":X=xS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Fh;break;case"toggle":case"beforetoggle":X=GS}var De=(o&4)!==0,dt=!De&&(i==="scroll"||i==="scrollend"),H=De?Y!==null?Y+"Capture":null:Y;De=[];for(var q=$,V;q!==null;){var ne=q;if(V=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||V===null||H===null||(ne=Er(q,H),ne!=null&&De.push(sa(q,ne,V))),dt)break;q=q.return}0<De.length&&(Y=new X(Y,ve,null,a,te),se.push({event:Y,listeners:De}))}}if((o&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",Y&&a!==cc&&(ve=a.relatedTarget||a.fromElement)&&(ss(ve)||ve[ns]))break e;if((X||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(ve=a.relatedTarget||a.toElement,X=$,ve=ve?ss(ve):null,ve!==null&&(dt=l(ve),De=ve.tag,ve!==dt||De!==5&&De!==27&&De!==6)&&(ve=null)):(X=null,ve=$),X!==ve)){if(De=$h,ne="onMouseLeave",H="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(De=Fh,ne="onPointerLeave",H="onPointerEnter",q="pointer"),dt=X==null?Y:Ls(X),V=ve==null?Y:Ls(ve),Y=new De(ne,q+"leave",X,a,te),Y.target=dt,Y.relatedTarget=V,ne=null,ss(te)===$&&(De=new De(H,q+"enter",ve,a,te),De.target=V,De.relatedTarget=dt,ne=De),dt=ne,X&&ve)t:{for(De=qw,H=X,q=ve,V=0,ne=H;ne;ne=De(ne))V++;ne=0;for(var Re=q;Re;Re=De(Re))ne++;for(;0<V-ne;)H=De(H),V--;for(;0<ne-V;)q=De(q),ne--;for(;V--;){if(H===q||q!==null&&H===q.alternate){De=H;break t}H=De(H),q=De(q)}De=null}else De=null;X!==null&&Lg(se,Y,X,De,!1),ve!==null&&dt!==null&&Lg(se,dt,ve,De,!0)}}e:{if(Y=$?Ls($):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var Xe=em;else if(Qh(Y))if(tm)Xe=KS;else{Xe=JS;var xe=FS}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&uc($.elementType)&&(Xe=em):Xe=YS;if(Xe&&(Xe=Xe(i,$))){Zh(se,Xe,a,te);break e}xe&&xe(i,Y,$),i==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&lc(Y,"number",Y.value)}switch(xe=$?Ls($):window,i){case"focusin":(Qh(xe)||xe.contentEditable==="true")&&(_o=xe,xc=$,kr=null);break;case"focusout":kr=xc=_o=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,um(se,a,te);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":um(se,a,te)}var Be;if(_c)e:{switch(i){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else vo?Wh(i,a)&&(Je="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(Jh&&a.locale!=="ko"&&(vo||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&vo&&(Be=Bh()):(as=te,mc="value"in as?as.value:as.textContent,vo=!0)),xe=Bl($,Je),0<xe.length&&(Je=new jh(Je,i,null,a,te),se.push({event:Je,listeners:xe}),Be?Je.data=Be:(Be=Xh(a),Be!==null&&(Je.data=Be)))),(Be=zS?BS(i,a):VS(i,a))&&(Je=Bl($,"onBeforeInput"),0<Je.length&&(xe=new jh("onBeforeInput","beforeinput",null,a,te),se.push({event:xe,listeners:Je}),xe.data=Be)),Uw(se,i,$,a,te)}Og(se,o)})}function sa(i,o,a){return{instance:i,listener:o,currentTarget:a}}function Bl(i,o){for(var a=o+"Capture",c=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Er(i,a),g!=null&&c.unshift(sa(i,g,v)),g=Er(i,o),g!=null&&c.push(sa(i,g,v))),i.tag===3)return c;i=i.return}return[]}function qw(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Lg(i,o,a,c,g){for(var v=o._reactName,x=[];a!==null&&a!==c;){var E=a,O=E.alternate,$=E.stateNode;if(E=E.tag,O!==null&&O===c)break;E!==5&&E!==26&&E!==27||$===null||(O=$,g?($=Er(a,v),$!=null&&x.unshift(sa(a,$,O))):g||($=Er(a,v),$!=null&&x.push(sa(a,$,O)))),a=a.return}x.length!==0&&i.push({event:o,listeners:x})}var Gw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function qg(i){return(typeof i=="string"?i:""+i).replace(Gw,`
`).replace(Hw,"")}function Gg(i,o){return o=qg(o),qg(i)===o}function ct(i,o,a,c,g,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||po(i,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&po(i,""+c);break;case"className":ce(i,"class",c);break;case"tabIndex":ce(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ce(i,a,c);break;case"style":Gh(i,c,v);break;case"data":if(o!=="object"){ce(i,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ya(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&ct(i,o,"name",g.name,g,null),ct(i,o,"formEncType",g.formEncType,g,null),ct(i,o,"formMethod",g.formMethod,g,null),ct(i,o,"formTarget",g.formTarget,g,null)):(ct(i,o,"encType",g.encType,g,null),ct(i,o,"method",g.method,g,null),ct(i,o,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ya(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Ii);break;case"onScroll":c!=null&&$e("scroll",i);break;case"onScrollEnd":c!=null&&$e("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ya(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":$e("beforetoggle",i),$e("toggle",i),F(i,"popover",c);break;case"xlinkActuate":Se(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Se(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Se(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Se(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Se(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Se(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Se(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Se(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Se(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":F(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mS.get(a)||a,F(i,a,c))}}function Kd(i,o,a,c,g,v){switch(a){case"style":Gh(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?po(i,c):(typeof c=="number"||typeof c=="bigint")&&po(i,""+c);break;case"onScroll":c!=null&&$e("scroll",i);break;case"onScrollEnd":c!=null&&$e("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),v=i[dn]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,c,g);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):F(i,a,c)}}}function on(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",i),$e("load",i);var c=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var x=a[v];if(x!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ct(i,o,v,x,a,null)}}g&&ct(i,o,"srcSet",a.srcSet,a,null),c&&ct(i,o,"src",a.src,a,null);return;case"input":$e("invalid",i);var E=v=x=g=null,O=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":g=te;break;case"type":x=te;break;case"checked":O=te;break;case"defaultChecked":$=te;break;case"value":v=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,o));break;default:ct(i,o,c,te,a,null)}}Oh(i,v,E,O,$,x,g,!1);return;case"select":$e("invalid",i),c=x=v=null;for(g in a)if(a.hasOwnProperty(g)&&(E=a[g],E!=null))switch(g){case"value":v=E;break;case"defaultValue":x=E;break;case"multiple":c=E;default:ct(i,o,g,E,a,null)}o=v,a=x,i.multiple=!!c,o!=null?mo(i,!!c,o,!1):a!=null&&mo(i,!!c,a,!0);return;case"textarea":$e("invalid",i),v=g=c=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":c=E;break;case"defaultValue":g=E;break;case"children":v=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ct(i,o,x,E,a,null)}Lh(i,c,g,v);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(c=a[O],c!=null))switch(O){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(i,o,O,c,a,null)}return;case"dialog":$e("beforetoggle",i),$e("toggle",i),$e("cancel",i),$e("close",i);break;case"iframe":case"object":$e("load",i);break;case"video":case"audio":for(c=0;c<ia.length;c++)$e(ia[c],i);break;case"image":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"embed":case"source":case"link":$e("error",i),$e("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ct(i,o,$,c,a,null)}return;default:if(uc(o)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&Kd(i,o,te,c,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(c=a[E],c!=null&&ct(i,o,E,c,a,null))}function zw(i,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,x=null,E=null,O=null,$=null,te=null;for(X in a){var se=a[X];if(a.hasOwnProperty(X)&&se!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=se;default:c.hasOwnProperty(X)||ct(i,o,X,null,c,se)}}for(var Y in c){var X=c[Y];if(se=a[Y],c.hasOwnProperty(Y)&&(X!=null||se!=null))switch(Y){case"type":v=X;break;case"name":g=X;break;case"checked":$=X;break;case"defaultChecked":te=X;break;case"value":x=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,o));break;default:X!==se&&ct(i,o,Y,X,c,se)}}ac(i,x,E,O,$,te,v,g);return;case"select":X=x=E=Y=null;for(v in a)if(O=a[v],a.hasOwnProperty(v)&&O!=null)switch(v){case"value":break;case"multiple":X=O;default:c.hasOwnProperty(v)||ct(i,o,v,null,c,O)}for(g in c)if(v=c[g],O=a[g],c.hasOwnProperty(g)&&(v!=null||O!=null))switch(g){case"value":Y=v;break;case"defaultValue":E=v;break;case"multiple":x=v;default:v!==O&&ct(i,o,g,v,c,O)}o=E,a=x,c=X,Y!=null?mo(i,!!a,Y,!1):!!c!=!!a&&(o!=null?mo(i,!!a,o,!0):mo(i,!!a,a?[]:"",!1));return;case"textarea":X=Y=null;for(E in a)if(g=a[E],a.hasOwnProperty(E)&&g!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ct(i,o,E,null,c,g)}for(x in c)if(g=c[x],v=a[x],c.hasOwnProperty(x)&&(g!=null||v!=null))switch(x){case"value":Y=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==v&&ct(i,o,x,g,c,v)}Ph(i,Y,X);return;case"option":for(var ve in a)if(Y=a[ve],a.hasOwnProperty(ve)&&Y!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":i.selected=!1;break;default:ct(i,o,ve,null,c,Y)}for(O in c)if(Y=c[O],X=a[O],c.hasOwnProperty(O)&&Y!==X&&(Y!=null||X!=null))switch(O){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ct(i,o,O,Y,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)Y=a[De],a.hasOwnProperty(De)&&Y!=null&&!c.hasOwnProperty(De)&&ct(i,o,De,null,c,Y);for($ in c)if(Y=c[$],X=a[$],c.hasOwnProperty($)&&Y!==X&&(Y!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,o));break;default:ct(i,o,$,Y,c,X)}return;default:if(uc(o)){for(var dt in a)Y=a[dt],a.hasOwnProperty(dt)&&Y!==void 0&&!c.hasOwnProperty(dt)&&Kd(i,o,dt,void 0,c,Y);for(te in c)Y=c[te],X=a[te],!c.hasOwnProperty(te)||Y===X||Y===void 0&&X===void 0||Kd(i,o,te,Y,c,X);return}}for(var H in a)Y=a[H],a.hasOwnProperty(H)&&Y!=null&&!c.hasOwnProperty(H)&&ct(i,o,H,null,c,Y);for(se in c)Y=c[se],X=a[se],!c.hasOwnProperty(se)||Y===X||Y==null&&X==null||ct(i,o,se,Y,c,X)}function Hg(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var g=a[c],v=g.transferSize,x=g.initiatorType,E=g.duration;if(v&&E&&Hg(x)){for(x=0,E=g.responseEnd,c+=1;c<a.length;c++){var O=a[c],$=O.startTime;if($>E)break;var te=O.transferSize,se=O.initiatorType;te&&Hg(se)&&(O=O.responseEnd,x+=te*(O<E?1:(E-$)/(O-$)))}if(--c,o+=8*(v+x)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Wd=null,Xd=null;function Vl(i){return i.nodeType===9?i:i.ownerDocument}function zg(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bg(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Qd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Zd=null;function Vw(){var i=window.event;return i&&i.type==="popstate"?i===Zd?!1:(Zd=i,!0):(Zd=null,!1)}var Vg=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(i){return $g.resolve(null).then(i).catch(Fw)}:Vg;function Fw(i){setTimeout(function(){throw i})}function Ts(i){return i==="head"}function jg(i,o){var a=o,c=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(g),Fo(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")oa(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,oa(a);for(var v=a.firstChild;v;){var x=v.nextSibling,E=v.nodeName;v[is]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=x}}else a==="body"&&oa(i.ownerDocument.body);a=g}while(a);Fo(o)}function Fg(i,o){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function ef(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ef(a),Ps(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Jw(i,o,a,c){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[is])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function Yw(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Zn(i.nextSibling),i===null))return null;return i}function Jg(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Zn(i.nextSibling),i===null))return null;return i}function tf(i){return i.data==="$?"||i.data==="$~"}function nf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Kw(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Zn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var sf=null;function Yg(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Zn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function Kg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function Wg(i,o,a){switch(o=Vl(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function oa(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ps(i)}var ei=new Map,Xg=new Set;function $l(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Fi=ee.d;ee.d={f:Ww,r:Xw,D:Qw,C:Zw,L:ex,m:tx,X:ix,S:nx,M:sx};function Ww(){var i=Fi.f(),o=Ol();return i||o}function Xw(i){var o=os(i);o!==null&&o.tag===5&&o.type==="form"?mp(o):Fi.r(i)}var Vo=typeof document>"u"?null:document;function Qg(i,o,a){var c=Vo;if(c&&typeof o=="string"&&o){var g=Fn(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Xg.has(g)||(Xg.add(g),i={rel:i,crossOrigin:a,href:o},c.querySelector(g)===null&&(o=c.createElement("link"),on(o,"link",i),kt(o),c.head.appendChild(o)))}}function Qw(i){Fi.D(i),Qg("dns-prefetch",i,null)}function Zw(i,o){Fi.C(i,o),Qg("preconnect",i,o)}function ex(i,o,a){Fi.L(i,o,a);var c=Vo;if(c&&i&&o){var g='link[rel="preload"][as="'+Fn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Fn(a.imageSizes)+'"]')):g+='[href="'+Fn(i)+'"]';var v=g;switch(o){case"style":v=$o(i);break;case"script":v=jo(i)}ei.has(v)||(i=b({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),ei.set(v,i),c.querySelector(g)!==null||o==="style"&&c.querySelector(ra(v))||o==="script"&&c.querySelector(aa(v))||(o=c.createElement("link"),on(o,"link",i),kt(o),c.head.appendChild(o)))}}function tx(i,o){Fi.m(i,o);var a=Vo;if(a&&i){var c=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Fn(c)+'"][href="'+Fn(i)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=jo(i)}if(!ei.has(v)&&(i=b({rel:"modulepreload",href:i},o),ei.set(v,i),a.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(aa(v)))return}c=a.createElement("link"),on(c,"link",i),kt(c),a.head.appendChild(c)}}}function nx(i,o,a){Fi.S(i,o,a);var c=Vo;if(c&&i){var g=Ni(c).hoistableStyles,v=$o(i);o=o||"default";var x=g.get(v);if(!x){var E={loading:0,preload:null};if(x=c.querySelector(ra(v)))E.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":o},a),(a=ei.get(v))&&of(i,a);var O=x=c.createElement("link");kt(O),on(O,"link",i),O._p=new Promise(function($,te){O.onload=$,O.onerror=te}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,jl(x,o,c)}x={type:"stylesheet",instance:x,count:1,state:E},g.set(v,x)}}}function ix(i,o){Fi.X(i,o);var a=Vo;if(a&&i){var c=Ni(a).hoistableScripts,g=jo(i),v=c.get(g);v||(v=a.querySelector(aa(g)),v||(i=b({src:i,async:!0},o),(o=ei.get(g))&&rf(i,o),v=a.createElement("script"),kt(v),on(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function sx(i,o){Fi.M(i,o);var a=Vo;if(a&&i){var c=Ni(a).hoistableScripts,g=jo(i),v=c.get(g);v||(v=a.querySelector(aa(g)),v||(i=b({src:i,async:!0,type:"module"},o),(o=ei.get(g))&&rf(i,o),v=a.createElement("script"),kt(v),on(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function Zg(i,o,a,c){var g=(g=Q.current)?$l(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=$o(a.href),a=Ni(g).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=$o(a.href);var v=Ni(g).hoistableStyles,x=v.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,x),(v=g.querySelector(ra(i)))&&!v._p&&(x.instance=v,x.state.loading=5),ei.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ei.set(i,a),v||ox(g,i,a,x.state))),o&&c===null)throw Error(s(528,""));return x}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=jo(a),a=Ni(g).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function $o(i){return'href="'+Fn(i)+'"'}function ra(i){return'link[rel="stylesheet"]['+i+"]"}function ey(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function ox(i,o,a,c){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),on(o,"link",a),kt(o),i.head.appendChild(o))}function jo(i){return'[src="'+Fn(i)+'"]'}function aa(i){return"script[async]"+i}function ty(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=i.querySelector('style[data-href~="'+Fn(a.href)+'"]');if(c)return o.instance=c,kt(c),c;var g=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),kt(c),on(c,"style",g),jl(c,a.precedence,i),o.instance=c;case"stylesheet":g=$o(a.href);var v=i.querySelector(ra(g));if(v)return o.state.loading|=4,o.instance=v,kt(v),v;c=ey(a),(g=ei.get(g))&&of(c,g),v=(i.ownerDocument||i).createElement("link"),kt(v);var x=v;return x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),on(v,"link",c),o.state.loading|=4,jl(v,a.precedence,i),o.instance=v;case"script":return v=jo(a.src),(g=i.querySelector(aa(v)))?(o.instance=g,kt(g),g):(c=a,(g=ei.get(v))&&(c=b({},a),rf(c,g)),i=i.ownerDocument||i,g=i.createElement("script"),kt(g),on(g,"link",c),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,jl(c,a.precedence,i));return o.instance}function jl(i,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,x=0;x<c.length;x++){var E=c[x];if(E.dataset.precedence===o)v=E;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function of(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function rf(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Fl=null;function ny(i,o,a){if(Fl===null){var c=new Map,g=Fl=new Map;g.set(a,c)}else g=Fl,c=g.get(a),c||(c=new Map,g.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var v=a[g];if(!(v[is]||v[Ct]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var x=v.getAttribute(o)||"";x=i+x;var E=c.get(x);E?E.push(v):c.set(x,[v])}}return c}function iy(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function rx(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function sy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function ax(i,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=$o(c.href),v=o.querySelector(ra(g));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Jl.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=v,kt(v);return}v=o.ownerDocument||o,c=ey(c),(g=ei.get(g))&&of(c,g),v=v.createElement("link"),kt(v);var x=v;x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),on(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Jl.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var af=0;function lx(i,o){return i.stylesheets&&i.count===0&&Kl(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Kl(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+o);0<i.imgBytes&&af===0&&(af=62500*Bw());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Kl(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>af?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function Jl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kl(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Yl=null;function Kl(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Yl=new Map,o.forEach(ux,i),Yl=null,Jl.call(i))}function ux(i,o){if(!(o.state.loading&4)){var a=Yl.get(i);if(a)var c=a.get(null);else{a=new Map,Yl.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var x=g[v];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),c=x)}c&&a.set(null,c)}g=o.instance,x=g.getAttribute("data-precedence"),v=a.get(x)||c,v===c&&a.set(null,g),a.set(x,g),this.count++,c=Jl.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var la={$$typeof:I,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function cx(i,o,a,c,g,v,x,E,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.hiddenUpdates=cn(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function oy(i,o,a,c,g,v,x,E,O,$,te,se){return i=new cx(i,o,a,x,O,$,te,se,E),o=1,v===!0&&(o|=24),v=Pn(3,null,null,o),i.current=v,v.stateNode=i,o=Gc(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},Vc(v),i}function ry(i){return i?(i=wo,i):wo}function ay(i,o,a,c,g,v){g=ry(g),c.context===null?c.context=g:c.pendingContext=g,c=hs(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=ms(i,c,o),a!==null&&(In(a,i,o),Hr(a,i,o))}function ly(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function lf(i,o){ly(i,o),(i=i.alternate)&&ly(i,o)}function uy(i){if(i.tag===13||i.tag===31){var o=zs(i,67108864);o!==null&&In(o,i,67108864),lf(i,67108864)}}function cy(i){if(i.tag===13||i.tag===31){var o=zn();o=Yt(o);var a=zs(i,o);a!==null&&In(a,i,o),lf(i,o)}}var Wl=!0;function dx(i,o,a,c){var g=J.T;J.T=null;var v=ee.p;try{ee.p=2,uf(i,o,a,c)}finally{ee.p=v,J.T=g}}function fx(i,o,a,c){var g=J.T;J.T=null;var v=ee.p;try{ee.p=8,uf(i,o,a,c)}finally{ee.p=v,J.T=g}}function uf(i,o,a,c){if(Wl){var g=cf(c);if(g===null)Yd(i,o,c,Xl,a),fy(i,c);else if(mx(g,i,o,a,c))c.stopPropagation();else if(fy(i,c),o&4&&-1<hx.indexOf(i)){for(;g!==null;){var v=os(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var x=nt(v.pendingLanes);if(x!==0){var E=v;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var O=1<<31-Bt(x);E.entanglements[1]|=O,x&=~O}wi(v),(et&6)===0&&(kl=he()+500,na(0))}}break;case 31:case 13:E=zs(v,2),E!==null&&In(E,v,2),Ol(),lf(v,2)}if(v=cf(c),v===null&&Yd(i,o,c,Xl,a),v===g)break;g=v}g!==null&&c.stopPropagation()}else Yd(i,o,c,null,a)}}function cf(i){return i=dc(i),df(i)}var Xl=null;function df(i){if(Xl=null,i=ss(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=u(o),i!==null)return i;i=null}else if(a===31){if(i=d(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Xl=i,null}function dy(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Mt:return 2;case Et:return 8;case bt:case mn:return 32;case Ai:return 268435456;default:return 32}default:return 32}}var ff=!1,Es=null,As=null,Cs=null,ua=new Map,ca=new Map,Ns=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fy(i,o){switch(i){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":ua.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(o.pointerId)}}function da(i,o,a,c,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},o!==null&&(o=os(o),o!==null&&uy(o)),i):(i.eventSystemFlags|=c,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function mx(i,o,a,c,g){switch(o){case"focusin":return Es=da(Es,i,o,a,c,g),!0;case"dragenter":return As=da(As,i,o,a,c,g),!0;case"mouseover":return Cs=da(Cs,i,o,a,c,g),!0;case"pointerover":var v=g.pointerId;return ua.set(v,da(ua.get(v)||null,i,o,a,c,g)),!0;case"gotpointercapture":return v=g.pointerId,ca.set(v,da(ca.get(v)||null,i,o,a,c,g)),!0}return!1}function hy(i){var o=ss(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){i.blockedOn=o,yi(i.priority,function(){cy(a)});return}}else if(o===31){if(o=d(a),o!==null){i.blockedOn=o,yi(i.priority,function(){cy(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ql(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=cf(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);cc=c,a.target.dispatchEvent(c),cc=null}else return o=os(a),o!==null&&uy(o),i.blockedOn=a,!1;o.shift()}return!0}function my(i,o,a){Ql(i)&&a.delete(o)}function px(){ff=!1,Es!==null&&Ql(Es)&&(Es=null),As!==null&&Ql(As)&&(As=null),Cs!==null&&Ql(Cs)&&(Cs=null),ua.forEach(my),ca.forEach(my)}function Zl(i,o){i.blockedOn===o&&(i.blockedOn=null,ff||(ff=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,px)))}var eu=null;function py(i){eu!==i&&(eu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){eu===i&&(eu=null);for(var o=0;o<i.length;o+=3){var a=i[o],c=i[o+1],g=i[o+2];if(typeof c!="function"){if(df(c||a)===null)continue;break}var v=os(a);v!==null&&(i.splice(o,3),o-=3,ud(v,{pending:!0,data:g,method:a.method,action:c},c,g))}}))}function Fo(i){function o(O){return Zl(O,i)}Es!==null&&Zl(Es,i),As!==null&&Zl(As,i),Cs!==null&&Zl(Cs,i),ua.forEach(o),ca.forEach(o);for(var a=0;a<Ns.length;a++){var c=Ns[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Ns.length&&(a=Ns[0],a.blockedOn===null);)hy(a),a.blockedOn===null&&Ns.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var g=a[c],v=a[c+1],x=g[dn]||null;if(typeof v=="function")x||py(a);else if(x){var E=null;if(v&&v.hasAttribute("formAction")){if(g=v,x=v[dn]||null)E=x.formAction;else if(df(g)!==null)continue}else E=x.action;typeof E=="function"?a[c+1]=E:(a.splice(c,3),c-=3),py(a)}}}function gy(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function hf(i){this._internalRoot=i}tu.prototype.render=hf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,c=zn();ay(a,c,i,o,null,null)},tu.prototype.unmount=hf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ay(i.current,2,null,i,null,null),Ol(),o[ns]=null}};function tu(i){this._internalRoot=i}tu.prototype.unstable_scheduleHydration=function(i){if(i){var o=Un();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Ns.length&&o!==0&&o<Ns[a].priority;a++);Ns.splice(a,0,i),a===0&&hy(i)}};var yy=e.version;if(yy!=="19.2.4")throw Error(s(527,yy,"19.2.4"));ee.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(o),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var gx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{Dn=nu.inject(gx),Jt=nu}catch{}}return ha.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,c="",g=Tp,v=Ep,x=Ap;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=oy(i,1,!1,null,null,a,c,null,g,v,x,gy),i[ns]=o.current,Jd(i),new hf(o)},ha.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var c=!1,g="",v=Tp,x=Ep,E=Ap,O=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),o=oy(i,1,!0,o,a??null,c,g,O,v,x,E,gy),o.context=ry(null),a=o.current,c=zn(),c=Yt(c),g=hs(c),g.callback=null,ms(a,g,c),a=c,o.current.lanes=a,xn(o,a),wi(o),i[ns]=o.current,Jd(i),new tu(o)},ha.version="19.2.4",ha}var Cy;function Ex(){if(Cy)return gf.exports;Cy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gf.exports=Tx(),gf.exports}var Ax=Ex();const Cx=o_(Ax),Nx="modulepreload",Rx=function(t){return"/"+t},Ny={},Ix=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=u(n.map(h=>{if(h=Rx(h),h in Ny)return;Ny[h]=!0;const y=h.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":Nx,y||(_.as="script"),_.crossOrigin="",_.href=h,m&&_.setAttribute("nonce",m),document.head.appendChild(_),y)return new Promise((w,T)=>{_.addEventListener("load",w),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return r.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=t=>{const e=Dx(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:u,...d},m)=>M.createElement("svg",{ref:m,...kx,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:a_("lucide",r),...!l&&!Ux(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,y])=>M.createElement(h,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(t,e)=>{const n=M.forwardRef(({className:s,...r},l)=>M.createElement(Ox,{ref:l,iconNode:e,className:a_(`lucide-${Mx(Ry(t))}`,`lucide-${t}`,s),...r}));return n.displayName=Ry(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lx=tt("arrow-right",Px);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],l_=tt("book-open",qx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],u_=tt("calendar",Gx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fh=tt("check",Hx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bx=tt("chevron-left",zx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qa=tt("chevron-right",Vx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jx=tt("circle-check",$x);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jx=tt("circle",Fx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Iy=tt("clock",Yx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],fr=tt("ellipsis-vertical",Kx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xx=tt("file-text",Wx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Zx=tt("flask-conical",Qx);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],tT=tt("github",eT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],iT=tt("hash",nT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oT=tt("loader-circle",sT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],aT=tt("lock",rT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],uT=tt("log-out",lT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dT=tt("mail",cT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],hT=tt("message-circle",fT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],c_=tt("message-square",mT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wu=tt("pen-line",pT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uo=tt("plus",gT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vT=tt("send",yT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],bT=tt("settings-2",_T);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ei=tt("sparkles",ST);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xT=tt("square-check-big",wT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],ET=tt("text-align-start",TT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Yi=tt("trash-2",AT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],d_=tt("user",CT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hu=tt("x",NT),f_=6048e5,RT=864e5,h_=6e4,m_=36e5,My=Symbol.for("constructDateFrom");function _n(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&My in t?t[My](e):t instanceof Date?new t.constructor(e):new Date(e)}function Xt(t,e){return _n(e||t,t)}function p_(t,e,n){const s=Xt(t,n==null?void 0:n.in);return isNaN(e)?_n(t,NaN):(e&&s.setDate(s.getDate()+e),s)}function g_(t,e,n){const s=Xt(t,n==null?void 0:n.in);if(isNaN(e))return _n(t,NaN);if(!e)return s;const r=s.getDate(),l=_n(t,s.getTime());l.setMonth(s.getMonth()+e+1,0);const u=l.getDate();return r>=u?l:(s.setFullYear(l.getFullYear(),l.getMonth(),r),s)}let IT={};function Ga(){return IT}function hr(t,e){var d,m,h,y;const n=Ga(),s=(e==null?void 0:e.weekStartsOn)??((m=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((y=(h=n.locale)==null?void 0:h.options)==null?void 0:y.weekStartsOn)??0,r=Xt(t,e==null?void 0:e.in),l=r.getDay(),u=(l<s?7:0)+l-s;return r.setDate(r.getDate()-u),r.setHours(0,0,0,0),r}function xu(t,e){return hr(t,{...e,weekStartsOn:1})}function y_(t,e){const n=Xt(t,e==null?void 0:e.in),s=n.getFullYear(),r=_n(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const l=xu(r),u=_n(n,0);u.setFullYear(s,0,4),u.setHours(0,0,0,0);const d=xu(u);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function Dy(t){const e=Xt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function zu(t,...e){const n=_n.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function Tu(t,e){const n=Xt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function MT(t,e,n){const[s,r]=zu(n==null?void 0:n.in,t,e),l=Tu(s),u=Tu(r),d=+l-Dy(l),m=+u-Dy(u);return Math.round((d-m)/RT)}function DT(t,e){const n=y_(t,e),s=_n(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),xu(s)}function v_(t){return _n(t,Date.now())}function Aa(t,e,n){const[s,r]=zu(n==null?void 0:n.in,t,e);return+Tu(s)==+Tu(r)}function kT(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function hh(t){return!(!kT(t)&&typeof t!="number"||isNaN(+Xt(t)))}function UT(t,e){const n=Xt(t,e==null?void 0:e.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function OT(t,e){const[n,s]=zu(t,e.start,e.end);return{start:n,end:s}}function PT(t,e){const{start:n,end:s}=OT(e==null?void 0:e.in,t);let r=+n>+s;const l=r?+n:+s,u=r?s:n;u.setHours(0,0,0,0);let d=1;const m=[];for(;+u<=l;)m.push(_n(n,u)),u.setDate(u.getDate()+d),u.setHours(0,0,0,0);return r?m.reverse():m}function LT(t,e){const n=Xt(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function qT(t,e){const n=Xt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function GT(t,e){var d,m;const n=Ga(),s=n.weekStartsOn??((m=(d=n.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,r=Xt(t,e==null?void 0:e.in),l=r.getDay(),u=(l<s?-7:0)+6-(l-s);return r.setDate(r.getDate()+u),r.setHours(23,59,59,999),r}const HT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zT=(t,e,n)=>{let s;const r=HT[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function ar(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const BT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$T={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jT={date:ar({formats:BT,defaultWidth:"full"}),time:ar({formats:VT,defaultWidth:"full"}),dateTime:ar({formats:$T,defaultWidth:"full"})},FT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JT=(t,e,n,s)=>FT[t];function xi(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):u;r=t.formattingValues[d]||t.formattingValues[u]}else{const u=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[d]||t.values[u]}const l=t.argumentCallback?t.argumentCallback(e):e;return r[l]}}const YT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eE=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tE={ordinalNumber:eE,era:xi({values:YT,defaultWidth:"wide"}),quarter:xi({values:KT,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xi({values:WT,defaultWidth:"wide"}),day:xi({values:XT,defaultWidth:"wide"}),dayPeriod:xi({values:QT,defaultWidth:"wide",formattingValues:ZT,defaultFormattingWidth:"wide"})};function Ti(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],l=e.match(r);if(!l)return null;const u=l[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(d)?iE(d,b=>b.test(u)):nE(d,b=>b.test(u));let h;h=t.valueCallback?t.valueCallback(m):m,h=n.valueCallback?n.valueCallback(h):h;const y=e.slice(u.length);return{value:h,rest:y}}}function nE(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function iE(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function __(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],l=e.match(t.parsePattern);if(!l)return null;let u=t.valueCallback?t.valueCallback(l[0]):l[0];u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(r.length);return{value:u,rest:d}}}const sE=/^(\d+)(th|st|nd|rd)?/i,oE=/\d+/i,rE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aE={any:[/^b/i,/^(a|c)/i]},lE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uE={any:[/1/i,/2/i,/3/i,/4/i]},cE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gE={ordinalNumber:__({matchPattern:sE,parsePattern:oE,valueCallback:t=>parseInt(t,10)}),era:Ti({matchPatterns:rE,defaultMatchWidth:"wide",parsePatterns:aE,defaultParseWidth:"any"}),quarter:Ti({matchPatterns:lE,defaultMatchWidth:"wide",parsePatterns:uE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ti({matchPatterns:cE,defaultMatchWidth:"wide",parsePatterns:dE,defaultParseWidth:"any"}),day:Ti({matchPatterns:fE,defaultMatchWidth:"wide",parsePatterns:hE,defaultParseWidth:"any"}),dayPeriod:Ti({matchPatterns:mE,defaultMatchWidth:"any",parsePatterns:pE,defaultParseWidth:"any"})},yE={code:"en-US",formatDistance:zT,formatLong:jT,formatRelative:JT,localize:tE,match:gE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vE(t,e){const n=Xt(t,e==null?void 0:e.in);return MT(n,qT(n))+1}function _E(t,e){const n=Xt(t,e==null?void 0:e.in),s=+xu(n)-+DT(n);return Math.round(s/f_)+1}function b_(t,e){var y,b,_,w;const n=Xt(t,e==null?void 0:e.in),s=n.getFullYear(),r=Ga(),l=(e==null?void 0:e.firstWeekContainsDate)??((b=(y=e==null?void 0:e.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(_=r.locale)==null?void 0:_.options)==null?void 0:w.firstWeekContainsDate)??1,u=_n((e==null?void 0:e.in)||t,0);u.setFullYear(s+1,0,l),u.setHours(0,0,0,0);const d=hr(u,e),m=_n((e==null?void 0:e.in)||t,0);m.setFullYear(s,0,l),m.setHours(0,0,0,0);const h=hr(m,e);return+n>=+d?s+1:+n>=+h?s:s-1}function bE(t,e){var d,m,h,y;const n=Ga(),s=(e==null?void 0:e.firstWeekContainsDate)??((m=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((y=(h=n.locale)==null?void 0:h.options)==null?void 0:y.firstWeekContainsDate)??1,r=b_(t,e),l=_n((e==null?void 0:e.in)||t,0);return l.setFullYear(r,0,s),l.setHours(0,0,0,0),hr(l,e)}function SE(t,e){const n=Xt(t,e==null?void 0:e.in),s=+hr(n,e)-+bE(n,e);return Math.round(s/f_)+1}function rt(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const Is={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return rt(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):rt(n+1,2)},d(t,e){return rt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return rt(t.getHours()%12||12,e.length)},H(t,e){return rt(t.getHours(),e.length)},m(t,e){return rt(t.getMinutes(),e.length)},s(t,e){return rt(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return rt(r,e.length)}},Jo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ky={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return Is.y(t,e)},Y:function(t,e,n,s){const r=b_(t,s),l=r>0?r:1-r;if(e==="YY"){const u=l%100;return rt(u,2)}return e==="Yo"?n.ordinalNumber(l,{unit:"year"}):rt(l,e.length)},R:function(t,e){const n=y_(t);return rt(n,e.length)},u:function(t,e){const n=t.getFullYear();return rt(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return rt(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return rt(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return Is.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return rt(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=SE(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):rt(r,e.length)},I:function(t,e,n){const s=_E(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):rt(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Is.d(t,e)},D:function(t,e,n){const s=vE(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):rt(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),l=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return rt(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),l=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return rt(l,e.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return rt(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Jo.noon:s===0?r=Jo.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Jo.evening:s>=12?r=Jo.afternoon:s>=4?r=Jo.morning:r=Jo.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Is.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Is.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):rt(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):rt(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Is.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Is.s(t,e)},S:function(t,e){return Is.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Oy(s);case"XXXX":case"XX":return no(s);case"XXXXX":case"XXX":default:return no(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return Oy(s);case"xxxx":case"xx":return no(s);case"xxxxx":case"xxx":default:return no(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Uy(s,":");case"OOOO":default:return"GMT"+no(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Uy(s,":");case"zzzz":default:return"GMT"+no(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return rt(s,e.length)},T:function(t,e,n){return rt(+t,e.length)}};function Uy(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),l=s%60;return l===0?n+String(r):n+String(r)+e+rt(l,2)}function Oy(t,e){return t%60===0?(t>0?"-":"+")+rt(Math.abs(t)/60,2):no(t,e)}function no(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=rt(Math.trunc(s/60),2),l=rt(s%60,2);return n+r+e+l}const Py=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},S_=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wE=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return Py(t,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",Py(s,e)).replace("{{time}}",S_(r,e))},xE={p:S_,P:wE},TE=/^D+$/,EE=/^Y+$/,AE=["D","DD","YY","YYYY"];function CE(t){return TE.test(t)}function NE(t){return EE.test(t)}function RE(t,e,n){const s=IE(t,e,n);if(console.warn(s),AE.includes(t))throw new RangeError(s)}function IE(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ME=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kE=/^'([^]*?)'?$/,UE=/''/g,OE=/[a-zA-Z]/;function Vn(t,e,n){var y,b,_,w,T,A,C,D;const s=Ga(),r=(n==null?void 0:n.locale)??s.locale??yE,l=(n==null?void 0:n.firstWeekContainsDate)??((b=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)??s.firstWeekContainsDate??((w=(_=s.locale)==null?void 0:_.options)==null?void 0:w.firstWeekContainsDate)??1,u=(n==null?void 0:n.weekStartsOn)??((A=(T=n==null?void 0:n.locale)==null?void 0:T.options)==null?void 0:A.weekStartsOn)??s.weekStartsOn??((D=(C=s.locale)==null?void 0:C.options)==null?void 0:D.weekStartsOn)??0,d=Xt(t,n==null?void 0:n.in);if(!hh(d))throw new RangeError("Invalid time value");let m=e.match(DE).map(N=>{const I=N[0];if(I==="p"||I==="P"){const U=xE[I];return U(N,r.formatLong)}return N}).join("").match(ME).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const I=N[0];if(I==="'")return{isToken:!1,value:PE(N)};if(ky[I])return{isToken:!0,value:N};if(I.match(OE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:N}});r.localize.preprocessor&&(m=r.localize.preprocessor(d,m));const h={firstWeekContainsDate:l,weekStartsOn:u,locale:r};return m.map(N=>{if(!N.isToken)return N.value;const I=N.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&NE(I)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&CE(I))&&RE(I,e,String(t));const U=ky[I[0]];return U(d,I,r.localize,h)}).join("")}function PE(t){const e=t.match(kE);return e?e[1].replace(UE,"'"):t}function LE(t,e,n){const[s,r]=zu(n==null?void 0:n.in,t,e);return s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()}function w_(t,e){return Aa(_n(t,t),v_(t))}function qE(t,e){return Aa(t,p_(v_(t),1),e)}function Ki(t,e){const n=()=>_n(e==null?void 0:e.in,NaN),r=BE(t);let l;if(r.date){const h=VE(r.date,2);l=$E(h.restDateString,h.year)}if(!l||isNaN(+l))return n();const u=+l;let d=0,m;if(r.time&&(d=jE(r.time),isNaN(d)))return n();if(r.timezone){if(m=FE(r.timezone),isNaN(m))return n()}else{const h=new Date(u+d),y=Xt(0,e==null?void 0:e.in);return y.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),y.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),y}return Xt(u+d+m,e==null?void 0:e.in)}const iu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},GE=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,HE=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,zE=/^([+-])(\d{2})(?::?(\d{2}))?$/;function BE(t){const e={},n=t.split(iu.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],iu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(iu.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=iu.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function VE(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,l=s[2]?parseInt(s[2]):null;return{year:l===null?r:l*100,restDateString:t.slice((s[1]||s[2]).length)}}function $E(t,e){if(e===null)return new Date(NaN);const n=t.match(GE);if(!n)return new Date(NaN);const s=!!n[4],r=ma(n[1]),l=ma(n[2])-1,u=ma(n[3]),d=ma(n[4]),m=ma(n[5])-1;if(s)return XE(e,d,m)?JE(e,d,m):new Date(NaN);{const h=new Date(0);return!KE(e,l,u)||!WE(e,r)?new Date(NaN):(h.setUTCFullYear(e,l,Math.max(r,u)),h)}}function ma(t){return t?parseInt(t):1}function jE(t){const e=t.match(HE);if(!e)return NaN;const n=bf(e[1]),s=bf(e[2]),r=bf(e[3]);return QE(n,s,r)?n*m_+s*h_+r*1e3:NaN}function bf(t){return t&&parseFloat(t.replace(",","."))||0}function FE(t){if(t==="Z")return 0;const e=t.match(zE);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return ZE(s,r)?n*(s*m_+r*h_):NaN}function JE(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,l=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+l),s}const YE=[31,null,31,30,31,30,31,31,30,31,30,31];function x_(t){return t%400===0||t%4===0&&t%100!==0}function KE(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(YE[e]||(x_(t)?29:28))}function WE(t,e){return e>=1&&e<=(x_(t)?366:365)}function XE(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function QE(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ZE(t,e){return e>=0&&e<=59}function eA(t,e,n){return g_(t,-1,n)}function Bu(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function tA(t,e,n,s){function r(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(y){try{h(s.next(y))}catch(b){u(b)}}function m(y){try{h(s.throw(y))}catch(b){u(b)}}function h(y){y.done?l(y.value):r(y.value).then(d,m)}h((s=s.apply(t,e||[])).next())})}const nA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class mh extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class iA extends mh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ly extends mh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qy extends mh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Pf||(Pf={}));class sA{constructor(e,{headers:n={},customFetch:s,region:r=Pf.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=nA(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return tA(this,arguments,void 0,function*(n,s={}){var r;let l,u;try{const{headers:d,method:m,body:h,signal:y,timeout:b}=s;let _={},{region:w}=s;w||(w=this.region);const T=new URL(`${this.url}/${n}`);w&&w!=="any"&&(_["x-region"]=w,T.searchParams.set("forceFunctionRegion",w));let A;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",A=h):typeof h=="string"?(_["Content-Type"]="text/plain",A=h):typeof FormData<"u"&&h instanceof FormData?A=h:(_["Content-Type"]="application/json",A=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?A=JSON.stringify(h):A=h;let C=y;b&&(u=new AbortController,l=setTimeout(()=>u.abort(),b),y?(C=u.signal,y.addEventListener("abort",()=>u.abort())):C=u.signal);const D=yield this.fetch(T.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),d),body:A,signal:C}).catch(L=>{throw new iA(L)}),N=D.headers.get("x-relay-error");if(N&&N==="true")throw new Ly(D);if(!D.ok)throw new qy(D);let I=((r=D.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),U;return I==="application/json"?U=yield D.json():I==="application/octet-stream"||I==="application/pdf"?U=yield D.blob():I==="text/event-stream"?U=D:I==="multipart/form-data"?U=yield D.formData():U=yield D.text(),{data:U,error:null,response:D}}catch(d){return{data:null,error:d,response:d instanceof qy||d instanceof Ly?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var oA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},rA=class{constructor(t){var e,n,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(s=t.urlLengthLimit)!==null&&s!==void 0?s:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,d=null,m=null,h=l.status,y=l.statusText;if(l.ok){var b,_;if(n.method!=="HEAD"){var w;const D=await l.text();D===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((w=n.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?d=D:d=JSON.parse(D))}const A=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),C=(_=l.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");A&&C&&C.length>1&&(m=parseInt(C[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,h=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var T;const A=await l.text();try{u=JSON.parse(A),Array.isArray(u)&&l.status===404&&(d=[],u=null,h=200,y="OK")}catch{l.status===404&&A===""?(h=204,y="No Content"):u={message:A}}if(u&&n.isMaybeSingle&&(!(u==null||(T=u.details)===null||T===void 0)&&T.includes("0 rows"))&&(u=null,h=200,y="OK"),u&&n.shouldThrowOnError)throw new oA(u)}return{error:u,data:d,count:m,status:h,statusText:y}});return this.shouldThrowOnError||(r=r.catch(l=>{var u;let d="",m="",h="";const y=l==null?void 0:l.cause;if(y){var b,_,w,T;const D=(b=y==null?void 0:y.message)!==null&&b!==void 0?b:"",N=(_=y==null?void 0:y.code)!==null&&_!==void 0?_:"";d=`${(w=l==null?void 0:l.name)!==null&&w!==void 0?w:"FetchError"}: ${l==null?void 0:l.message}`,d+=`

Caused by: ${(T=y==null?void 0:y.name)!==null&&T!==void 0?T:"Error"}: ${D}`,N&&(d+=` (${N})`),y!=null&&y.stack&&(d+=`
${y.stack}`)}else{var A;d=(A=l==null?void 0:l.stack)!==null&&A!==void 0?A:""}const C=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(h="",m="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",m="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(m+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:d,hint:m,code:h},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}},aA=class extends rA{select(t){let e=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const l=r?`${r}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:s=n}={}){const r=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:l="text"}={}){var u;const d=[t?"analyze":null,e?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${m}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Gy=new RegExp("[,()]");var er=class extends aA{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Gy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Gy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:s}={}){let r="";s==="plain"?r="pl":s==="phrase"?r="ph":s==="websearch"&&(r="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${r}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},lA=class{constructor(t,{headers:e={},schema:n,fetch:s,urlLengthLimit:r=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=s,this.urlLengthLimit=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:s}=e??{},r=n?"HEAD":"GET";let l=!1;const u=(t??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join(""),{url:d,headers:m}=this.cloneRequestState();return d.searchParams.set("select",u),s&&m.append("Prefer",`count=${s}`),new er({method:r,url:d,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;const r="POST",{url:l,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),n||u.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((m,h)=>m.concat(Object.keys(h)),[]);if(d.length>0){const m=[...new Set(d)].map(h=>`"${h}"`);l.searchParams.set("columns",m.join(","))}}return new er({method:r,url:l,headers:u,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){var l;const u="POST",{url:d,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&d.searchParams.set("on_conflict",e),s&&m.append("Prefer",`count=${s}`),r||m.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(h.length>0){const y=[...new Set(h)].map(b=>`"${b}"`);d.searchParams.set("columns",y.join(","))}}return new er({method:u,url:d,headers:m,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const s="PATCH",{url:r,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new er({method:s,url:r,headers:l,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:s,headers:r}=this.cloneRequestState();return t&&r.append("Prefer",`count=${t}`),new er({method:n,url:s,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ca(t){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function uA(t,e){if(Ca(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Ca(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cA(t){var e=uA(t,"string");return Ca(e)=="symbol"?e:e+""}function dA(t,e,n){return(e=cA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function su(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hy(Object(n),!0).forEach(function(s){dA(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var fA=class T_{constructor(e,{headers:n={},schema:s,fetch:r,timeout:l,urlLengthLimit:u=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.urlLengthLimit=u;const d=r??globalThis.fetch;l!==void 0&&l>0?this.fetch=(m,h)=>{const y=new AbortController,b=setTimeout(()=>y.abort(),l),_=h==null?void 0:h.signal;if(_){if(_.aborted)return clearTimeout(b),d(m,h);const w=()=>{clearTimeout(b),y.abort()};return _.addEventListener("abort",w,{once:!0}),d(m,su(su({},h),{},{signal:y.signal})).finally(()=>{clearTimeout(b),_.removeEventListener("abort",w)})}return d(m,su(su({},h),{},{signal:y.signal})).finally(()=>clearTimeout(b))}:this.fetch=d}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new lA(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new T_(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:s=!1,get:r=!1,count:l}={}){var u;let d;const m=new URL(`${this.url}/rpc/${e}`);let h;const y=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(y)),b=s&&Object.values(n).some(y);b?(d="POST",h=n):s||r?(d=s?"HEAD":"GET",Object.entries(n).filter(([w,T])=>T!==void 0).map(([w,T])=>[w,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([w,T])=>{m.searchParams.append(w,T)})):(d="POST",h=n);const _=new Headers(this.headers);return b?_.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&_.set("Prefer",`count=${l}`),new er({method:d,url:m,headers:_,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class hA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const s=n.versions;if(s&&s.node){const r=s.node,l=parseInt(r.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mA="2.95.3",pA=`realtime-js/${mA}`,gA="1.0.0",E_="2.0.0",zy=E_,Lf=1e4,yA=1e3,vA=100;var Ms;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ms||(Ms={}));var jt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(jt||(jt={}));var di;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(di||(di={}));var qf;(function(t){t.websocket="websocket"})(qf||(qf={}));var oo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(oo||(oo={}));class _A{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,s){var r,l;const u=e.topic,d=(r=e.ref)!==null&&r!==void 0?r:"",m=(l=e.join_ref)!==null&&l!==void 0?l:"",h=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+d.length+u.length+h.length+b.length,w=new ArrayBuffer(this.HEADER_LENGTH+_);let T=new DataView(w),A=0;T.setUint8(A++,this.KINDS.userBroadcastPush),T.setUint8(A++,m.length),T.setUint8(A++,d.length),T.setUint8(A++,u.length),T.setUint8(A++,h.length),T.setUint8(A++,b.length),T.setUint8(A++,n),Array.from(m,D=>T.setUint8(A++,D.charCodeAt(0))),Array.from(d,D=>T.setUint8(A++,D.charCodeAt(0))),Array.from(u,D=>T.setUint8(A++,D.charCodeAt(0))),Array.from(h,D=>T.setUint8(A++,D.charCodeAt(0))),Array.from(b,D=>T.setUint8(A++,D.charCodeAt(0)));var C=new Uint8Array(w.byteLength+s.byteLength);return C.set(new Uint8Array(w),0),C.set(new Uint8Array(s),w.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,l,u,d,m]=s;return n({join_ref:r,ref:l,topic:u,event:d,payload:m})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,s){const r=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),d=n.getUint8(4);let m=this.HEADER_LENGTH+4;const h=s.decode(e.slice(m,m+r));m=m+r;const y=s.decode(e.slice(m,m+l));m=m+l;const b=s.decode(e.slice(m,m+u));m=m+u;const _=e.slice(m,e.byteLength),w=d===this.JSON_ENCODING?JSON.parse(s.decode(_)):_,T={type:this.BROADCAST_EVENT,event:y,payload:w};return u>0&&(T.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class A_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(mt||(mt={}));const By=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=bA(u,t,e,r),l),{}):{}},bA=(t,e,n,s)=>{const r=e.find(d=>d.name===t),l=r==null?void 0:r.type,u=n[t];return l&&!s.includes(l)?C_(l,u):Gf(u)},C_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return TA(e,n)}switch(t){case mt.bool:return SA(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return wA(e);case mt.json:case mt.jsonb:return xA(e);case mt.timestamp:return EA(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return Gf(e);default:return Gf(e)}},Gf=t=>t,SA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},xA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},TA=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>C_(e,d))}return t},EA=t=>typeof t=="string"?t.replace(" ","T"):t,N_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Sf{constructor(e,n,s={},r=Lf){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Vy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Vy||(Vy={}));class Sa{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sa.syncState(this.state,r,l,u),this.pendingDiffs.forEach(m=>{this.state=Sa.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Sa.syncDiff(this.state,r,l,u),d())}),this.onJoin((r,l,u)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:u})}),this.onLeave((r,l,u)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const l=this.cloneDeep(e),u=this.transformState(n),d={},m={};return this.map(l,(h,y)=>{u[h]||(m[h]=y)}),this.map(u,(h,y)=>{const b=l[h];if(b){const _=y.map(C=>C.presence_ref),w=b.map(C=>C.presence_ref),T=y.filter(C=>w.indexOf(C.presence_ref)<0),A=b.filter(C=>_.indexOf(C.presence_ref)<0);T.length>0&&(d[h]=T),A.length>0&&(m[h]=A)}else d[h]=y}),this.syncDiff(l,{joins:d,leaves:m},s,r)}static syncDiff(e,n,s,r){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(d,m)=>{var h;const y=(h=e[d])!==null&&h!==void 0?h:[];if(e[d]=this.cloneDeep(m),y.length>0){const b=e[d].map(w=>w.presence_ref),_=y.filter(w=>b.indexOf(w.presence_ref)<0);e[d].unshift(..._)}s(d,y,m)}),this.map(u,(d,m)=>{let h=e[d];if(!h)return;const y=m.map(b=>b.presence_ref);h=h.filter(b=>y.indexOf(b.presence_ref)<0),e[d]=h,r(d,h,m),h.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $y;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($y||($y={}));var wa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wa||(wa={}));var Ji;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ji||(Ji={}));class sr{constructor(e,n={config:{}},s){var r,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sf(this,di.join,this.params,this.timeout),this.rejoinTimer=new A_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(di.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Sa(this),this.broadcastEndpointURL=N_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:u,presence:d,private:m}}=this.params,h=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&r!==void 0?r:[],y=!!this.bindings[wa.PRESENCE]&&this.bindings[wa.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},_={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:h,private:m};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Ji.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Ji.CLOSED)),this.updateJoinPayload(Object.assign({config:_},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var T;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(Ji.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(T=A==null?void 0:A.length)!==null&&T!==void 0?T:0,D=[];for(let N=0;N<C;N++){const I=A[N],{filter:{event:U,schema:L,table:B,filter:z}}=I,Z=w&&w[N];if(Z&&Z.event===U&&sr.isFilterValueEqual(Z.schema,L)&&sr.isFilterValueEqual(Z.table,B)&&sr.isFilterValueEqual(Z.filter,z))D.push(Object.assign(Object.assign({},I),{id:Z.id}));else{this.unsubscribe(),this.state=jt.errored,e==null||e(Ji.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(Ji.SUBSCRIBED);return}}).receive("error",w=>{this.state=jt.errored,e==null||e(Ji.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ji.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===jt.joined&&e===wa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const h=await d.json();m=h.error||h.message||m}catch{}return Promise.reject(new Error(m))}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=h.body)===null||r===void 0?void 0:r.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,m;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(di.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Sf(this,di.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(l),u}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Sf(this,e,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>vA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,l;const u=e.toLocaleLowerCase(),{close:d,error:m,leave:h,join:y}=di;if(s&&[d,m,h,y].indexOf(u)>=0&&s!==this._joinRef())return;let _=this._onMessage(u,n,s);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(w=>{var T,A,C;return((T=w.filter)===null||T===void 0?void 0:T.event)==="*"||((C=(A=w.filter)===null||A===void 0?void 0:A.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(w=>w.callback(_,s)):(l=this.bindings[u])===null||l===void 0||l.filter(w=>{var T,A,C,D,N,I;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const U=w.id,L=(T=w.filter)===null||T===void 0?void 0:T.event;return U&&((A=n.ids)===null||A===void 0?void 0:A.includes(U))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const U=(N=(D=w==null?void 0:w.filter)===null||D===void 0?void 0:D.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return U==="*"||U===((I=n==null?void 0:n.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof _=="object"&&"ids"in _){const T=_.data,{schema:A,table:C,commit_timestamp:D,type:N,errors:I}=T;_=Object.assign(Object.assign({},{schema:A,table:C,commit_timestamp:D,eventType:N,new:{},old:{},errors:I}),this._getPayloadRecords(T))}w.callback(_,s)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),l={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&sr.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(di.close,{},e)}_onError(e){this._on(di.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=By(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=By(e.columns,e.old_record)),n}}const wf=()=>{},ou={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AA=[1e3,2e3,5e3,1e4],CA=1e4,NA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RA{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lf,this.transport=null,this.heartbeatIntervalMs=ou.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wf,this.ref=0,this.reconnectTimer=null,this.vsn=zy,this.logger=wf,this.conn=null,this.sendBuffer=[],this.serializer=new _A,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...l)=>r(...l):(...l)=>fetch(...l),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qf.websocket}`,this.httpEndpoint=N_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return oo.Connecting;case Ms.open:return oo.Open;case Ms.closing:return oo.Closing;default:return oo.Closed}}isConnected(){return this.connectionState()===oo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new sr(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:r,ref:l}=e,u=()=>{this.encode(e,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${n} ${s} (${l})`,r),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ou.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:r,payload:l,ref:u}=n,d=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${r} ${d}`.trim(),l),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(r,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ms.open||this.conn.readyState===Ms.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(di.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([NA],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:pA};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(di.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new A_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ou.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,r,l,u,d,m,h,y,b,_,w;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Lf,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:ou.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:wf,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:zy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(T=>AA[T-1]||CA),this.vsn){case gA:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((T,A)=>A(JSON.stringify(T))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((T,A)=>A(JSON.parse(T)));break;case E_:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Na=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function IA(t,e,n){const s=new URL(e,t);if(n)for(const[r,l]of Object.entries(n))l!==void 0&&s.searchParams.set(r,l);return s.toString()}async function MA(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function DA(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:r,body:l,headers:u}){const d=IA(t.baseUrl,s,r),m=await MA(t.auth),h=await e(d,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),y=await h.text(),b=(h.headers.get("content-type")||"").includes("application/json"),_=b&&y?JSON.parse(y):y;if(!h.ok){const w=b?_:void 0,T=w==null?void 0:w.error;throw new Na((T==null?void 0:T.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:T==null?void 0:T.type,icebergCode:T==null?void 0:T.code,details:w})}return{status:h.status,headers:h.headers,data:_}}}}function ru(t){return t.join("")}var kA=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ru(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ru(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ru(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ru(t.namespace)}`}),!0}catch(e){if(e instanceof Na&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Na&&n.status===409)return;throw n}}};function Yo(t){return t.join("")}var UA=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Na&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Na&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},OA=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=DA({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new kA(this.client,e),this.tableOps=new UA(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Vu=class extends Error{constructor(t,e="storage",n,s){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=s}};function $u(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var au=class extends Vu{constructor(t,e,n,s="storage"){super(t,s,e,n),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},R_=class extends Vu{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const PA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),LA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Hf=t=>{if(Array.isArray(t))return t.map(n=>Hf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=Hf(s)}),e},qA=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Ra(t){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(t)}function GA(t,e){if(Ra(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Ra(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HA(t){var e=GA(t,"string");return Ra(e)=="symbol"?e:e+""}function zA(t,e,n){return(e=HA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jy(Object(n),!0).forEach(function(s){zA(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jy(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const Fy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},BA=async(t,e,n,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t,l=r.status||500;if(typeof r.json=="function")r.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||l+"";e(new au(Fy(u),l,d,s))}).catch(()=>{if(s==="vectors"){const u=l+"";e(new au(r.statusText||`HTTP ${l} error`,l,u,s))}else{const u=l+"";e(new au(r.statusText||`HTTP ${l} error`,l,u,s))}});else{const u=l+"";e(new au(r.statusText||`HTTP ${l} error`,l,u,s))}}else e(new R_(Fy(t),t,s))},VA=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!s?Oe(Oe({},r),n):(LA(s)?(r.headers=Oe({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Oe(Oe({},r),n))};async function pa(t,e,n,s,r,l,u){return new Promise((d,m)=>{t(n,VA(e,s,r,l)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;if(u==="vectors"){const y=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!y||!y.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>BA(h,m,s,u))})}function I_(t="storage"){return{get:async(e,n,s,r)=>pa(e,"GET",n,s,r,void 0,t),post:async(e,n,s,r,l)=>pa(e,"POST",n,r,l,s,t),put:async(e,n,s,r,l)=>pa(e,"PUT",n,r,l,s,t),head:async(e,n,s,r)=>pa(e,"HEAD",n,Oe(Oe({},s),{},{noResolveJson:!0}),r,void 0,t),remove:async(e,n,s,r,l)=>pa(e,"DELETE",n,r,l,s,t)}}const $A=I_("storage"),{get:Ia,post:ci,put:zf,head:jA,remove:ph}=$A,$n=I_("vectors");var pr=class{constructor(t,e={},n,s="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=PA(n),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($u(n))return{data:null,error:n};throw n}}},FA=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($u(e))return{data:null,error:e};throw e}}};let M_;M_=Symbol.toStringTag;var JA=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[M_]="BlobDownloadBuilder",this.promise=null}asStream(){return new FA(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($u(e))return{data:null,error:e};throw e}}};const YA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var KA=class extends pr{constructor(t,e={},n,s){super(t,e,s,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,s){var r=this;return r.handleOperation(async()=>{let l;const u=Oe(Oe({},Jy),s);let d=Oe(Oe({},r.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",r.encodeMetadata(m)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",r.encodeMetadata(m))):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,m&&(d["x-metadata"]=r.toBase64(r.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),s!=null&&s.headers&&(d=Oe(Oe({},d),s.headers));const h=r._removeEmptyFolders(e),y=r._getFinalPath(h),b=await(t=="PUT"?zf:ci)(r.fetch,`${r.url}/object/${y}`,l,Oe({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:h,id:b.Id,fullPath:b.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var r=this;const l=r._removeEmptyFolders(t),u=r._getFinalPath(l),d=new URL(r.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",e),r.handleOperation(async()=>{let m;const h=Oe({upsert:Jy.upsert},s),y=Oe(Oe({},r.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",h.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",h.cacheControl)):(m=n,y["cache-control"]=`max-age=${h.cacheControl}`,y["content-type"]=h.contentType),{path:l,fullPath:(await zf(r.fetch,d.toString(),m,{headers:y})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(t);const r=Oe({},n.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const l=await ci(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:r}),u=new URL(n.url+l.url),d=u.searchParams.get("token");if(!d)throw new Vu("No token returned by API");return{signedUrl:u.toString(),path:t,token:d}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;return s.handleOperation(async()=>await ci(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}))}async copy(t,e,n){var s=this;return s.handleOperation(async()=>({path:(await ci(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(t,e,n){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(t),l=await ci(s.fetch,`${s.url}/object/sign/${r}`,Oe({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${s.url}${l.signedURL}${u}`)}})}async createSignedUrls(t,e,n){var s=this;return s.handleOperation(async()=>{const r=await ci(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(u=>Oe(Oe({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${l}`):null}))})}download(t,e,n){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),l=r?`?${r}`:"",u=this._getFinalPath(t),d=()=>Ia(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0},n);return new JA(d,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Hf(await Ia(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await jA(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($u(s)&&s instanceof R_){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&s.push(r);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await ph(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var s=this;return s.handleOperation(async()=>{const r=Oe(Oe(Oe({},YA),e),{},{prefix:t||""});return await ci(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const s=Oe({},t);return await ci(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const WA="2.95.3",Ha={"X-Client-Info":`storage-js/${WA}`};var XA=class extends pr{constructor(t,e={},n,s){const r=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const l=r.href.replace(/\/$/,""),u=Oe(Oe({},Ha),e);super(l,u,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Ia(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ia(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await ci(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await zf(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await ci(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ph(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},QA=class extends pr{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=Oe(Oe({},Ha),e);super(s,r,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await ci(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),r=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await Ia(e.fetch,r,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ph(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!qA(t))throw new Vu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new OA({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(r,l){const u=r[l];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(r,d),error:null}}catch(m){if(s)throw m;return{data:null,error:m}}}}})}},ZA=class extends pr{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=Oe(Oe({},Ha),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await $n.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await $n.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},eC=class extends pr{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=Oe(Oe({},Ha),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},tC=class extends pr{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=Oe(Oe({},Ha),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await $n.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},nC=class extends tC{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new iC(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},iC=class extends ZA{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new sC(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},sC=class extends eC{constructor(t,e,n,s,r){super(t,e,r),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Oe(Oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},oC=class extends XA{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new KA(this.url,this.headers,t,this.fetch)}get vectors(){return new nC(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new QA(this.url+"/iceberg",this.headers,this.fetch)}};const D_="2.95.3",tr=30*1e3,Bf=3,xf=Bf*tr,rC="http://localhost:9999",aC="supabase.auth.token",lC={"X-Client-Info":`gotrue-js/${D_}`},Vf="X-Supabase-Api-Version",k_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cC=600*1e3;class Ma extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dC extends Ma{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function fC(t){return Te(t)&&t.name==="AuthApiError"}class ro extends Ma{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Qi extends Ma{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class Bn extends Qi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tf(t){return Te(t)&&t.name==="AuthSessionMissingError"}class Ko extends Qi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lu extends Qi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class uu extends Qi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hC(t){return Te(t)&&t.name==="AuthImplicitGrantRedirectError"}class Yy extends Qi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mC extends Qi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class $f extends Qi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ef(t){return Te(t)&&t.name==="AuthRetryableFetchError"}class Ky extends Qi{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class jf extends Qi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wy=` 	
\r=`.split(""),pC=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Wy.length;e+=1)t[Wy[e].charCodeAt(0)]=-2;for(let e=0;e<Eu.length;e+=1)t[Eu[e].charCodeAt(0)]=e;return t})();function Xy(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Eu[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Eu[s]),e.queuedBits-=6}}function U_(t,e,n){const s=pC[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Qy(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=u=>{vC(u,s,n)};for(let u=0;u<t.length;u+=1)U_(t.charCodeAt(u),r,l);return e.join("")}function gC(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yC(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}gC(s,e)}}function vC(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function lr(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)U_(t.charCodeAt(r),n,s);return new Uint8Array(e)}function _C(t){const e=[];return yC(t,n=>e.push(n)),new Uint8Array(e)}function ao(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>Xy(r,n,s)),Xy(null,n,s),e.join("")}function bC(t){return Math.round(Date.now()/1e3)+t}function SC(){return Symbol("auth-callback")}const ln=()=>typeof window<"u"&&typeof document<"u",eo={tested:!1,writable:!1},O_=()=>{if(!ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(eo.tested)return eo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),eo.tested=!0,eo.writable=!0}catch{eo.tested=!0,eo.writable=!1}return eo.writable};function wC(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const P_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",nr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},to=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rn=async(t,e)=>{await t.removeItem(e)};class ju{constructor(){this.promise=new ju.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ju.promiseConstructor=Promise;function cu(t){const e=t.split(".");if(e.length!==3)throw new jf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!uC.test(e[s]))throw new jf("JWT not in base64url format");return{header:JSON.parse(Qy(e[0])),payload:JSON.parse(Qy(e[1])),signature:lr(e[2]),raw:{header:e[0],payload:e[1]}}}async function TC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function EC(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){r(u);return}}})()})}function AC(t){return("0"+t.toString(16)).substr(-2)}function CC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let l=0;l<56;l++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,AC).join("")}async function NC(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function RC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await NC(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wo(t,e,n=!1){const s=CC();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await nr(t,`${e}-code-verifier`,r);const l=await RC(s);return[l,s===l?"plain":"s256"]}const IC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MC(t){const e=t.headers.get(Vf);if(!e||!e.match(IC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function DC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function kC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xo(t){if(!UC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Af(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function OC(t,e){return new Proxy(t,{get:(n,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,r)}})}function Zy(t){return JSON.parse(JSON.stringify(t))}const io=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),PC=[502,503,504];async function ev(t){var e;if(!xC(t))throw new $f(io(t),0);if(PC.includes(t.status))throw new $f(io(t),t.status);let n;try{n=await t.json()}catch(l){throw new ro(io(l),l)}let s;const r=MC(t);if(r&&r.getTime()>=k_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Ky(io(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Bn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Ky(io(n),t.status,n.weak_password.reasons);throw new dC(io(n),t.status||500,s)}const LC=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function Ue(t,e,n,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[Vf]||(l[Vf]=k_["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await qC(t,e,n+d,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function qC(t,e,n,s,r,l){const u=LC(e,s,r,l);let d;try{d=await t(n,Object.assign({},u))}catch(m){throw console.error(m),new $f(io(m),0)}if(d.ok||await ev(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(m){await ev(m)}}function ui(t){var e;let n=null;zC(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=bC(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function tv(t){const e=ui(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ks(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function GC(t){return{data:t,error:null}}function HC(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l}=t,u=Bu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l},m=Object.assign({},u);return{data:{properties:d,user:m},error:null}}function nv(t){return t}function zC(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cf=["global","local","others"];class BC{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=P_(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Cf[0]){if(Cf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cf.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ks})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Bu(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:HC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ks})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,l,u,d,m;try{const h={nextPage:null,lastPage:0,total:0},y=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:nv});if(y.error)throw y.error;const b=await y.json(),_=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(T=>{const A=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);h[`${C}Page`]=A}),h.total=parseInt(_)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(Te(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Xo(e);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ks})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Xo(e);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ks})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Xo(e);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ks})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Xo(e.userId);try{const{data:n,error:s}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Xo(e.userId),Xo(e.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,r,l,u,d,m;try{const h={nextPage:null,lastPage:0,total:0},y=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:nv});if(y.error)throw y.error;const b=await y.json(),_=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(T=>{const A=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);h[`${C}Page`]=A}),h.total=parseInt(_)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(Te(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Te(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}}function iv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Qo={debug:!!(globalThis&&O_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class L_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class VC extends L_{}async function $C(t,e,n){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new VC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function jC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function q_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function FC(t){return parseInt(t,16)}function JC(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function YC(t){var e;const{chainId:n,domain:s,expirationTime:r,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:m,resources:h,scheme:y,uri:b,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=q_(t.address),T=y?`${y}://${s}`:s,A=t.statement?`${t.statement}
`:"",C=`${T} wants you to sign in with your Ethereum account:
${w}

${A}`;let D=`URI: ${b}
Version: ${_}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(r&&(D+=`
Expiration Time: ${r.toISOString()}`),d&&(D+=`
Not Before: ${d.toISOString()}`),m&&(D+=`
Request ID: ${m}`),h){let N=`
Resources:`;for(const I of h){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);N+=`
- ${I}`}D+=N}return`${C}
${D}`}class qt extends Error{constructor({message:e,code:n,cause:s,name:r}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=r??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Au extends qt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function KC({error:t,options:e}){var n,s,r;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new qt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new qt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new qt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new qt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new qt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new qt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(G_(u)){if(l.rp.id!==u)return new qt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new qt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function WC({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new qt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(G_(s)){if(n.rpId!==s)return new qt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new qt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class XC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const QC=new XC;function ZC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,r=Bu(t,["challenge","user","excludeCredentials"]),l=lr(e).buffer,u=Object.assign(Object.assign({},n),{id:lr(n.id).buffer}),d=Object.assign(Object.assign({},r),{challenge:l,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const h=s[m];d.excludeCredentials[m]=Object.assign(Object.assign({},h),{id:lr(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function eN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Bu(t,["challenge","allowCredentials"]),r=lr(e).buffer,l=Object.assign(Object.assign({},s),{challenge:r});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:lr(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function tN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ao(new Uint8Array(t.response.attestationObject)),clientDataJSON:ao(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ao(new Uint8Array(r.authenticatorData)),clientDataJSON:ao(new Uint8Array(r.clientDataJSON)),signature:ao(new Uint8Array(r.signature)),userHandle:r.userHandle?ao(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function G_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function sv(){var t,e;return!!(ln()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function iN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Au("Browser returned unexpected credential type",e)}:{data:null,error:new Au("Empty credential response",e)}}catch(e){return{data:null,error:KC({error:e,options:t})}}}async function sN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Au("Browser returned unexpected credential type",e)}:{data:null,error:new Au("Empty credential response",e)}}catch(e){return{data:null,error:WC({error:e,options:t})}}}const oN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},rN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cu(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const l in r){const u=r[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(e(u)){const d=s[l];e(d)?s[l]=Cu(d,u):s[l]=Cu(u)}else s[l]=u}return s}function aN(t,e){return Cu(oN,t,e||{})}function lN(t,e){return Cu(rN,t,e||{})}class uN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:r},l){var u;try{const{data:d,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!d)return{data:null,error:m};const h=r??QC.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:y}=d.webauthn.credential_options.publicKey;if(!y.name){const b=s;if(b)y.name=`${y.id}:${b}`;else{const w=(await this.client.getUser()).data.user,T=((u=w==null?void 0:w.user_metadata)===null||u===void 0?void 0:u.name)||(w==null?void 0:w.email)||(w==null?void 0:w.id)||"User";y.name=`${y.id}:${T}`}}y.displayName||(y.displayName=y.name)}switch(d.webauthn.type){case"create":{const y=aN(d.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:_}=await iN({publicKey:y,signal:h});return b?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:b}},error:null}:{data:null,error:_}}case"request":{const y=lN(d.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:_}=await sN(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y,signal:h}));return b?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:b}},error:null}:{data:null,error:_}}}}catch(d){return Te(d)?{data:null,error:d}:{data:null,error:new ro("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!n)return{data:null,error:new Ma("rpId is required for WebAuthn authentication")};try{if(!sv())return{data:null,error:new ro("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:r},{request:l});if(!u)return{data:null,error:d};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:s,credential_response:m.credential_response}})}catch(u){return Te(u)?{data:null,error:u}:{data:null,error:new ro("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!n)return{data:null,error:new Ma("rpId is required for WebAuthn registration")};try{if(!sv())return{data:null,error:new ro("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var b;return(b=y.data)===null||b===void 0?void 0:b.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:d};const{data:m,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:r},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:h}}catch(u){return Te(u)?{data:null,error:u}:{data:null,error:new ro("Unexpected error in register",u)}}}}jC();const cN={url:rC,storageKey:aC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ov(t,e,n){return await n()}const Zo={};class Da{get jwks(){var e,n;return(n=(e=Zo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Zo[this.storageKey]=Object.assign(Object.assign({},Zo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Zo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zo[this.storageKey]=Object.assign(Object.assign({},Zo[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},cN),e);if(this.storageKey=l.storageKey,this.instanceID=(n=Da.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Da.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ln()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new BC({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=P_(l.fetch),this.lock=l.lock||ov,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&ln()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=$C:this.lock=ov,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:O_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=iv(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=iv(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${D_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(ln()&&(n=wC(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),ln()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),hC(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:d}=r;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Te(n)?this._returnResult({error:n}):this._returnResult({error:new ro("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ui}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const m=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:h,session:m},error:null})}catch(l){if(Te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,r;try{let l;if("email"in e){const{email:y,password:b,options:_}=e;let w=null,T=null;this.flowType==="pkce"&&([w,T]=await Wo(this.storage,this.storageKey)),l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:y,password:b,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:w,code_challenge_method:T},xform:ui})}else if("phone"in e){const{phone:y,password:b,options:_}=e;l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(r=_==null?void 0:_.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:ui})}else throw new lu("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return await rn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const m=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:h,session:m},error:null})}catch(l){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:d}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:tv})}else if("phone"in e){const{phone:l,password:u,options:d}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:tv})}else throw new lu("You must provide either an email or phone number and a password");const{data:s,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const l=new Ko;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(Te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,r,l,u,d,m,h,y,b,_;let w,T;if("message"in e)w=e.message,T=e.signature;else{const{chain:A,wallet:C,statement:D,options:N}=e;let I;if(ln())if(typeof C=="object")I=C;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")I=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const U=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href),L=await I.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=q_(L[0]);let z=(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!z){const W=await I.request({method:"eth_chainId"});z=FC(W)}const Z={domain:U.host,address:B,statement:D,uri:U.href,version:"1",chainId:z,nonce:(r=N==null?void 0:N.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(u=(l=N==null?void 0:N.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(h=N==null?void 0:N.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(y=N==null?void 0:N.signInWithEthereum)===null||y===void 0?void 0:y.resources};w=YC(Z),T=await I.request({method:"personal_sign",params:[JC(w),B]})}try{const{data:A,error:C}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:T},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ui});if(C)throw C;if(!A||!A.session||!A.user){const D=new Ko;return this._returnResult({data:{user:null,session:null},error:D})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:C})}catch(A){if(Te(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,s,r,l,u,d,m,h,y,b,_,w;let T,A;if("message"in e)T=e.message,A=e.signature;else{const{chain:C,wallet:D,statement:N,options:I}=e;let U;if(ln())if(typeof D=="object")U=D;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))U=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=D}const L=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in U&&U.signIn){const B=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),N?{statement:N}:null));let z;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")z=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)z=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)T=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),A=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${L.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(r=(s=I==null?void 0:I.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((u=I==null?void 0:I.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((d=I==null?void 0:I.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I==null?void 0:I.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((h=I==null?void 0:I.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((b=(y=I==null?void 0:I.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...I.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const B=await U.signMessage(new TextEncoder().encode(T),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=B}}try{const{data:C,error:D}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:ao(A)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ui});if(D)throw D;if(!C||!C.session||!C.user){const N=new Ko;return this._returnResult({data:{user:null,session:null},error:N})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:D})}catch(C){if(Te(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await to(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new mC;const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ui});if(await rn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new Ko;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:u})}catch(l){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:l,nonce:u}=e,d=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ui}),{data:m,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!m||!m.session||!m.user){const y=new Ko;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:h})}catch(n){if(Te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,r,l,u;try{if("email"in e){const{email:d,options:m}=e;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await Wo(this.storage,this.storageKey));const{error:b}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:d,options:m}=e,{data:h,error:y}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:y})}throw new lu("You must provide either an email or phone number.")}catch(d){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,s;try{let r,l;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:ui});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,h=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:h,session:m},error:null})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,s,r,l,u;try{let d=null,m=null;this.flowType==="pkce"&&([d,m]=await Wo(this.storage,this.storageKey));const h=await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:m}),headers:this.headers,xform:GC});return!((l=h.data)===null||l===void 0)&&l.url&&ln()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Bn;const{error:r}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Te(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:u}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:u,error:d}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new lu("You must provide either an email or phone number and a type")}catch(n){if(Te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await to(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<xf:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await to(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Af()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=OC(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ks}):await this._useSession(async n=>{var s,r,l;const{data:u,error:d}=n;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bn}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:ks})})}catch(n){if(Te(n))return Tf(n)&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new Bn;const u=r.session;let d=null,m=null;this.flowType==="pkce"&&e.email!=null&&([d,m]=await Wo(this.storage,this.storageKey));const{data:h,error:y}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:m}),jwt:u.access_token,xform:ks});if(y)throw y;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bn;const n=Date.now()/1e3;let s=n,r=!0,l=null;const{payload:u}=cu(e.access_token);if(u.exp&&(s=u.exp,r=s<=n),r){const{data:d,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(Te(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Bn;const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ln())throw new uu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new uu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Yy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yy("No code detected.");const{data:N,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:u,expires_in:d,expires_at:m,token_type:h}=e;if(!l||!d||!u||!h)throw new uu("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(d);let _=y+b;m&&(_=parseInt(m));const w=_-y;w*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const T=_-b;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,_,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,_,y);const{data:A,error:C}=await this._getUser(l);if(C)throw C;const D={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:b,expires_at:_,refresh_token:u,token_type:h,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(s){if(Te(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await to(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l&&!Tf(l))return this._returnResult({error:l});const u=(s=r.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(fC(d)&&(d.status===404||d.status===401||d.status===403)||Tf(d)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=SC(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Wo(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:r}=await this._useSession(async l=>{var u,d,m,h,y;const{data:b,error:_}=l;if(_)throw _;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&y!==void 0?y:void 0})});if(r)throw r;return ln()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Te(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:r,data:{session:l}}=n;if(r)throw r;const{options:u,provider:d,token:m,access_token:h,nonce:y}=e,b=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:m,access_token:h,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ui}),{data:_,error:w}=b;return w?this._returnResult({data:{user:null,session:null},error:w}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Ko}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:w}))}catch(r){if(await rn(this.storage,`${this.storageKey}-code-verifier`),Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:u}=n;if(u)throw u;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await EC(async r=>(r>0&&await TC(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ui})),(r,l)=>{const u=200*Math.pow(2,r);return l&&Ef(l)&&Date.now()+u-s<tr})}catch(s){if(this._debug(n,"error",s),Te(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),ln()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await to(this.storage,this.storageKey);if(r&&this.userStorage){let u=await to(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:r.user},await nr(this.userStorage,this.storageKey+"-user",u)),r.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Af()}else if(r&&!r.user&&!r.user){const u=await to(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(r.user=u.user,await rn(this.storage,this.storageKey+"-user"),await nr(this.storage,this.storageKey,r)):r.user=Af()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const l=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xf;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${xf}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),Ef(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(r.access_token);!d&&(u!=null&&u.user)?(r.user=u.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ju;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Bn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(r,"error",l),Te(l)){const u={data:null,error:l};return Ef(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await nr(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const l=Zy(r);await nr(this.storage,this.storageKey,l)}else{const r=Zy(n);await nr(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rn(this.storage,this.storageKey),await rn(this.storage,this.storageKey+"-code-verifier"),await rn(this.storage,this.storageKey+"-user"),this.userStorage&&await rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${tr}ms, refresh threshold is ${Bf} ticks`),r<=Bf&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof L_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Wo(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});r.push(d.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?this._returnResult({data:null,error:l}):await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&m.type==="totp"&&(!((r=m==null?void 0:m.totp)===null||r===void 0)&&r.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?tN(e.webauthn.credential_response):nN(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:m}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:m}))})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:ZC(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:eN(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(l),l.status==="verified"&&r[l.factor_type].push(l);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,s,r,l;if(e)try{const{payload:w}=cu(e);let T=null;w.aal&&(T=w.aal);let A=T;const{data:{user:C},error:D}=await this.getUser(e);if(D)return this._returnResult({data:null,error:D});((s=(n=C==null?void 0:C.factors)===null||n===void 0?void 0:n.filter(U=>U.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(A="aal2");const I=w.amr||[];return{data:{currentLevel:T,nextLevel:A,currentAuthenticationMethods:I},error:null}}catch(w){if(Te(w))return this._returnResult({data:null,error:w});throw w}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=cu(u.access_token);let h=null;m.aal&&(h=m.aal);let y=h;((l=(r=u.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(y="aal2");const _=m.amr||[];return{data:{currentLevel:h,nextLevel:y,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?await Ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Bn})})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Bn});const u=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&ln()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(Te(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Bn});const u=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&ln()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(Te(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await Ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Bn})})}catch(e){if(Te(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?(await Ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bn})})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+cC>r)return s;const{data:l,error:u}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:w,error:T}=await this.getSession();if(T||!w.session)return this._returnResult({data:null,error:T});s=w.session.access_token}const{header:r,payload:l,signature:u,raw:{header:d,payload:m}}=cu(s);n!=null&&n.allowExpired||DC(l.exp);const h=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:l,header:r,signature:u},error:null}}const y=kC(r.alg),b=await crypto.subtle.importKey("jwk",h,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,u,_C(`${d}.${m}`)))throw new jf("Invalid JWT signature");return{data:{claims:l,header:r,signature:u},error:null}}catch(s){if(Te(s))return this._returnResult({data:null,error:s});throw s}}}Da.nextInstanceID={};const dN=Da,fN="2.95.3";let va="";typeof Deno<"u"?va="deno":typeof document<"u"?va="web":typeof navigator<"u"&&navigator.product==="ReactNative"?va="react-native":va="node";const hN={"X-Client-Info":`supabase-js-${va}/${fN}`},mN={headers:hN},pN={schema:"public"},gN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yN={};function ka(t){"@babel/helpers - typeof";return ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(t)}function vN(t,e){if(ka(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(ka(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _N(t){var e=vN(t,"string");return ka(e)=="symbol"?e:e+""}function bN(t,e,n){return(e=_N(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rv(Object(n),!0).forEach(function(s){bN(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const SN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wN=()=>Headers,xN=(t,e,n)=>{const s=SN(n),r=wN();return async(l,u)=>{var d;const m=(d=await e())!==null&&d!==void 0?d:t;let h=new r(u==null?void 0:u.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${m}`),s(l,Tt(Tt({},u),{},{headers:h}))}};function TN(t){return t.endsWith("/")?t:t+"/"}function EN(t,e){var n,s;const{db:r,auth:l,realtime:u,global:d}=t,{db:m,auth:h,realtime:y,global:b}=e,_={db:Tt(Tt({},m),r),auth:Tt(Tt({},h),l),realtime:Tt(Tt({},y),u),storage:{},global:Tt(Tt(Tt({},b),d),{},{headers:Tt(Tt({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function AN(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(TN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var CN=class extends dN{constructor(t){super(t)}},NN=class{constructor(t,e,n){var s,r;this.supabaseUrl=t,this.supabaseKey=e;const l=AN(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:pN,realtime:yN,auth:Tt(Tt({},gN),{},{storageKey:u}),global:mN},m=EN(n??{},d);if(this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=m.global.headers)!==null&&r!==void 0?r:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=m.auth)!==null&&h!==void 0?h:{},this.headers,m.global.fetch)}this.fetch=xN(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new fA(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new oC(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new sA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,storageKey:l,flowType:u,lock:d,debug:m,throwOnError:h},y,b){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new CN({url:this.authUrl.href,headers:Tt(Tt({},_),y),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,flowType:u,lock:d,debug:m,throwOnError:h,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new RA(this.realtimeUrl.href,Tt(Tt({},t),{},{params:Tt(Tt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const RN=(t,e,n)=>new NN(t,e,n);function IN(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}IN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const MN="https://mlpikaguvatuggzxqzve.supabase.co",DN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scGlrYWd1dmF0dWdnenhxenZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1MzQ3ODYsImV4cCI6MjA4NjExMDc4Nn0.rG7GvkNvZrvZRs0isWlk7_KecBO4KMscH3OMwAT3K9M",Me=RN(MN,DN),kN={lessThanXSeconds:{one:"1 ",other:"{{count}} "},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1 ",other:"{{count}} "},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:" 1",other:" {{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:" 1",other:" {{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:" 1",other:" {{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:" 1",other:" {{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1 ",other:"{{count}} "},almostXYears:{one:" 1",other:" {{count}}"}},UN=(t,e,n)=>{let s;const r=kN[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?s+" ":s+" ":s},ON={full:"y M d EEEE",long:"y M d",medium:"y.MM.dd",short:"y.MM.dd"},PN={full:"a H mm ss zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},LN={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},qN={date:ar({formats:ON,defaultWidth:"full"}),time:ar({formats:PN,defaultWidth:"full"}),dateTime:ar({formats:LN,defaultWidth:"full"})},GN={lastWeek:"'' eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"'' eeee p",other:"P"},HN=(t,e,n,s)=>GN[t],zN={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["",""]},BN={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},VN={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},$N={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},jN={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},FN={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},JN=(t,e)=>{const n=Number(t);switch(String(e==null?void 0:e.unit)){case"minute":case"second":return String(n);case"date":return n+"";default:return n+""}},YN={ordinalNumber:JN,era:xi({values:zN,defaultWidth:"wide"}),quarter:xi({values:BN,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xi({values:VN,defaultWidth:"wide"}),day:xi({values:$N,defaultWidth:"wide"}),dayPeriod:xi({values:jN,defaultWidth:"wide",formattingValues:FN,defaultFormattingWidth:"wide"})},KN=/^(\d+)(|)?/i,WN=/\d+/i,XN={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(|)/i},QN={any:[/^(bc|)/i,/^(ad|)/i]},ZN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]?/i},eR={any:[/1/i,/2/i,/3/i,/4/i]},tR={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])/i,wide:/^(1[012]|[123456789])/i},nR={any:[/^1?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},iR={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},sR={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},oR={any:/^(am|pm|||||||)/i},rR={any:{am:/^(am|)/i,pm:/^(pm|)/i,midnight:/^/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},aR={ordinalNumber:__({matchPattern:KN,parsePattern:WN,valueCallback:t=>parseInt(t,10)}),era:Ti({matchPatterns:XN,defaultMatchWidth:"wide",parsePatterns:QN,defaultParseWidth:"any"}),quarter:Ti({matchPatterns:ZN,defaultMatchWidth:"wide",parsePatterns:eR,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ti({matchPatterns:tR,defaultMatchWidth:"wide",parsePatterns:nR,defaultParseWidth:"any"}),day:Ti({matchPatterns:iR,defaultMatchWidth:"wide",parsePatterns:sR,defaultParseWidth:"any"}),dayPeriod:Ti({matchPatterns:oR,defaultMatchWidth:"any",parsePatterns:rR,defaultParseWidth:"any"})},mr={code:"ko",formatDistance:UN,formatLong:qN,formatRelative:HN,localize:YN,match:aR,options:{weekStartsOn:0,firstWeekContainsDate:1}},lR=({events:t,tags:e,onAddEvent:n,onDeleteEvent:s,onUpdateEvent:r})=>{var Ht;const[l,u]=M.useState(new Date),[d,m]=M.useState(new Date),h=M.useRef(0),[y,b]=M.useState(!1),[_,w]=M.useState(!1),[T,A]=M.useState(null),[C,D]=M.useState(null),[N,I]=M.useState(""),[U,L]=M.useState(""),[B,z]=M.useState(""),[Z,W]=M.useState(""),[ie,ue]=M.useState(!1),[fe,_e]=M.useState(""),[Ce,qe]=M.useState(((Ht=e==null?void 0:e[0])==null?void 0:Ht.id)||"tag_1"),[J,ee]=M.useState(!1),[ae,be]=M.useState(!1),[de,k]=M.useState(!1),[G,oe]=M.useState(!1),le=Array.from({length:12},(re,he)=>he+1),K=["00","10","20","30","40","50"],Q=re=>re&&parseInt(re.split(":")[0])>=12?"":"",ge=re=>{if(!re)return"12:00";let[he,zt]=re.split(":").map(Number);return he=he%12,he===0&&(he=12),`${String(he).padStart(2,"0")}:${String(zt).padStart(2,"0")}`},Ae=(re,he)=>{let[zt,Mt]=re.split(":").map(Number);return he===""&&zt<12&&(zt+=12),he===""&&zt===12&&(zt=0),`${String(zt).padStart(2,"0")}:${String(Mt).padStart(2,"0")}`},ye=LT(l),Ee=UT(ye),He=hr(ye),Ne=GT(Ee),je=PT({start:He,end:Ne}),ke=()=>u(eA(l)),pe=()=>u(g_(l,1)),ze=re=>{const he=Date.now();he-h.current<500||Math.abs(re.deltaY)<10||(re.deltaY>0?(pe(),h.current=he):re.deltaY<0&&(ke(),h.current=he))},Gt=re=>{var he;w(!1),A(null),D(null),I(""),L(Vn(re||d||new Date,"yyyy-MM-dd")),z(""),W(""),ue(!1),ee(!1),be(!1),k(!1),oe(!1),_e(""),qe(((he=e==null?void 0:e[0])==null?void 0:he.id)||"tag_1"),b(!0)},Zt=re=>{w(!0),A(re.id),D(re),I(re.title),L(re.date),z(re.startTime||""),W(re.endTime||""),ue(re.isAllDay||!1),ee(!1),be(!1),k(!1),oe(!1),_e(re.description||""),qe(re.type),b(!0)},pt=()=>{if(!N.trim()||!U)return;const re={id:_&&T?T:crypto.randomUUID(),title:N,date:U,startTime:ie?void 0:B||void 0,endTime:ie?void 0:Z||void 0,isAllDay:ie,description:fe||void 0,type:Ce};_&&C?r(re,C):n(re),b(!1)},ht=()=>{_&&T&&(s(T),b(!1))},It=re=>e==null?void 0:e.find(he=>he.id===re);try{return S.jsxs("div",{className:"flex h-full bg-white text-[#37352f] overflow-hidden font-sans",children:[S.jsxs("div",{className:"flex-1 flex flex-col h-full border-r border-[#e9e9e8]",onWheel:ze,children:[S.jsx("div",{className:"h-14 flex items-center justify-between px-5 border-b border-[#e9e9e8] bg-white",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("h2",{className:"text-lg font-normal tracking-tight tabular-nums",children:Vn(l,"yyyy M",{locale:mr})}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("button",{onClick:ke,className:"p-1 hover:bg-[#efefef] rounded transition-colors text-[#9b9a97]",children:S.jsx(Bx,{size:18})}),S.jsx("button",{onClick:pe,className:"p-1 hover:bg-[#efefef] rounded transition-colors text-[#9b9a97]",children:S.jsx(qa,{size:18})})]})]})}),S.jsx("div",{className:"grid grid-cols-7 border-b border-[#e9e9e8]",children:["","","","","","",""].map(re=>S.jsx("div",{className:`py-2 px-3 text-sm font-normal bg-white ${re===""?"text-[#eb5757]":"text-[#acaba9]"}`,children:re},re))}),S.jsx("div",{className:"flex-1 flex flex-col h-full min-h-0 divide-y divide-[#e9e9e8]",children:(()=>{const re=[];for(let he=0;he<je.length;he+=7)re.push(je.slice(he,he+7));return re.map((he,zt)=>S.jsx("div",{className:"flex-1 grid grid-cols-7 min-h-0 divide-x divide-[#e9e9e8]",children:he.map(Mt=>{const Et=(t||[]).filter(at=>{try{return at.date&&Aa(Ki(at.date),Mt)}catch(Mn){return console.error("Error parsing event date:",Mn),!1}}),bt=d&&Aa(Mt,d),mn=LE(Mt,l),Ai=w_(Mt);return S.jsxs("div",{onClick:()=>{m(Mt),Gt(Mt)},className:`
                        group relative p-1 select-none transition-colors flex flex-col min-h-0
                        ${mn?"bg-white hover:bg-[#f7f7f5]":"bg-[#fbfbfa]/50 text-[#d3d1cb]"}
                        ${bt?"!bg-[#efefef]":""}
                      `,children:[S.jsxs("div",{className:"flex justify-between items-center px-1 mb-1 min-h-[24px]",children:[S.jsx("span",{className:`
                    text-sm font-normal w-7 h-7 flex items-center justify-center rounded-full
                    ${Ai?"bg-[#eb5757] text-white":""}
                  `,children:Vn(Mt,"d")}),S.jsx("button",{onClick:at=>{at.stopPropagation(),Gt(Mt)},className:`
                      w-5 h-5 flex items-center justify-center rounded hover:bg-[#e0e0e0] text-[#9b9a97] hover:text-[#37352f]
                      opacity-0 group-hover:opacity-100 transition-all
                      ${bt?"opacity-100":""}
                    `,children:S.jsx(uo,{size:14})})]}),S.jsxs("div",{className:"flex flex-col gap-0.5",children:[Et.slice(0,4).map(at=>{const Mn=It(at.type);return S.jsxs("div",{onClick:Dn=>{Dn.stopPropagation(),Zt(at)},style:{backgroundColor:(Mn==null?void 0:Mn.color)||"#37352f"},className:`
                                text-[12.5px] px-2 py-1 rounded-[4px] truncate cursor-pointer font-normal text-white
                                opacity-90 hover:opacity-100 hover:ring-1 hover:ring-inset hover:ring-[#d3d1cb]
                                shadow-sm leading-tight
                              `,children:[!at.isAllDay&&at.startTime&&S.jsx("span",{className:"mr-1.5 opacity-80 font-normal text-[11px]",children:at.startTime}),at.title]},at.id)}),Et.length>4&&S.jsxs("div",{className:"text-[10px] text-[#9b9a97] px-1.5 font-normal",children:["+",Et.length-4," "]})]})]},Mt.toISOString())})},zt))})()})]}),y&&S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-[2px] p-4",children:S.jsxs("div",{className:"bg-white w-full max-w-[500px] rounded-xl shadow-2xl overflow-hidden text-[#37352f]",children:[S.jsxs("div",{className:"px-5 py-3 border-b border-[#e9e9e8] flex items-center justify-between bg-[#fbfbfa]",children:[S.jsx("span",{className:"text-sm font-normal text-[#787774]",children:_?" ":" "}),S.jsxs("div",{className:"flex items-center gap-1",children:[_&&S.jsx("button",{onClick:ht,className:"text-[#eb5757] hover:bg-[#ffefef] p-1.5 rounded transition-colors",title:"",children:S.jsx(Yi,{size:18})}),S.jsx("button",{onClick:()=>b(!1),className:"text-[#9b9a97] hover:text-[#37352f] hover:bg-[#efefef] p-1.5 rounded transition-colors",children:S.jsx(Hu,{size:20})})]})]}),S.jsxs("div",{className:"p-6 space-y-5",children:[S.jsx("div",{children:S.jsx("input",{type:"text",placeholder:" ",className:"w-full text-xl font-normal placeholder-[#d3d1cb] border-none focus:ring-0 p-0 text-[#37352f] bg-transparent",value:N,onChange:re=>I(re.target.value),autoFocus:!0})}),S.jsxs("div",{className:"space-y-3 text-sm",children:[S.jsxs("div",{className:"flex items-center h-8",children:[S.jsxs("div",{className:"w-24 text-[#787774] flex items-center gap-2",children:[S.jsx(u_,{size:14})," "]}),S.jsx("input",{type:"date",className:"flex-1 bg-transparent border-none focus:ring-0 p-0 text-[#37352f] cursor-pointer hover:bg-[#efefef] rounded px-2 -ml-2",value:U,onChange:re=>L(re.target.value)})]}),S.jsxs("div",{className:"flex items-center h-8",children:[S.jsxs("div",{className:"w-24 text-[#787774] flex items-center gap-2",children:[S.jsx(Iy,{size:14})," "]}),S.jsx("button",{onClick:()=>ue(!ie),className:`
                      relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#2383e2] focus:ring-offset-1
                      ${ie?"bg-[#2383e2]":"bg-[#e9e9e8]"}
                    `,children:S.jsx("span",{className:`
                        inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform
                        ${ie?"translate-x-5":"translate-x-1"}
                      `})}),S.jsx("span",{className:"ml-3 text-xs text-[#787774]",children:ie?" ":" "})]}),!ie&&S.jsxs("div",{className:"flex items-center h-8 animate-[fadeIn_0.2s_ease-out]",children:[S.jsxs("div",{className:"w-24 text-[#787774] flex items-center gap-2",children:[S.jsx(Iy,{size:14,className:"opacity-0"})," "]}),S.jsxs("div",{className:"flex items-center gap-2 flex-1 relative",children:[(J||ae||de||G)&&S.jsx("div",{className:"fixed inset-0 z-50 bg-transparent",onClick:()=>{ee(!1),be(!1),k(!1),oe(!1)}}),S.jsxs("div",{className:"flex items-center gap-1 relative z-[60]",children:[S.jsx("button",{onClick:()=>{const re=Q(B);z(Ae(ge(B),re===""?"":""))},className:"px-2 py-1 rounded text-[11px] bg-[#fbfbfa] border border-[#e9e9e8] text-[#787774] hover:bg-[#efefef] transition-colors font-normal",children:Q(B)}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>{ee(!J),be(!1),k(!1),oe(!1)},className:"px-2 py-1 rounded bg-[#fbfbfa] border border-[#e9e9e8] text-[#37352f] hover:bg-[#efefef] min-w-[36px] text-center",children:[ge(B).split(":")[0],""]}),J&&S.jsx("div",{className:"absolute top-full left-0 mt-1 w-16 max-h-48 overflow-y-auto bg-white border border-[#e9e9e8] rounded-md shadow-lg z-[60]",children:le.map(re=>S.jsxs("button",{onClick:()=>{const[,he]=ge(B).split(":");z(Ae(`${String(re).padStart(2,"0")}:${he}`,Q(B))),ee(!1)},className:"w-full px-3 py-1.5 text-left text-xs hover:bg-[#f7f7f5]",children:[re,""]},`sh-${re}`))})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>{be(!ae),ee(!1),k(!1),oe(!1)},className:"px-2 py-1 rounded bg-[#fbfbfa] border border-[#e9e9e8] text-[#37352f] hover:bg-[#efefef] min-w-[36px] text-center",children:[B?B.split(":")[1]:"00",""]}),ae&&S.jsx("div",{className:"absolute top-full left-0 mt-1 w-16 max-h-48 overflow-y-auto bg-white border border-[#e9e9e8] rounded-md shadow-lg z-[60]",children:K.map(re=>S.jsxs("button",{onClick:()=>{const he=ge(B).split(":")[0];z(Ae(`${he}:${re}`,Q(B))),be(!1)},className:"w-full px-3 py-1.5 text-left text-xs hover:bg-[#f7f7f5]",children:[re,""]},`sm-${re}`))})]})]}),S.jsx("span",{className:"text-[#d3d1cb]",children:""}),S.jsxs("div",{className:"flex items-center gap-1 relative z-[60]",children:[S.jsx("button",{onClick:()=>{const re=Q(Z);W(Ae(ge(Z),re===""?"":""))},className:"px-2 py-1 rounded text-[11px] bg-[#fbfbfa] border border-[#e9e9e8] text-[#787774] hover:bg-[#efefef] transition-colors font-normal",children:Q(Z)}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>{k(!de),ee(!1),be(!1),oe(!1)},className:"px-2 py-1 rounded bg-[#fbfbfa] border border-[#e9e9e8] text-[#37352f] hover:bg-[#efefef] min-w-[36px] text-center",children:[ge(Z).split(":")[0],""]}),de&&S.jsx("div",{className:"absolute top-full left-0 mt-1 w-16 max-h-48 overflow-y-auto bg-white border border-[#e9e9e8] rounded-md shadow-lg z-[60]",children:le.map(re=>S.jsxs("button",{onClick:()=>{const[,he]=ge(Z).split(":");W(Ae(`${String(re).padStart(2,"0")}:${he}`,Q(Z))),k(!1)},className:"w-full px-3 py-1.5 text-left text-xs hover:bg-[#f7f7f5]",children:[re,""]},`eh-${re}`))})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>{oe(!G),ee(!1),be(!1),k(!1)},className:"px-2 py-1 rounded bg-[#fbfbfa] border border-[#e9e9e8] text-[#37352f] hover:bg-[#efefef] min-w-[36px] text-center",children:[Z?Z.split(":")[1]:"00",""]}),G&&S.jsx("div",{className:"absolute top-full left-0 mt-1 w-16 max-h-48 overflow-y-auto bg-white border border-[#e9e9e8] rounded-md shadow-lg z-[60]",children:K.map(re=>S.jsxs("button",{onClick:()=>{const he=ge(Z).split(":")[0];W(Ae(`${he}:${re}`,Q(Z))),oe(!1)},className:"w-full px-3 py-1.5 text-left text-xs hover:bg-[#f7f7f5]",children:[re,""]},`em-${re}`))})]})]})]})]}),S.jsxs("div",{className:"flex items-center h-8",children:[S.jsxs("div",{className:"w-24 text-[#787774] flex items-center gap-2",children:[S.jsx(fh,{size:14})," "]}),S.jsx("div",{className:"flex gap-1.5 flex-wrap",children:e.map(re=>S.jsxs("button",{onClick:()=>qe(re.id),className:`
                           px-2 py-0.5 rounded text-xs transition-colors border flex items-center gap-1.5
                           ${Ce===re.id?"bg-[#37352f] text-white border-[#37352f]":"bg-white text-[#787774] border-[#e9e9e8] hover:bg-[#efefef]"}
                        `,children:[S.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:re.color}}),re.name]},re.id))})]}),S.jsxs("div",{className:"flex items-start mt-2",children:[S.jsxs("div",{className:"w-24 text-[#787774] flex items-center gap-2 pt-1",children:[S.jsx(ET,{size:14})," "]}),S.jsx("textarea",{placeholder:" ...",rows:4,className:"flex-1 bg-[#fbfbfa] border border-[#e9e9e8] rounded p-2 text-sm focus:ring-1 focus:ring-[#d3d1cb] focus:border-[#d3d1cb] resize-none outline-none",value:fe,onChange:re=>_e(re.target.value)})]})]})]}),S.jsx("div",{className:"p-3 bg-[#fbfbfa] border-t border-[#e9e9e8] flex justify-end items-center",children:S.jsx("button",{onClick:pt,className:"bg-[#2383e2] hover:bg-[#1d6fce] text-white px-4 py-1.5 rounded text-sm font-normal transition-colors shadow-sm",children:""})})]})})]})}catch(re){return console.error("CalendarView render error:",re),S.jsxs("div",{className:"p-8 text-center bg-white h-full flex flex-col items-center justify-center",children:[S.jsx("h2",{className:"text-xl font-normal text-[#eb5757] mb-2",children:"    ."}),S.jsx("p",{className:"text-[#787774]",children:"        ."}),S.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-[#37352f] text-white rounded-lg",children:" "})]})}};var _a=r_();function uR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M.useMemo(()=>s=>{e.forEach(r=>r(s))},e)}const Fu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gr(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function gh(t){return"nodeType"in t}function Sn(t){var e,n;return t?gr(t)?t:gh(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function yh(t){const{Document:e}=Sn(t);return t instanceof e}function za(t){return gr(t)?!1:t instanceof Sn(t).HTMLElement}function H_(t){return t instanceof Sn(t).SVGElement}function yr(t){return t?gr(t)?t.document:gh(t)?yh(t)?t:za(t)||H_(t)?t.ownerDocument:document:document:document}const mi=Fu?M.useLayoutEffect:M.useEffect;function Ju(t){const e=M.useRef(t);return mi(()=>{e.current=t}),M.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e.current==null?void 0:e.current(...s)},[])}function cR(){const t=M.useRef(null),e=M.useCallback((s,r)=>{t.current=setInterval(s,r)},[]),n=M.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ua(t,e){e===void 0&&(e=[t]);const n=M.useRef(t);return mi(()=>{n.current!==t&&(n.current=t)},e),n}function Ba(t,e){const n=M.useRef();return M.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function Nu(t){const e=Ju(t),n=M.useRef(null),s=M.useCallback(r=>{r!==n.current&&(e==null||e(r,n.current)),n.current=r},[]);return[n,s]}function Ru(t){const e=M.useRef();return M.useEffect(()=>{e.current=t},[t]),e.current}let Nf={};function Va(t,e){return M.useMemo(()=>{if(e)return e;const n=Nf[t]==null?0:Nf[t]+1;return Nf[t]=n,t+"-"+n},[t,e])}function z_(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.reduce((l,u)=>{const d=Object.entries(u);for(const[m,h]of d){const y=l[m];y!=null&&(l[m]=y+t*h)}return l},{...e})}}const ur=z_(1),Oa=z_(-1);function dR(t){return"clientX"in t&&"clientY"in t}function Yu(t){if(!t)return!1;const{KeyboardEvent:e}=Sn(t.target);return e&&t instanceof e}function fR(t){if(!t)return!1;const{TouchEvent:e}=Sn(t.target);return e&&t instanceof e}function Iu(t){if(fR(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return dR(t)?{x:t.clientX,y:t.clientY}:null}const Wi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Wi.Translate.toString(t),Wi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),av="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function hR(t){return t.matches(av)?t:t.querySelector(av)}const mR={display:"none"};function pR(t){let{id:e,value:n}=t;return _t.createElement("div",{id:e,style:mR},n)}function gR(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _t.createElement("div",{id:e,style:r,role:"status","aria-live":s,"aria-atomic":!0},n)}function yR(){const[t,e]=M.useState("");return{announce:M.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const B_=M.createContext(null);function vR(t){const e=M.useContext(B_);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function _R(){const[t]=M.useState(()=>new Set),e=M.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[M.useCallback(s=>{let{type:r,event:l}=s;t.forEach(u=>{var d;return(d=u[r])==null?void 0:d.call(u,l)})},[t]),e]}const bR={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},SR={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function wR(t){let{announcements:e=SR,container:n,hiddenTextDescribedById:s,screenReaderInstructions:r=bR}=t;const{announce:l,announcement:u}=yR(),d=Va("DndLiveRegion"),[m,h]=M.useState(!1);if(M.useEffect(()=>{h(!0)},[]),vR(M.useMemo(()=>({onDragStart(b){let{active:_}=b;l(e.onDragStart({active:_}))},onDragMove(b){let{active:_,over:w}=b;e.onDragMove&&l(e.onDragMove({active:_,over:w}))},onDragOver(b){let{active:_,over:w}=b;l(e.onDragOver({active:_,over:w}))},onDragEnd(b){let{active:_,over:w}=b;l(e.onDragEnd({active:_,over:w}))},onDragCancel(b){let{active:_,over:w}=b;l(e.onDragCancel({active:_,over:w}))}}),[l,e])),!m)return null;const y=_t.createElement(_t.Fragment,null,_t.createElement(pR,{id:s,value:r.draggable}),_t.createElement(gR,{id:d,announcement:u}));return n?_a.createPortal(y,n):y}var Ft;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ft||(Ft={}));function Mu(){}function lv(t,e){return M.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function xR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const pi=Object.freeze({x:0,y:0});function TR(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ER(t,e){const n=Iu(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function AR(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function CR(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function uv(t){let{left:e,top:n,height:s,width:r}=t;return[{x:e,y:n},{x:e+r,y:n},{x:e,y:n+s},{x:e+r,y:n+s}]}function V_(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const NR=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const r=uv(e),l=[];for(const u of s){const{id:d}=u,m=n.get(d);if(m){const h=uv(m),y=r.reduce((_,w,T)=>_+TR(h[T],w),0),b=Number((y/4).toFixed(4));l.push({id:d,data:{droppableContainer:u,value:b}})}}return l.sort(AR)};function RR(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),l=Math.min(e.top+e.height,t.top+t.height),u=r-s,d=l-n;if(s<r&&n<l){const m=e.width*e.height,h=t.width*t.height,y=u*d,b=y/(m+h-y);return Number(b.toFixed(4))}return 0}const $_=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const r=[];for(const l of s){const{id:u}=l,d=n.get(u);if(d){const m=RR(d,e);m>0&&r.push({id:u,data:{droppableContainer:l,value:m}})}}return r.sort(CR)};function IR(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function j_(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:pi}function MR(t){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];return r.reduce((u,d)=>({...u,top:u.top+t*d.y,bottom:u.bottom+t*d.y,left:u.left+t*d.x,right:u.right+t*d.x}),{...n})}}const DR=MR(1);function F_(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function kR(t,e,n){const s=F_(e);if(!s)return t;const{scaleX:r,scaleY:l,x:u,y:d}=s,m=t.left-u-(1-r)*parseFloat(n),h=t.top-d-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),y=r?t.width/r:t.width,b=l?t.height/l:t.height;return{width:y,height:b,top:h,right:m+y,bottom:h+b,left:m}}const UR={ignoreTransform:!1};function vr(t,e){e===void 0&&(e=UR);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:y}=Sn(t).getComputedStyle(t);h&&(n=kR(n,h,y))}const{top:s,left:r,width:l,height:u,bottom:d,right:m}=n;return{top:s,left:r,width:l,height:u,bottom:d,right:m}}function cv(t){return vr(t,{ignoreTransform:!0})}function OR(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function PR(t,e){return e===void 0&&(e=Sn(t).getComputedStyle(t)),e.position==="fixed"}function LR(t,e){e===void 0&&(e=Sn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const l=e[r];return typeof l=="string"?n.test(l):!1})}function Ku(t,e){const n=[];function s(r){if(e!=null&&n.length>=e||!r)return n;if(yh(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!za(r)||H_(r)||n.includes(r))return n;const l=Sn(t).getComputedStyle(r);return r!==t&&LR(r,l)&&n.push(r),PR(r,l)?n:s(r.parentNode)}return t?s(t):n}function J_(t){const[e]=Ku(t,1);return e??null}function Rf(t){return!Fu||!t?null:gr(t)?t:gh(t)?yh(t)||t===yr(t).scrollingElement?window:za(t)?t:null:null}function Y_(t){return gr(t)?t.scrollX:t.scrollLeft}function K_(t){return gr(t)?t.scrollY:t.scrollTop}function Ff(t){return{x:Y_(t),y:K_(t)}}var Wt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Wt||(Wt={}));function W_(t){return!Fu||!t?!1:t===document.scrollingElement}function X_(t){const e={x:0,y:0},n=W_(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},r=t.scrollTop<=e.y,l=t.scrollLeft<=e.x,u=t.scrollTop>=s.y,d=t.scrollLeft>=s.x;return{isTop:r,isLeft:l,isBottom:u,isRight:d,maxScroll:s,minScroll:e}}const qR={x:.2,y:.2};function GR(t,e,n,s,r){let{top:l,left:u,right:d,bottom:m}=n;s===void 0&&(s=10),r===void 0&&(r=qR);const{isTop:h,isBottom:y,isLeft:b,isRight:_}=X_(t),w={x:0,y:0},T={x:0,y:0},A={height:e.height*r.y,width:e.width*r.x};return!h&&l<=e.top+A.height?(w.y=Wt.Backward,T.y=s*Math.abs((e.top+A.height-l)/A.height)):!y&&m>=e.bottom-A.height&&(w.y=Wt.Forward,T.y=s*Math.abs((e.bottom-A.height-m)/A.height)),!_&&d>=e.right-A.width?(w.x=Wt.Forward,T.x=s*Math.abs((e.right-A.width-d)/A.width)):!b&&u<=e.left+A.width&&(w.x=Wt.Backward,T.x=s*Math.abs((e.left+A.width-u)/A.width)),{direction:w,speed:T}}function HR(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:u}=window;return{top:0,left:0,right:l,bottom:u,width:l,height:u}}const{top:e,left:n,right:s,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:r,width:t.clientWidth,height:t.clientHeight}}function Q_(t){return t.reduce((e,n)=>ur(e,Ff(n)),pi)}function zR(t){return t.reduce((e,n)=>e+Y_(n),0)}function BR(t){return t.reduce((e,n)=>e+K_(n),0)}function Z_(t,e){if(e===void 0&&(e=vr),!t)return;const{top:n,left:s,bottom:r,right:l}=e(t);J_(t)&&(r<=0||l<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const VR=[["x",["left","right"],zR],["y",["top","bottom"],BR]];class vh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Ku(n),r=Q_(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,u,d]of VR)for(const m of u)Object.defineProperty(this,m,{get:()=>{const h=d(s),y=r[l]-h;return this.rect[m]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class xa{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var r;(r=this.target)==null||r.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function $R(t){const{EventTarget:e}=Sn(t);return t instanceof e?t:yr(t)}function If(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var ni;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ni||(ni={}));function dv(t){t.preventDefault()}function jR(t){t.stopPropagation()}var Ke;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ke||(Ke={}));const eb={start:[Ke.Space,Ke.Enter],cancel:[Ke.Esc],end:[Ke.Space,Ke.Enter,Ke.Tab]},FR=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ke.Right:return{...n,x:n.x+25};case Ke.Left:return{...n,x:n.x-25};case Ke.Down:return{...n,y:n.y+25};case Ke.Up:return{...n,y:n.y-25}}};class _h{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new xa(yr(n)),this.windowListeners=new xa(Sn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ni.Resize,this.handleCancel),this.windowListeners.add(ni.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ni.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&Z_(s),n(pi)}handleKeyDown(e){if(Yu(e)){const{active:n,context:s,options:r}=this.props,{keyboardCodes:l=eb,coordinateGetter:u=FR,scrollBehavior:d="smooth"}=r,{code:m}=e;if(l.end.includes(m)){this.handleEnd(e);return}if(l.cancel.includes(m)){this.handleCancel(e);return}const{collisionRect:h}=s.current,y=h?{x:h.left,y:h.top}:pi;this.referenceCoordinates||(this.referenceCoordinates=y);const b=u(e,{active:n,context:s.current,currentCoordinates:y});if(b){const _=Oa(b,y),w={x:0,y:0},{scrollableAncestors:T}=s.current;for(const A of T){const C=e.code,{isTop:D,isRight:N,isLeft:I,isBottom:U,maxScroll:L,minScroll:B}=X_(A),z=HR(A),Z={x:Math.min(C===Ke.Right?z.right-z.width/2:z.right,Math.max(C===Ke.Right?z.left:z.left+z.width/2,b.x)),y:Math.min(C===Ke.Down?z.bottom-z.height/2:z.bottom,Math.max(C===Ke.Down?z.top:z.top+z.height/2,b.y))},W=C===Ke.Right&&!N||C===Ke.Left&&!I,ie=C===Ke.Down&&!U||C===Ke.Up&&!D;if(W&&Z.x!==b.x){const ue=A.scrollLeft+_.x,fe=C===Ke.Right&&ue<=L.x||C===Ke.Left&&ue>=B.x;if(fe&&!_.y){A.scrollTo({left:ue,behavior:d});return}fe?w.x=A.scrollLeft-ue:w.x=C===Ke.Right?A.scrollLeft-L.x:A.scrollLeft-B.x,w.x&&A.scrollBy({left:-w.x,behavior:d});break}else if(ie&&Z.y!==b.y){const ue=A.scrollTop+_.y,fe=C===Ke.Down&&ue<=L.y||C===Ke.Up&&ue>=B.y;if(fe&&!_.x){A.scrollTo({top:ue,behavior:d});return}fe?w.y=A.scrollTop-ue:w.y=C===Ke.Down?A.scrollTop-L.y:A.scrollTop-B.y,w.y&&A.scrollBy({top:-w.y,behavior:d});break}}this.handleMove(e,ur(Oa(b,this.referenceCoordinates),w))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_h.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=eb,onActivation:r}=e,{active:l}=n;const{code:u}=t.nativeEvent;if(s.start.includes(u)){const d=l.activatorNode.current;return d&&t.target!==d?!1:(t.preventDefault(),r==null||r({event:t.nativeEvent}),!0)}return!1}}];function fv(t){return!!(t&&"distance"in t)}function hv(t){return!!(t&&"delay"in t)}class bh{constructor(e,n,s){var r;s===void 0&&(s=$R(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:l}=e,{target:u}=l;this.props=e,this.events=n,this.document=yr(u),this.documentListeners=new xa(this.document),this.listeners=new xa(s),this.windowListeners=new xa(Sn(u)),this.initialCoordinates=(r=Iu(l))!=null?r:pi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ni.Resize,this.handleCancel),this.windowListeners.add(ni.DragStart,dv),this.windowListeners.add(ni.VisibilityChange,this.handleCancel),this.windowListeners.add(ni.ContextMenu,dv),this.documentListeners.add(ni.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hv(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(fv(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:r}=this.props;r(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ni.Click,jR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ni.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:r,props:l}=this,{onMove:u,options:{activationConstraint:d}}=l;if(!r)return;const m=(n=Iu(e))!=null?n:pi,h=Oa(r,m);if(!s&&d){if(fv(d)){if(d.tolerance!=null&&If(h,d.tolerance))return this.handleCancel();if(If(h,d.distance))return this.handleStart()}if(hv(d)&&If(h,d.tolerance))return this.handleCancel();this.handlePending(d,h);return}e.cancelable&&e.preventDefault(),u(m)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ke.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const JR={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Sh extends bh{constructor(e){const{event:n}=e,s=yr(n.target);super(e,JR,s)}}Sh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const YR={move:{name:"mousemove"},end:{name:"mouseup"}};var Jf;(function(t){t[t.RightClick=2]="RightClick"})(Jf||(Jf={}));class KR extends bh{constructor(e){super(e,YR,yr(e.event.target))}}KR.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===Jf.RightClick?!1:(s==null||s({event:n}),!0)}}];const Mf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class WR extends bh{constructor(e){super(e,Mf)}static setup(){return window.addEventListener(Mf.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Mf.move.name,e)};function e(){}}}WR.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:r}=n;return r.length>1?!1:(s==null||s({event:n}),!0)}}];var Ta;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Ta||(Ta={}));var Du;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Du||(Du={}));function XR(t){let{acceleration:e,activator:n=Ta.Pointer,canScroll:s,draggingRect:r,enabled:l,interval:u=5,order:d=Du.TreeOrder,pointerCoordinates:m,scrollableAncestors:h,scrollableAncestorRects:y,delta:b,threshold:_}=t;const w=ZR({delta:b,disabled:!l}),[T,A]=cR(),C=M.useRef({x:0,y:0}),D=M.useRef({x:0,y:0}),N=M.useMemo(()=>{switch(n){case Ta.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case Ta.DraggableRect:return r}},[n,r,m]),I=M.useRef(null),U=M.useCallback(()=>{const B=I.current;if(!B)return;const z=C.current.x*D.current.x,Z=C.current.y*D.current.y;B.scrollBy(z,Z)},[]),L=M.useMemo(()=>d===Du.TreeOrder?[...h].reverse():h,[d,h]);M.useEffect(()=>{if(!l||!h.length||!N){A();return}for(const B of L){if((s==null?void 0:s(B))===!1)continue;const z=h.indexOf(B),Z=y[z];if(!Z)continue;const{direction:W,speed:ie}=GR(B,Z,N,e,_);for(const ue of["x","y"])w[ue][W[ue]]||(ie[ue]=0,W[ue]=0);if(ie.x>0||ie.y>0){A(),I.current=B,T(U,u),C.current=ie,D.current=W;return}}C.current={x:0,y:0},D.current={x:0,y:0},A()},[e,U,s,A,l,u,JSON.stringify(N),JSON.stringify(w),T,h,L,y,JSON.stringify(_)])}const QR={x:{[Wt.Backward]:!1,[Wt.Forward]:!1},y:{[Wt.Backward]:!1,[Wt.Forward]:!1}};function ZR(t){let{delta:e,disabled:n}=t;const s=Ru(e);return Ba(r=>{if(n||!s||!r)return QR;const l={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Wt.Backward]:r.x[Wt.Backward]||l.x===-1,[Wt.Forward]:r.x[Wt.Forward]||l.x===1},y:{[Wt.Backward]:r.y[Wt.Backward]||l.y===-1,[Wt.Forward]:r.y[Wt.Forward]||l.y===1}}},[n,e,s])}function e1(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return Ba(r=>{var l;return e==null?null:(l=s??r)!=null?l:null},[s,e])}function t1(t,e){return M.useMemo(()=>t.reduce((n,s)=>{const{sensor:r}=s,l=r.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...n,...l]},[]),[t,e])}var Pa;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Pa||(Pa={}));var Yf;(function(t){t.Optimized="optimized"})(Yf||(Yf={}));const mv=new Map;function n1(t,e){let{dragging:n,dependencies:s,config:r}=e;const[l,u]=M.useState(null),{frequency:d,measure:m,strategy:h}=r,y=M.useRef(t),b=C(),_=Ua(b),w=M.useCallback(function(D){D===void 0&&(D=[]),!_.current&&u(N=>N===null?D:N.concat(D.filter(I=>!N.includes(I))))},[_]),T=M.useRef(null),A=Ba(D=>{if(b&&!n)return mv;if(!D||D===mv||y.current!==t||l!=null){const N=new Map;for(let I of t){if(!I)continue;if(l&&l.length>0&&!l.includes(I.id)&&I.rect.current){N.set(I.id,I.rect.current);continue}const U=I.node.current,L=U?new vh(m(U),U):null;I.rect.current=L,L&&N.set(I.id,L)}return N}return D},[t,l,n,b,m]);return M.useEffect(()=>{y.current=t},[t]),M.useEffect(()=>{b||w()},[n,b]),M.useEffect(()=>{l&&l.length>0&&u(null)},[JSON.stringify(l)]),M.useEffect(()=>{b||typeof d!="number"||T.current!==null||(T.current=setTimeout(()=>{w(),T.current=null},d))},[d,b,w,...s]),{droppableRects:A,measureDroppableContainers:w,measuringScheduled:l!=null};function C(){switch(h){case Pa.Always:return!1;case Pa.BeforeDragging:return n;default:return!n}}}function wh(t,e){return Ba(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function i1(t,e){return wh(t,e)}function s1(t){let{callback:e,disabled:n}=t;const s=Ju(e),r=M.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(s)},[s,n]);return M.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function Wu(t){let{callback:e,disabled:n}=t;const s=Ju(e),r=M.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(s)},[n]);return M.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function o1(t){return new vh(vr(t),t)}function pv(t,e,n){e===void 0&&(e=o1);const[s,r]=M.useState(null);function l(){r(m=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=m??n)!=null?h:null}const y=e(t);return JSON.stringify(m)===JSON.stringify(y)?m:y})}const u=s1({callback(m){if(t)for(const h of m){const{type:y,target:b}=h;if(y==="childList"&&b instanceof HTMLElement&&b.contains(t)){l();break}}}}),d=Wu({callback:l});return mi(()=>{l(),t?(d==null||d.observe(t),u==null||u.observe(document.body,{childList:!0,subtree:!0})):(d==null||d.disconnect(),u==null||u.disconnect())},[t]),s}function r1(t){const e=wh(t);return j_(t,e)}const gv=[];function a1(t){const e=M.useRef(t),n=Ba(s=>t?s&&s!==gv&&t&&e.current&&t.parentNode===e.current.parentNode?s:Ku(t):gv,[t]);return M.useEffect(()=>{e.current=t},[t]),n}function l1(t){const[e,n]=M.useState(null),s=M.useRef(t),r=M.useCallback(l=>{const u=Rf(l.target);u&&n(d=>d?(d.set(u,Ff(u)),new Map(d)):null)},[]);return M.useEffect(()=>{const l=s.current;if(t!==l){u(l);const d=t.map(m=>{const h=Rf(m);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,Ff(h)]):null}).filter(m=>m!=null);n(d.length?new Map(d):null),s.current=t}return()=>{u(t),u(l)};function u(d){d.forEach(m=>{const h=Rf(m);h==null||h.removeEventListener("scroll",r)})}},[r,t]),M.useMemo(()=>t.length?e?Array.from(e.values()).reduce((l,u)=>ur(l,u),pi):Q_(t):pi,[t,e])}function yv(t,e){e===void 0&&(e=[]);const n=M.useRef(null);return M.useEffect(()=>{n.current=null},e),M.useEffect(()=>{const s=t!==pi;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?Oa(t,n.current):pi}function u1(t){M.useEffect(()=>{if(!Fu)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function c1(t,e){return M.useMemo(()=>t.reduce((n,s)=>{let{eventName:r,handler:l}=s;return n[r]=u=>{l(u,e)},n},{}),[t,e])}function tb(t){return M.useMemo(()=>t?OR(t):null,[t])}const vv=[];function d1(t,e){e===void 0&&(e=vr);const[n]=t,s=tb(n?Sn(n):null),[r,l]=M.useState(vv);function u(){l(()=>t.length?t.map(m=>W_(m)?s:new vh(e(m),m)):vv)}const d=Wu({callback:u});return mi(()=>{d==null||d.disconnect(),u(),t.forEach(m=>d==null?void 0:d.observe(m))},[t]),r}function nb(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return za(e)?e:t}function f1(t){let{measure:e}=t;const[n,s]=M.useState(null),r=M.useCallback(h=>{for(const{target:y}of h)if(za(y)){s(b=>{const _=e(y);return b?{...b,width:_.width,height:_.height}:_});break}},[e]),l=Wu({callback:r}),u=M.useCallback(h=>{const y=nb(h);l==null||l.disconnect(),y&&(l==null||l.observe(y)),s(y?e(y):null)},[e,l]),[d,m]=Nu(u);return M.useMemo(()=>({nodeRef:d,rect:n,setRef:m}),[n,d,m])}const h1=[{sensor:Sh,options:{}},{sensor:_h,options:{}}],m1={current:{}},_u={draggable:{measure:cv},droppable:{measure:cv,strategy:Pa.WhileDragging,frequency:Yf.Optimized},dragOverlay:{measure:vr}};class Ea extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const p1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ea,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_u,measureDroppableContainers:Mu,windowRect:null,measuringScheduled:!1},ib={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mu,draggableNodes:new Map,over:null,measureDroppableContainers:Mu},$a=M.createContext(ib),sb=M.createContext(p1);function g1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ea}}}function y1(t,e){switch(e.type){case Ft.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ft.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ft.DragEnd:case Ft.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ft.RegisterDroppable:{const{element:n}=e,{id:s}=n,r=new Ea(t.droppable.containers);return r.set(s,n),{...t,droppable:{...t.droppable,containers:r}}}case Ft.SetDroppableDisabled:{const{id:n,key:s,disabled:r}=e,l=t.droppable.containers.get(n);if(!l||s!==l.key)return t;const u=new Ea(t.droppable.containers);return u.set(n,{...l,disabled:r}),{...t,droppable:{...t.droppable,containers:u}}}case Ft.UnregisterDroppable:{const{id:n,key:s}=e,r=t.droppable.containers.get(n);if(!r||s!==r.key)return t;const l=new Ea(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function v1(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:r}=M.useContext($a),l=Ru(s),u=Ru(n==null?void 0:n.id);return M.useEffect(()=>{if(!e&&!s&&l&&u!=null){if(!Yu(l)||document.activeElement===l.target)return;const d=r.get(u);if(!d)return;const{activatorNode:m,node:h}=d;if(!m.current&&!h.current)return;requestAnimationFrame(()=>{for(const y of[m.current,h.current]){if(!y)continue;const b=hR(y);if(b){b.focus();break}}})}},[s,e,r,u,l]),null}function ob(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((r,l)=>l({transform:r,...s}),n):n}function _1(t){return M.useMemo(()=>({draggable:{..._u.draggable,...t==null?void 0:t.draggable},droppable:{..._u.droppable,...t==null?void 0:t.droppable},dragOverlay:{..._u.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function b1(t){let{activeNode:e,measure:n,initialRect:s,config:r=!0}=t;const l=M.useRef(!1),{x:u,y:d}=typeof r=="boolean"?{x:r,y:r}:r;mi(()=>{if(!u&&!d||!e){l.current=!1;return}if(l.current||!s)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const y=n(h),b=j_(y,s);if(u||(b.x=0),d||(b.y=0),l.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const _=J_(h);_&&_.scrollBy({top:b.y,left:b.x})}},[e,u,d,s,n])}const Xu=M.createContext({...pi,scaleX:1,scaleY:1});var Ds;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ds||(Ds={}));const S1=M.memo(function(e){var n,s,r,l;let{id:u,accessibility:d,autoScroll:m=!0,children:h,sensors:y=h1,collisionDetection:b=$_,measuring:_,modifiers:w,...T}=e;const A=M.useReducer(y1,void 0,g1),[C,D]=A,[N,I]=_R(),[U,L]=M.useState(Ds.Uninitialized),B=U===Ds.Initialized,{draggable:{active:z,nodes:Z,translate:W},droppable:{containers:ie}}=C,ue=z!=null?Z.get(z):null,fe=M.useRef({initial:null,translated:null}),_e=M.useMemo(()=>{var St;return z!=null?{id:z,data:(St=ue==null?void 0:ue.data)!=null?St:m1,rect:fe}:null},[z,ue]),Ce=M.useRef(null),[qe,J]=M.useState(null),[ee,ae]=M.useState(null),be=Ua(T,Object.values(T)),de=Va("DndDescribedBy",u),k=M.useMemo(()=>ie.getEnabled(),[ie]),G=_1(_),{droppableRects:oe,measureDroppableContainers:le,measuringScheduled:K}=n1(k,{dragging:B,dependencies:[W.x,W.y],config:G.droppable}),Q=e1(Z,z),ge=M.useMemo(()=>ee?Iu(ee):null,[ee]),Ae=Ci(),ye=i1(Q,G.draggable.measure);b1({activeNode:z!=null?Z.get(z):null,config:Ae.layoutShiftCompensation,initialRect:ye,measure:G.draggable.measure});const Ee=pv(Q,G.draggable.measure,ye),He=pv(Q?Q.parentElement:null),Ne=M.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:Z,draggingNode:null,draggingNodeRect:null,droppableContainers:ie,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),je=ie.getNodeFor((n=Ne.current.over)==null?void 0:n.id),ke=f1({measure:G.dragOverlay.measure}),pe=(s=ke.nodeRef.current)!=null?s:Q,ze=B?(r=ke.rect)!=null?r:Ee:null,Gt=!!(ke.nodeRef.current&&ke.rect),Zt=r1(Gt?null:Ee),pt=tb(pe?Sn(pe):null),ht=a1(B?je??Q:null),It=d1(ht),Ht=ob(w,{transform:{x:W.x-Zt.x,y:W.y-Zt.y,scaleX:1,scaleY:1},activatorEvent:ee,active:_e,activeNodeRect:Ee,containerNodeRect:He,draggingNodeRect:ze,over:Ne.current.over,overlayNodeRect:ke.rect,scrollableAncestors:ht,scrollableAncestorRects:It,windowRect:pt}),re=ge?ur(ge,W):null,he=l1(ht),zt=yv(he),Mt=yv(he,[Ee]),Et=ur(Ht,zt),bt=ze?DR(ze,Ht):null,mn=_e&&bt?b({active:_e,collisionRect:bt,droppableRects:oe,droppableContainers:k,pointerCoordinates:re}):null,Ai=V_(mn,"id"),[at,Mn]=M.useState(null),Dn=Gt?Ht:ur(Ht,Mt),Jt=IR(Dn,(l=at==null?void 0:at.rect)!=null?l:null,Ee),wn=M.useRef(null),Bt=M.useCallback((St,nt)=>{let{sensor:Dt,options:en}=nt;if(Ce.current==null)return;const un=Z.get(Ce.current);if(!un)return;const Vt=St.nativeEvent,cn=new Dt({active:Ce.current,activeNode:un,event:Vt,options:en,context:Ne,onAbort(At){if(!Z.get(At))return;const{onDragAbort:pn}=be.current,it={id:At};pn==null||pn(it),N({type:"onDragAbort",event:it})},onPending(At,kn,pn,it){if(!Z.get(At))return;const{onDragPending:oi}=be.current,Un={id:At,constraint:kn,initialCoordinates:pn,offset:it};oi==null||oi(Un),N({type:"onDragPending",event:Un})},onStart(At){const kn=Ce.current;if(kn==null)return;const pn=Z.get(kn);if(!pn)return;const{onDragStart:it}=be.current,Yt={activatorEvent:Vt,active:{id:kn,data:pn.data,rect:fe}};_a.unstable_batchedUpdates(()=>{it==null||it(Yt),L(Ds.Initializing),D({type:Ft.DragStart,initialCoordinates:At,active:kn}),N({type:"onDragStart",event:Yt}),J(wn.current),ae(Vt)})},onMove(At){D({type:Ft.DragMove,coordinates:At})},onEnd:xn(Ft.DragEnd),onCancel:xn(Ft.DragCancel)});wn.current=cn;function xn(At){return async function(){const{active:pn,collisions:it,over:Yt,scrollAdjustedTranslate:oi}=Ne.current;let Un=null;if(pn&&oi){const{cancelDrop:yi}=be.current;Un={activatorEvent:Vt,active:pn,collisions:it,delta:oi,over:Yt},At===Ft.DragEnd&&typeof yi=="function"&&await Promise.resolve(yi(Un))&&(At=Ft.DragCancel)}Ce.current=null,_a.unstable_batchedUpdates(()=>{D({type:At}),L(Ds.Uninitialized),Mn(null),J(null),ae(null),wn.current=null;const yi=At===Ft.DragEnd?"onDragEnd":"onDragCancel";if(Un){const Tn=be.current[yi];Tn==null||Tn(Un),N({type:yi,event:Un})}})}}},[Z]),wr=M.useCallback((St,nt)=>(Dt,en)=>{const un=Dt.nativeEvent,Vt=Z.get(en);if(Ce.current!==null||!Vt||un.dndKit||un.defaultPrevented)return;const cn={active:Vt};St(Dt,nt.options,cn)===!0&&(un.dndKit={capturedBy:nt.sensor},Ce.current=en,Bt(Dt,nt))},[Z,Bt]),fo=t1(y,wr);u1(y),mi(()=>{Ee&&U===Ds.Initializing&&L(Ds.Initialized)},[Ee,U]),M.useEffect(()=>{const{onDragMove:St}=be.current,{active:nt,activatorEvent:Dt,collisions:en,over:un}=Ne.current;if(!nt||!Dt)return;const Vt={active:nt,activatorEvent:Dt,collisions:en,delta:{x:Et.x,y:Et.y},over:un};_a.unstable_batchedUpdates(()=>{St==null||St(Vt),N({type:"onDragMove",event:Vt})})},[Et.x,Et.y]),M.useEffect(()=>{const{active:St,activatorEvent:nt,collisions:Dt,droppableContainers:en,scrollAdjustedTranslate:un}=Ne.current;if(!St||Ce.current==null||!nt||!un)return;const{onDragOver:Vt}=be.current,cn=en.get(Ai),xn=cn&&cn.rect.current?{id:cn.id,rect:cn.rect.current,data:cn.data,disabled:cn.disabled}:null,At={active:St,activatorEvent:nt,collisions:Dt,delta:{x:un.x,y:un.y},over:xn};_a.unstable_batchedUpdates(()=>{Mn(xn),Vt==null||Vt(At),N({type:"onDragOver",event:At})})},[Ai]),mi(()=>{Ne.current={activatorEvent:ee,active:_e,activeNode:Q,collisionRect:bt,collisions:mn,droppableRects:oe,draggableNodes:Z,draggingNode:pe,draggingNodeRect:ze,droppableContainers:ie,over:at,scrollableAncestors:ht,scrollAdjustedTranslate:Et},fe.current={initial:ze,translated:bt}},[_e,Q,mn,bt,Z,pe,ze,oe,ie,at,ht,Et]),XR({...Ae,delta:W,draggingRect:bt,pointerCoordinates:re,scrollableAncestors:ht,scrollableAncestorRects:It});const xr=M.useMemo(()=>({active:_e,activeNode:Q,activeNodeRect:Ee,activatorEvent:ee,collisions:mn,containerNodeRect:He,dragOverlay:ke,draggableNodes:Z,droppableContainers:ie,droppableRects:oe,over:at,measureDroppableContainers:le,scrollableAncestors:ht,scrollableAncestorRects:It,measuringConfiguration:G,measuringScheduled:K,windowRect:pt}),[_e,Q,Ee,ee,mn,He,ke,Z,ie,oe,at,le,ht,It,G,K,pt]),ts=M.useMemo(()=>({activatorEvent:ee,activators:fo,active:_e,activeNodeRect:Ee,ariaDescribedById:{draggable:de},dispatch:D,draggableNodes:Z,over:at,measureDroppableContainers:le}),[ee,fo,_e,Ee,D,de,Z,at,le]);return _t.createElement(B_.Provider,{value:I},_t.createElement($a.Provider,{value:ts},_t.createElement(sb.Provider,{value:xr},_t.createElement(Xu.Provider,{value:Jt},h)),_t.createElement(v1,{disabled:(d==null?void 0:d.restoreFocus)===!1})),_t.createElement(wR,{...d,hiddenTextDescribedById:de}));function Ci(){const St=(qe==null?void 0:qe.autoScrollEnabled)===!1,nt=typeof m=="object"?m.enabled===!1:m===!1,Dt=B&&!St&&!nt;return typeof m=="object"?{...m,enabled:Dt}:{enabled:Dt}}}),w1=M.createContext(null),_v="button",x1="Draggable";function T1(t){let{id:e,data:n,disabled:s=!1,attributes:r}=t;const l=Va(x1),{activators:u,activatorEvent:d,active:m,activeNodeRect:h,ariaDescribedById:y,draggableNodes:b,over:_}=M.useContext($a),{role:w=_v,roleDescription:T="draggable",tabIndex:A=0}=r??{},C=(m==null?void 0:m.id)===e,D=M.useContext(C?Xu:w1),[N,I]=Nu(),[U,L]=Nu(),B=c1(u,e),z=Ua(n);mi(()=>(b.set(e,{id:e,key:l,node:N,activatorNode:U,data:z}),()=>{const W=b.get(e);W&&W.key===l&&b.delete(e)}),[b,e]);const Z=M.useMemo(()=>({role:w,tabIndex:A,"aria-disabled":s,"aria-pressed":C&&w===_v?!0:void 0,"aria-roledescription":T,"aria-describedby":y.draggable}),[s,w,A,C,T,y.draggable]);return{active:m,activatorEvent:d,activeNodeRect:h,attributes:Z,isDragging:C,listeners:s?void 0:B,node:N,over:_,setNodeRef:I,setActivatorNodeRef:L,transform:D}}function rb(){return M.useContext(sb)}const E1="Droppable",A1={timeout:25};function C1(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:r}=t;const l=Va(E1),{active:u,dispatch:d,over:m,measureDroppableContainers:h}=M.useContext($a),y=M.useRef({disabled:n}),b=M.useRef(!1),_=M.useRef(null),w=M.useRef(null),{disabled:T,updateMeasurementsFor:A,timeout:C}={...A1,...r},D=Ua(A??s),N=M.useCallback(()=>{if(!b.current){b.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{h(Array.isArray(D.current)?D.current:[D.current]),w.current=null},C)},[C]),I=Wu({callback:N,disabled:T||!u}),U=M.useCallback((Z,W)=>{I&&(W&&(I.unobserve(W),b.current=!1),Z&&I.observe(Z))},[I]),[L,B]=Nu(U),z=Ua(e);return M.useEffect(()=>{!I||!L.current||(I.disconnect(),b.current=!1,I.observe(L.current))},[L,I]),M.useEffect(()=>(d({type:Ft.RegisterDroppable,element:{id:s,key:l,disabled:n,node:L,rect:_,data:z}}),()=>d({type:Ft.UnregisterDroppable,key:l,id:s})),[s]),M.useEffect(()=>{n!==y.current.disabled&&(d({type:Ft.SetDroppableDisabled,id:s,key:l,disabled:n}),y.current.disabled=n)},[s,l,n,d]),{active:u,rect:_,isOver:(m==null?void 0:m.id)===s,node:L,over:m,setNodeRef:B}}function N1(t){let{animation:e,children:n}=t;const[s,r]=M.useState(null),[l,u]=M.useState(null),d=Ru(n);return!n&&!s&&d&&r(d),mi(()=>{if(!l)return;const m=s==null?void 0:s.key,h=s==null?void 0:s.props.id;if(m==null||h==null){r(null);return}Promise.resolve(e(h,l)).then(()=>{r(null)})},[e,s,l]),_t.createElement(_t.Fragment,null,n,s?M.cloneElement(s,{ref:u}):null)}const R1={x:0,y:0,scaleX:1,scaleY:1};function I1(t){let{children:e}=t;return _t.createElement($a.Provider,{value:ib},_t.createElement(Xu.Provider,{value:R1},e))}const M1={position:"fixed",touchAction:"none"},D1=t=>Yu(t)?"transform 250ms ease":void 0,k1=M.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:r,children:l,className:u,rect:d,style:m,transform:h,transition:y=D1}=t;if(!d)return null;const b=r?h:{...h,scaleX:1,scaleY:1},_={...M1,width:d.width,height:d.height,top:d.top,left:d.left,transform:Wi.Transform.toString(b),transformOrigin:r&&s?ER(s,d):void 0,transition:typeof y=="function"?y(s):y,...m};return _t.createElement(n,{className:u,style:_,ref:e},l)}),ab=t=>e=>{let{active:n,dragOverlay:s}=e;const r={},{styles:l,className:u}=t;if(l!=null&&l.active)for(const[d,m]of Object.entries(l.active))m!==void 0&&(r[d]=n.node.style.getPropertyValue(d),n.node.style.setProperty(d,m));if(l!=null&&l.dragOverlay)for(const[d,m]of Object.entries(l.dragOverlay))m!==void 0&&s.node.style.setProperty(d,m);return u!=null&&u.active&&n.node.classList.add(u.active),u!=null&&u.dragOverlay&&s.node.classList.add(u.dragOverlay),function(){for(const[m,h]of Object.entries(r))n.node.style.setProperty(m,h);u!=null&&u.active&&n.node.classList.remove(u.active)}},U1=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Wi.Transform.toString(e)},{transform:Wi.Transform.toString(n)}]},O1={duration:250,easing:"ease",keyframes:U1,sideEffects:ab({styles:{active:{opacity:"0"}}})};function P1(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:r}=t;return Ju((l,u)=>{if(e===null)return;const d=n.get(l);if(!d)return;const m=d.node.current;if(!m)return;const h=nb(u);if(!h)return;const{transform:y}=Sn(u).getComputedStyle(u),b=F_(y);if(!b)return;const _=typeof e=="function"?e:L1(e);return Z_(m,r.draggable.measure),_({active:{id:l,data:d.data,node:m,rect:r.draggable.measure(m)},draggableNodes:n,dragOverlay:{node:u,rect:r.dragOverlay.measure(h)},droppableContainers:s,measuringConfiguration:r,transform:b})})}function L1(t){const{duration:e,easing:n,sideEffects:s,keyframes:r}={...O1,...t};return l=>{let{active:u,dragOverlay:d,transform:m,...h}=l;if(!e)return;const y={x:d.rect.left-u.rect.left,y:d.rect.top-u.rect.top},b={scaleX:m.scaleX!==1?u.rect.width*m.scaleX/d.rect.width:1,scaleY:m.scaleY!==1?u.rect.height*m.scaleY/d.rect.height:1},_={x:m.x-y.x,y:m.y-y.y,...b},w=r({...h,active:u,dragOverlay:d,transform:{initial:m,final:_}}),[T]=w,A=w[w.length-1];if(JSON.stringify(T)===JSON.stringify(A))return;const C=s==null?void 0:s({active:u,dragOverlay:d,...h}),D=d.node.animate(w,{duration:e,easing:n,fill:"forwards"});return new Promise(N=>{D.onfinish=()=>{C==null||C(),N()}})}}let bv=0;function q1(t){return M.useMemo(()=>{if(t!=null)return bv++,bv},[t])}const G1=_t.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:r,transition:l,modifiers:u,wrapperElement:d="div",className:m,zIndex:h=999}=t;const{activatorEvent:y,active:b,activeNodeRect:_,containerNodeRect:w,draggableNodes:T,droppableContainers:A,dragOverlay:C,over:D,measuringConfiguration:N,scrollableAncestors:I,scrollableAncestorRects:U,windowRect:L}=rb(),B=M.useContext(Xu),z=q1(b==null?void 0:b.id),Z=ob(u,{activatorEvent:y,active:b,activeNodeRect:_,containerNodeRect:w,draggingNodeRect:C.rect,over:D,overlayNodeRect:C.rect,scrollableAncestors:I,scrollableAncestorRects:U,transform:B,windowRect:L}),W=wh(_),ie=P1({config:s,draggableNodes:T,droppableContainers:A,measuringConfiguration:N}),ue=W?C.setRef:void 0;return _t.createElement(I1,null,_t.createElement(N1,{animation:ie},b&&z?_t.createElement(k1,{key:z,id:b.id,ref:ue,as:d,activatorEvent:y,adjustScale:e,className:m,transition:l,rect:W,style:{zIndex:h,...r},transform:Z},n):null))});function xh(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function H1(t,e){return t.reduce((n,s,r)=>{const l=e.get(s);return l&&(n[r]=l),n},Array(t.length))}function du(t){return t!==null&&t>=0}function z1(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function B1(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const fu={scaleX:1,scaleY:1},V1=t=>{var e;let{rects:n,activeNodeRect:s,activeIndex:r,overIndex:l,index:u}=t;const d=(e=n[r])!=null?e:s;if(!d)return null;const m=$1(n,u,r);if(u===r){const h=n[l];return h?{x:r<l?h.left+h.width-(d.left+d.width):h.left-d.left,y:0,...fu}:null}return u>r&&u<=l?{x:-d.width-m,y:0,...fu}:u<r&&u>=l?{x:d.width+m,y:0,...fu}:{x:0,y:0,...fu}};function $1(t,e,n){const s=t[e],r=t[e-1],l=t[e+1];return!s||!r&&!l?0:n<e?r?s.left-(r.left+r.width):l.left-(s.left+s.width):l?l.left-(s.left+s.width):s.left-(r.left+r.width)}const lb=t=>{let{rects:e,activeIndex:n,overIndex:s,index:r}=t;const l=xh(e,s,n),u=e[r],d=l[r];return!d||!u?null:{x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height}},hu={scaleX:1,scaleY:1},j1=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:r,rects:l,overIndex:u}=t;const d=(e=l[n])!=null?e:s;if(!d)return null;if(r===n){const h=l[u];return h?{x:0,y:n<u?h.top+h.height-(d.top+d.height):h.top-d.top,...hu}:null}const m=F1(l,r,n);return r>n&&r<=u?{x:0,y:-d.height-m,...hu}:r<n&&r>=u?{x:0,y:d.height+m,...hu}:{x:0,y:0,...hu}};function F1(t,e,n){const s=t[e],r=t[e-1],l=t[e+1];return s?n<e?r?s.top-(r.top+r.height):l?l.top-(s.top+s.height):0:l?l.top-(s.top+s.height):r?s.top-(r.top+r.height):0:0}const ub="Sortable",cb=_t.createContext({activeIndex:-1,containerId:ub,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:lb,disabled:{draggable:!1,droppable:!1}});function db(t){let{children:e,id:n,items:s,strategy:r=lb,disabled:l=!1}=t;const{active:u,dragOverlay:d,droppableRects:m,over:h,measureDroppableContainers:y}=rb(),b=Va(ub,n),_=d.rect!==null,w=M.useMemo(()=>s.map(B=>typeof B=="object"&&"id"in B?B.id:B),[s]),T=u!=null,A=u?w.indexOf(u.id):-1,C=h?w.indexOf(h.id):-1,D=M.useRef(w),N=!z1(w,D.current),I=C!==-1&&A===-1||N,U=B1(l);mi(()=>{N&&T&&y(w)},[N,w,T,y]),M.useEffect(()=>{D.current=w},[w]);const L=M.useMemo(()=>({activeIndex:A,containerId:b,disabled:U,disableTransforms:I,items:w,overIndex:C,useDragOverlay:_,sortedRects:H1(w,m),strategy:r}),[A,b,U.draggable,U.droppable,I,w,C,m,_,r]);return _t.createElement(cb.Provider,{value:L},e)}const J1=t=>{let{id:e,items:n,activeIndex:s,overIndex:r}=t;return xh(n,s,r).indexOf(e)},Y1=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:r,items:l,newIndex:u,previousItems:d,previousContainerId:m,transition:h}=t;return!h||!s||d!==l&&r===u?!1:n?!0:u!==r&&e===m},K1={duration:200,easing:"ease"},fb="transform",W1=Wi.Transition.toString({property:fb,duration:0,easing:"linear"}),X1={roleDescription:"sortable"};function Q1(t){let{disabled:e,index:n,node:s,rect:r}=t;const[l,u]=M.useState(null),d=M.useRef(n);return mi(()=>{if(!e&&n!==d.current&&s.current){const m=r.current;if(m){const h=vr(s.current,{ignoreTransform:!0}),y={x:m.left-h.left,y:m.top-h.top,scaleX:m.width/h.width,scaleY:m.height/h.height};(y.x||y.y)&&u(y)}}n!==d.current&&(d.current=n)},[e,n,s,r]),M.useEffect(()=>{l&&u(null)},[l]),l}function hb(t){let{animateLayoutChanges:e=Y1,attributes:n,disabled:s,data:r,getNewIndex:l=J1,id:u,strategy:d,resizeObserverConfig:m,transition:h=K1}=t;const{items:y,containerId:b,activeIndex:_,disabled:w,disableTransforms:T,sortedRects:A,overIndex:C,useDragOverlay:D,strategy:N}=M.useContext(cb),I=Z1(s,w),U=y.indexOf(u),L=M.useMemo(()=>({sortable:{containerId:b,index:U,items:y},...r}),[b,r,U,y]),B=M.useMemo(()=>y.slice(y.indexOf(u)),[y,u]),{rect:z,node:Z,isOver:W,setNodeRef:ie}=C1({id:u,data:L,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:B,...m}}),{active:ue,activatorEvent:fe,activeNodeRect:_e,attributes:Ce,setNodeRef:qe,listeners:J,isDragging:ee,over:ae,setActivatorNodeRef:be,transform:de}=T1({id:u,data:L,attributes:{...X1,...n},disabled:I.draggable}),k=uR(ie,qe),G=!!ue,oe=G&&!T&&du(_)&&du(C),le=!D&&ee,K=le&&oe?de:null,ge=oe?K??(d??N)({rects:A,activeNodeRect:_e,activeIndex:_,overIndex:C,index:U}):null,Ae=du(_)&&du(C)?l({id:u,items:y,activeIndex:_,overIndex:C}):U,ye=ue==null?void 0:ue.id,Ee=M.useRef({activeId:ye,items:y,newIndex:Ae,containerId:b}),He=y!==Ee.current.items,Ne=e({active:ue,containerId:b,isDragging:ee,isSorting:G,id:u,index:U,items:y,newIndex:Ee.current.newIndex,previousItems:Ee.current.items,previousContainerId:Ee.current.containerId,transition:h,wasDragging:Ee.current.activeId!=null}),je=Q1({disabled:!Ne,index:U,node:Z,rect:z});return M.useEffect(()=>{G&&Ee.current.newIndex!==Ae&&(Ee.current.newIndex=Ae),b!==Ee.current.containerId&&(Ee.current.containerId=b),y!==Ee.current.items&&(Ee.current.items=y)},[G,Ae,b,y]),M.useEffect(()=>{if(ye===Ee.current.activeId)return;if(ye!=null&&Ee.current.activeId==null){Ee.current.activeId=ye;return}const pe=setTimeout(()=>{Ee.current.activeId=ye},50);return()=>clearTimeout(pe)},[ye]),{active:ue,activeIndex:_,attributes:Ce,data:L,rect:z,index:U,newIndex:Ae,items:y,isOver:W,isSorting:G,isDragging:ee,listeners:J,node:Z,overIndex:C,over:ae,setNodeRef:k,setActivatorNodeRef:be,setDroppableNodeRef:ie,setDraggableNodeRef:qe,transform:je??ge,transition:ke()};function ke(){if(je||He&&Ee.current.newIndex===U)return W1;if(!(le&&!Yu(fe)||!h)&&(G||Ne))return Wi.Transition.toString({...h,property:fb})}}function Z1(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(s=t==null?void 0:t.droppable)!=null?s:e.droppable}}function ku(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const eI=[Ke.Down,Ke.Right,Ke.Up,Ke.Left],tI=(t,e)=>{let{context:{active:n,collisionRect:s,droppableRects:r,droppableContainers:l,over:u,scrollableAncestors:d}}=e;if(eI.includes(t.code)){if(t.preventDefault(),!n||!s)return;const m=[];l.getEnabled().forEach(b=>{if(!b||b!=null&&b.disabled)return;const _=r.get(b.id);if(_)switch(t.code){case Ke.Down:s.top<_.top&&m.push(b);break;case Ke.Up:s.top>_.top&&m.push(b);break;case Ke.Left:s.left>_.left&&m.push(b);break;case Ke.Right:s.left<_.left&&m.push(b);break}});const h=NR({collisionRect:s,droppableRects:r,droppableContainers:m});let y=V_(h,"id");if(y===(u==null?void 0:u.id)&&h.length>1&&(y=h[1].id),y!=null){const b=l.get(n.id),_=l.get(y),w=_?r.get(_.id):null,T=_==null?void 0:_.node.current;if(T&&w&&b&&_){const C=Ku(T).some((B,z)=>d[z]!==B),D=mb(b,_),N=nI(b,_),I=C||!D?{x:0,y:0}:{x:N?s.width-w.width:0,y:N?s.height-w.height:0},U={x:w.left,y:w.top};return I.x&&I.y?U:Oa(U,I)}}}};function mb(t,e){return!ku(t)||!ku(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function nI(t,e){return!ku(t)||!ku(e)||!mb(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const pb=({checked:t,onClick:e})=>S.jsx("div",{className:`w-4 h-4 mt-0.5 rounded-full border flex-shrink-0 cursor-pointer transition-all flex items-center justify-center
      ${t?"bg-[#1a73e8] border-[#1a73e8]":"border-[#5f6368] hover:bg-[#e8eaed]"}`,onClick:e,children:t&&S.jsx(fh,{size:10,className:"text-white stroke-[3px]"})}),iI=({todo:t,isEditing:e,editingText:n,setEditingText:s,startEditing:r,saveTodo:l,cancelEditing:u,onToggle:d,onOpenMenu:m,getDueLabel:h})=>{const{attributes:y,listeners:b,setNodeRef:_,transform:w,transition:T,isDragging:A}=hb({id:t.id,data:{type:"Todo",todo:t},disabled:e}),C={transform:Wi.Translate.toString(w),transition:T},D=h(t.dueDate);return A?S.jsx("div",{ref:_,style:C,className:"opacity-40 bg-gray-50 border border-dashed border-gray-300 rounded px-3 py-2.5 h-[50px] mb-1"}):S.jsxs("div",{ref:_,style:C,className:`group relative px-3 py-2.5 rounded hover:bg-[#f5f5f5] hover:shadow-sm transition-all flex items-start gap-3 cursor-pointer ${e?"bg-white shadow ring-2 ring-[#1a73e8] z-10":""}`,onClick:()=>!e&&r(t),...y,...b,children:[S.jsx(pb,{checked:t.completed,onClick:N=>{N.stopPropagation(),d(t.id)}}),S.jsxs("div",{className:"flex-1 min-w-0 ml-1",children:[e?S.jsx("input",{autoFocus:!0,value:n,onChange:N=>s(N.target.value),onBlur:l,onKeyDown:N=>{N.key==="Enter"&&l(),N.key==="Escape"&&u()},className:"w-full text-[14px] text-[#1f1f1f] bg-transparent border-b border-[#1a73e8] focus:outline-none",onPointerDown:N=>N.stopPropagation()}):S.jsx("p",{className:"text-[14px] text-[#1f1f1f] leading-snug break-words",children:t.text}),D&&S.jsx("span",{className:"block mt-1 text-[11px] text-[#d93025] font-normal",children:D})]}),!e&&S.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-[#e0e0e0] rounded-full text-[#5f6368] transition-all",onClick:N=>{N.stopPropagation(),m(N,t)},onPointerDown:N=>N.stopPropagation(),children:S.jsx(fr,{size:16})})]})},sI=({list:t,lists:e,todos:n,editingListId:s,editingListTitle:r,setEditingListTitle:l,saveListTitle:u,setEditingListId:d,startEditingList:m,handleMoveTodo:h,onAddTodo:y,onUpdateTodo:b,onToggleTodo:_,onDeleteTodo:w,editingTodoId:T,editingTodoText:A,setEditingTodoText:C,setEditingTodoId:D,startEditingTodo:N,saveTodoText:I,setContextMenu:U,setListMenu:L,getDueLabel:B})=>{const{attributes:z,listeners:Z,setNodeRef:W,transform:ie,transition:ue,isDragging:fe}=hb({id:t.id,data:{type:"List",list:t},disabled:s===t.id}),_e={transform:Wi.Translate.toString(ie),transition:ue},Ce=n.filter(G=>G.listId===t.id),qe=Ce.filter(G=>!G.completed),J=Ce.filter(G=>G.completed),[ee,ae]=M.useState(""),[be,de]=M.useState(!1),k=()=>{ee.trim()&&(y(ee.trim(),t.id),ae(""))};return fe?S.jsx("div",{ref:W,style:_e,className:"min-w-[300px] w-[300px] h-[400px] bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl opacity-50"}):S.jsxs("div",{ref:W,style:_e,className:"min-w-[300px] w-[300px] flex flex-col h-fit max-h-full bg-white rounded-xl shadow-[0_1px_3px_rgba(0,0,0,0.12)] border border-[#e9e9e8]",children:[S.jsxs("div",{className:"flex items-center justify-between px-4 py-3 pt-4 flex-shrink-0 cursor-grab active:cursor-grabbing",...z,...Z,children:[s===t.id?S.jsx("input",{autoFocus:!0,value:r,onChange:G=>l(G.target.value),onBlur:u,onKeyDown:G=>{G.key==="Enter"&&u(),G.key==="Escape"&&d(null)},className:"font-normal text-lg text-[#1f1f1f] bg-transparent border-b-2 border-[#1a73e8] focus:outline-none w-full",onPointerDown:G=>G.stopPropagation()}):S.jsx("h3",{className:"font-normal text-lg text-[#1f1f1f] cursor-text",onClick:G=>{G.stopPropagation(),m(t)},onPointerDown:G=>G.stopPropagation(),title:"  ",children:t.title}),S.jsx("div",{className:"flex items-center gap-1",children:S.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#f5f5f5] text-[#5f6368]",onPointerDown:G=>G.stopPropagation(),onClick:G=>{G.stopPropagation(),L({id:t.id,x:G.clientX,y:G.clientY})},children:S.jsx(fr,{size:18})})})]}),S.jsx("div",{className:"px-2 mb-1 flex-shrink-0",children:ee!==""?S.jsx("div",{className:"mx-2 mb-2 bg-white rounded shadow-sm border border-gray-200",children:S.jsx("input",{autoFocus:!0,value:ee,onChange:G=>ae(G.target.value),onKeyDown:G=>{G.key==="Enter"&&k(),G.key==="Escape"&&ae("")},placeholder:"  ",className:"w-full px-3 py-3 text-sm focus:outline-none bg-transparent",onPointerDown:G=>G.stopPropagation()})}):S.jsxs("button",{onClick:()=>ae(" "),className:"w-full text-left px-2 py-2 text-[13px] text-[#1a73e8] font-normal rounded hover:bg-[#ebf5fc] transition-colors flex items-center gap-2",children:[S.jsx(uo,{size:18}),"  "]})}),S.jsxs("div",{className:"flex-1 overflow-y-auto px-2 pb-4 min-h-[50px]",children:[S.jsx(db,{id:t.id,items:qe.map(G=>G.id),strategy:j1,children:S.jsx("div",{className:"space-y-0.5 min-h-[10px]",children:qe.map(G=>S.jsx(iI,{todo:G,isEditing:T===G.id,editingText:A,setEditingText:C,startEditing:N,saveTodo:I,cancelEditing:()=>{D(null),C("")},onToggle:_,onOpenMenu:(oe,le)=>{U({id:le.id,x:oe.clientX,y:oe.clientY})},getDueLabel:B},G.id))})}),J.length>0&&S.jsxs("div",{className:"mt-4 pt-2 border-t border-transparent",children:[S.jsxs("button",{onClick:()=>de(!be),className:"flex items-center gap-2 text-sm font-normal text-[#5f6368] hover:bg-[#f5f5f5] px-2 py-1.5 rounded transition-colors w-full mb-1",children:[S.jsx(qa,{size:16,className:`transition-transform duration-200 ${be?"rotate-90":""}`}),S.jsxs("span",{children:[" (",J.length,")"]})]}),be&&S.jsx("div",{className:"space-y-0.5",children:J.map(G=>S.jsxs("div",{className:"group flex items-start gap-3 px-3 py-2.5 rounded hover:bg-[#f5f5f5]",children:[S.jsx("div",{className:"w-4 h-4 mt-0.5 rounded-full bg-[#1a73e8] border border-[#1a73e8] flex-shrink-0 flex items-center justify-center cursor-pointer",onClick:()=>_(G.id),children:S.jsx(fh,{size:10,className:"text-white stroke-[3px]"})}),S.jsx("span",{className:"text-[14px] text-[#5f6368] line-through flex-1 decoration-[#5f6368]",children:G.text}),S.jsx("button",{className:"opacity-0 group-hover:opacity-100 text-[#5f6368] hover:text-[#d93025] p-1",onClick:()=>w(G.id),children:S.jsx(Yi,{size:14})})]},G.id))})]})]})]})},oI=({todos:t,lists:e,onAddList:n,onUpdateList:s,onUpdateListOrder:r,onAddTodo:l,onUpdateTodo:u,onToggleTodo:d,onDeleteTodo:m,onDeleteList:h})=>{var ke;const[y,b]=M.useState(null),[_,w]=M.useState(""),[T,A]=M.useState(null),[C,D]=M.useState(""),[N,I]=M.useState(null),[U,L]=M.useState(null),B=M.useRef(null),z=M.useRef(null),[Z,W]=M.useState(null),[ie,ue]=M.useState(null),fe=[...e].sort((pe,ze)=>pe.order-ze.order),_e=M.useRef(null),[Ce,qe]=M.useState(!1),[J,ee]=M.useState({x:0,y:0}),[ae,be]=M.useState({left:0,top:0}),de=xR(lv(Sh,{activationConstraint:{distance:5}}),lv(_h,{coordinateGetter:tI}));M.useEffect(()=>{const pe=ze=>{B.current&&!B.current.contains(ze.target)&&I(null),z.current&&!z.current.contains(ze.target)&&L(null)};return document.addEventListener("mousedown",pe),()=>document.removeEventListener("mousedown",pe)},[]);const k=pe=>{pe.target===_e.current&&(qe(!0),ee({x:pe.clientX,y:pe.clientY}),_e.current&&be({left:_e.current.scrollLeft,top:_e.current.scrollTop}),document.body.style.cursor="grabbing")},G=pe=>{if(!Ce||!_e.current)return;const ze=pe.clientX-J.x,Gt=pe.clientY-J.y;_e.current.scrollLeft=ae.left-ze,_e.current.scrollTop=ae.top-Gt},oe=()=>{qe(!1),document.body.style.cursor=""},le=pe=>{b(pe.id),w(pe.title)},K=()=>{y&&_.trim()&&s(y,{title:_.trim()}),b(null),w("")},Q=pe=>{A(pe.id),D(pe.text),I(null)},ge=()=>{T&&u&&C.trim()&&u(T,{text:C.trim()}),A(null),D("")},Ae=(pe,ze)=>{u&&u(pe,{listId:ze}),I(null)},ye=pe=>{if(!pe)return null;const ze=Ki(pe);return w_(ze)?"":qE(ze)?"":Vn(ze,"M d (E)",{locale:mr})},Ee=pe=>{var ze;W(pe.active.id),ue(((ze=pe.active.data.current)==null?void 0:ze.type)||null)},He=pe=>{var Ht;const{active:ze,over:Gt}=pe;if(!Gt||((Ht=ze.data.current)==null?void 0:Ht.type)!=="Todo")return;const Zt=ze.id,pt=Gt.id,ht=t.find(re=>re.id===Zt),It=t.find(re=>re.id===pt);if(ht){if(e.some(re=>re.id===pt)){ht.listId;return}It&&(ht.listId,It.listId)}},Ne=pe=>{var Ht,re;const{active:ze,over:Gt}=pe;if(W(null),ue(null),!Gt)return;const Zt=ze.id,pt=Gt.id;if(((Ht=ze.data.current)==null?void 0:Ht.type)==="List"&&((re=Gt.data.current)==null?void 0:re.type)==="List"){if(Zt!==pt){const he=e.findIndex(bt=>bt.id===Zt),zt=e.findIndex(bt=>bt.id===pt),Et=xh(e,he,zt).map((bt,mn)=>({...bt,order:mn}));r&&r(Et)}return}const ht=t.find(he=>he.id===Zt);if(!ht)return;if(e.some(he=>he.id===pt)){ht.listId!==pt&&u&&u(Zt,{listId:pt});return}const It=t.find(he=>he.id===pt);It&&u&&ht.listId!==It.listId&&u(Zt,{listId:It.listId})},je={sideEffects:ab({styles:{active:{opacity:"0.5"}}})};return S.jsx(S1,{sensors:de,collisionDetection:$_,onDragStart:Ee,onDragOver:He,onDragEnd:Ne,children:S.jsxs("div",{ref:_e,className:"flex flex-col h-full bg-white font-sans overflow-auto select-none",onMouseDown:k,onMouseMove:G,onMouseUp:oe,onMouseLeave:oe,style:{cursor:Ce?"grabbing":"auto"},children:[S.jsx("div",{className:"flex-1 p-10 min-w-fit min-h-fit",children:S.jsx(db,{items:e.map(pe=>pe.id),strategy:V1,children:S.jsxs("div",{className:"flex flex-wrap gap-6 items-start",children:[fe.map(pe=>S.jsx(sI,{list:pe,lists:e,todos:t,editingListId:y,editingListTitle:_,setEditingListTitle:w,saveListTitle:K,setEditingListId:b,startEditingList:le,handleMoveTodo:Ae,onAddTodo:l,onUpdateTodo:u,onToggleTodo:d,onDeleteTodo:m,editingTodoId:T,editingTodoText:C,setEditingTodoText:D,setEditingTodoId:A,startEditingTodo:Q,saveTodoText:ge,setContextMenu:I,setListMenu:L,getDueLabel:ye},pe.id)),S.jsx("div",{className:"min-w-[50px] h-[50px] flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity",children:S.jsx("button",{className:"w-10 h-10 rounded-full bg-white shadow flex items-center justify-center text-[#1a73e8]",onClick:()=>n(" "),children:S.jsx(uo,{})})})]})})}),S.jsx(G1,{dropAnimation:je,children:Z?ie==="List"?S.jsx("div",{className:"min-w-[300px] w-[300px] h-[400px] bg-white rounded-xl shadow-2xl border border-[#1a73e8] opacity-90 cursor-grabbing p-4",children:S.jsx("div",{className:"font-normal text-lg text-[#1f1f1f]",children:(ke=e.find(pe=>pe.id===Z))==null?void 0:ke.title})}):S.jsx("div",{className:"bg-white rounded-lg shadow-xl border border-[#1a73e8] p-3 flex items-center gap-3 opacity-90 cursor-grabbing ring-2 ring-[#1a73e8] z-50",children:(()=>{const pe=t.find(ze=>ze.id===Z);return pe?S.jsxs(S.Fragment,{children:[S.jsx(pb,{checked:pe.completed,onClick:()=>{}}),S.jsx("span",{className:"text-[14px] text-[#1f1f1f]",children:pe.text})]}):null})()}):null}),N&&S.jsxs("div",{ref:B,className:"fixed bg-white rounded-lg shadow-xl border border-[#e9e9e8] py-1 z-50 w-48 animate-in fade-in zoom-in-95 duration-100",style:{top:N.y,left:N.x-180},children:[S.jsx("div",{className:"px-3 py-2 border-b border-[#f0f0ef] text-xs font-normal text-[#9b9a97]",children:" "}),e.map(pe=>S.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-[#37352f] hover:bg-[#f7f7f5] flex items-center gap-2",onClick:()=>Ae(N.id,pe.id),children:pe.title},pe.id)),S.jsx("div",{className:"my-1 border-t border-[#f0f0ef]"}),S.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:()=>{m(N.id),I(null)},children:[S.jsx(Yi,{size:14}),S.jsx("span",{children:""})]})]}),U&&S.jsxs("div",{ref:z,className:"fixed bg-white rounded-lg shadow-xl border border-[#e9e9e8] py-1 z-50 w-40 animate-in fade-in zoom-in-95 duration-100",style:{top:U.y,left:U.x-140},children:[S.jsx("div",{className:"px-3 py-2 border-b border-[#f0f0ef] text-xs font-normal text-[#9b9a97]",children:" "}),S.jsxs("button",{className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",onClick:()=>{h(U.id),L(null)},children:[S.jsx(Yi,{size:14}),S.jsx("span",{children:" "})]})]})]})})},rI=({entries:t=[],agents:e=[],categories:n=[],selectedId:s,selectedCategory:r,searchQuery:l,onSelectId:u,onSelectCategory:d,onSearchQuery:m,onAddEntry:h,onUpdateEntry:y,onDeleteEntry:b,onAddCategory:_,onAddComment:w,onRequestAiComment:T})=>{var ae,be;const[A,C]=M.useState(!1),[D,N]=M.useState(null),[I,U]=M.useState(!1),L=M.useRef(null),[B,z]=M.useState(""),[Z,W]=M.useState(""),[ie,ue]=M.useState(((ae=n[0])==null?void 0:ae.name)||"");M.useEffect(()=>{if(A)return;const de=t.filter(G=>r==="all"||G.category===r),k=de.some(G=>G.id===s);if(de.length>0){if(!s||!k){const G=[...de].sort((oe,le)=>new Date(le.date).getTime()-new Date(oe.date).getTime());u(G[0].id)}}else s!==null&&u(null)},[t,s,r,A,u]),M.useEffect(()=>{const de=k=>{L.current&&!L.current.contains(k.target)&&U(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]);const fe=M.useRef(null);M.useEffect(()=>{fe.current&&(fe.current.style.height="auto",fe.current.style.height=`${fe.current.scrollHeight}px`)},[Z,A]);const _e=()=>{!B.trim()||!Z.trim()||(D?(y(D,{title:B,content:Z,category:ie}),N(null)):h(B,Z,ie),z(""),W(""),C(!1))},Ce=()=>{var k;const de=t.find(G=>G.id===s);de&&(z(de.title||""),W(de.content||""),ue(de.category||((k=n[0])==null?void 0:k.name)||""),N(de.id),C(!0),U(!1))},qe=()=>{s&&window.confirm("   ?")&&(b(s),u(null),U(!1))},J=de=>{try{const k=Ki(de);return hh(k)?Vn(k,"yyyy M d HH:mm",{locale:mr}):"  "}catch{return"  "}},ee=(t||[]).find(de=>de.id===s);return S.jsxs("div",{className:"flex flex-col h-full bg-white relative",children:[S.jsxs("div",{className:"h-14 flex items-center justify-between px-8 bg-white/80 backdrop-blur-md sticky top-0 z-10 flex-shrink-0",children:[S.jsx("div",{className:"flex items-center gap-2 overflow-hidden text-sm font-normal text-[#9b9a97]",children:A?S.jsx("span",{className:"text-[#37352f] font-normal",children:D?"":""}):ee?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"truncate max-w-[120px] font-normal",children:ee.category||""}),S.jsx(qa,{size:14,className:"opacity-40"}),S.jsx("span",{className:"truncate max-w-[200px] text-[#37352f] font-normal",children:ee.title||" "})]}):S.jsx("span",{className:"text-[#37352f] font-normal",children:""})}),S.jsx("div",{className:"flex items-center gap-2",children:S.jsxs("button",{onClick:()=>{N(null),z(""),W(""),C(!0)},className:"flex items-center gap-1.5 text-xs font-normal text-white bg-[#37352f] hover:bg-black px-4 py-2 rounded-full transition-all",children:[S.jsx(uo,{size:14})," "]})})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:S.jsx("div",{className:"max-w-[800px] mx-auto py-20 px-10 w-full animate-in fade-in duration-500",children:A?S.jsxs("div",{className:"space-y-10",children:[S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-[10px] font-normal uppercase text-[#787774] tracking-wider px-1",children:""}),S.jsx("select",{value:ie,onChange:de=>ue(de.target.value),className:"bg-[#f7f7f5] border-none focus:ring-1 focus:ring-[#37352f] px-3 py-1 rounded text-xs font-normal text-[#37352f] transition-all outline-none appearance-none cursor-pointer",children:(n||[]).map(de=>S.jsx("option",{value:de.name,children:de.name},de.id))})]}),S.jsx("input",{type:"text",placeholder:" ",value:B,onChange:de=>z(de.target.value),className:"w-full text-[44px] font-normal border-none focus:ring-0 outline-none p-0 placeholder-[#e1e1e0] tracking-tight leading-tight",autoFocus:!0})]}),S.jsx("textarea",{ref:fe,placeholder:"    ?   ...",value:Z,onChange:de=>W(de.target.value),className:"w-full text-[17px] leading-[1.8] border-none focus:ring-0 outline-none p-0 resize-none placeholder-[#e1e1e0] overflow-hidden"}),S.jsxs("div",{className:"flex justify-end gap-3 pt-8 border-t border-[#f1f1f0]",children:[S.jsx("button",{onClick:()=>{C(!1),N(null)},className:"px-5 py-2 text-sm font-normal text-[#787774] hover:bg-[#f5f5f5] rounded-lg transition-colors",children:""}),S.jsx("button",{onClick:_e,disabled:!B.trim()||!Z.trim(),className:"px-8 py-2 bg-[#37352f] text-white text-sm font-normal rounded-lg hover:bg-black transition-all disabled:opacity-30 disabled:cursor-not-allowed shadow-lg",children:D?"  ":" "})]})]}):ee?S.jsx("div",{className:"space-y-12",children:S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{className:"space-y-6 text-center lg:text-left",children:[S.jsx("div",{className:"inline-block px-2.5 py-1 bg-[#f1f1f0] text-[#787774] text-[10px] font-normal uppercase tracking-widest rounded-md",children:ee.category||""}),S.jsx("h1",{className:"text-[52px] font-normal leading-[1.05] tracking-tighter text-[#1a1a1a]",children:ee.title||" "}),S.jsxs("div",{className:"flex items-center justify-between border-b border-[#f1f1f0] pb-8",children:[S.jsx("div",{className:"flex flex-col gap-0.5",children:S.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#9b9a97]",children:[S.jsx("span",{className:"font-normal text-[#37352f]",children:""}),S.jsx("span",{className:"w-px h-2 bg-[#e9e9e8]"}),S.jsx("span",{className:"font-normal text-[#787774]",children:J(ee.date)})]})}),S.jsxs("div",{className:"relative",ref:L,children:[S.jsx("button",{onClick:()=>U(!I),className:"p-1.5 hover:bg-[#efefef] rounded transition-colors text-[#9b9a97] hover:text-[#37352f]",children:S.jsx(fr,{size:20})}),I&&S.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-white border border-[#e9e9e8] rounded-[4px] shadow-lg z-20 py-1 animate-in fade-in zoom-in-95 duration-100",children:[S.jsxs("button",{onClick:Ce,className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-sm text-[#37352f] hover:bg-[#efefef] transition-colors text-left",children:[S.jsx(wu,{size:14,className:"text-[#9b9a97]"})," "]}),S.jsxs("button",{onClick:qe,className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-sm text-[#eb5757] hover:bg-[#fff0f0] transition-colors text-left",children:[S.jsx(Yi,{size:14})," "]})]})]})]})]}),S.jsxs("div",{className:"space-y-16",children:[S.jsx("div",{className:"text-[19px] leading-[1.9] text-[#37352f] whitespace-pre-wrap min-h-[400px] prose prose-slate max-w-none",children:ee.content}),S.jsxs("div",{className:"pt-16 border-t border-[#f1f1f0] space-y-10",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2.5",children:[S.jsx(c_,{size:20,className:"text-[#37352f]"}),S.jsxs("h3",{className:"text-lg font-normal tracking-tight",children:["AI  (",((be=ee.comments)==null?void 0:be.length)||0,")"]})]}),S.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-normal text-[#9b9a97] bg-[#f7f7f5] rounded-lg",children:[S.jsx(Ei,{size:12}),"AI   ..."]})]}),ee.comments&&ee.comments.length>0?S.jsx("div",{className:"space-y-8",children:ee.comments.map(de=>{const k=(e||[]).find(le=>le.id===de.authorId),G=k==null?void 0:k.avatar,oe=(k==null?void 0:k.emoji)||de.authorEmoji;return S.jsxs("div",{className:"flex gap-4",children:[S.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#f7f7f5] flex items-center justify-center text-lg flex-shrink-0 overflow-hidden border border-[#e9e9e8]",children:G?S.jsx("img",{src:G,alt:de.authorName,className:"w-full h-full object-cover"}):oe}),S.jsxs("div",{className:"flex-1 space-y-1.5",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-sm font-normal text-[#37352f]",children:(k==null?void 0:k.name)||de.authorName}),S.jsx("span",{className:"text-[11px] text-[#9b9a97]",children:J(de.timestamp)})]}),S.jsx("p",{className:"text-[15px] leading-relaxed text-[#37352f] bg-[#fbfbfa] p-3 rounded-tr-xl rounded-br-xl rounded-bl-xl border border-[#f1f1f0]",children:de.content})]})]},de.id)})}):S.jsxs("div",{className:"text-center py-10 bg-[#fbfbfa] rounded-xl border border-dashed border-[#e9e9e8]",children:[S.jsx("p",{className:"text-sm text-[#9b9a97] mb-3",children:"AI    ."}),S.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 text-[#9b9a97] text-sm font-normal",children:[S.jsx(Ei,{size:14,className:"text-[#f59e0b] animate-pulse"})," ..."]})]})]})]})]})}):S.jsxs("div",{className:"h-[70vh] flex flex-col items-center justify-center text-[#d3d1cb] space-y-6",children:[S.jsx("div",{className:"p-10 bg-[#f7f7f5] rounded-3xl border border-[#e9e9e8]",children:S.jsx(l_,{size:64,className:"opacity-20 text-[#37352f]",strokeWidth:1})}),S.jsxs("div",{className:"text-center space-y-2",children:[S.jsx("p",{className:"text-2xl font-normal text-[#37352f]",children:"   ?"}),S.jsx("p",{className:"text-sm text-[#787774]",children:"       ."})]}),S.jsx("button",{onClick:()=>{N(null),z(""),W(""),C(!0)},className:"px-10 py-4 bg-[#37352f] text-white font-normal rounded-full hover:bg-black transition-all shadow-xl",children:"  "})]})})})]})},aI=({agents:t=[],posts:e=[],selectedId:n,selectedAgentId:s,onSelectId:r,onUpdatePost:l,onDeletePost:u,onAddComment:d})=>{var Z,W;const[m,h]=M.useState(!1),[y,b]=M.useState(""),[_,w]=M.useState(!1),[T,A]=M.useState(""),C=M.useRef(null),D=M.useRef(null);M.useEffect(()=>{if(m)return;const ie=e.filter(fe=>fe.author===s),ue=ie.some(fe=>fe.id===n);if(ie.length>0){if(!n||!ue){const fe=[...ie].sort((_e,Ce)=>new Date(Ce.timestamp).getTime()-new Date(_e.timestamp).getTime());r(fe[0].id)}}else n!==null&&r(null)},[e,n,s,r,m]),M.useEffect(()=>{const ie=ue=>{C.current&&!C.current.contains(ue.target)&&w(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]),M.useEffect(()=>{D.current&&(D.current.style.height="auto",D.current.style.height=`${D.current.scrollHeight}px`)},[y,m]);const N=()=>{const ie=e.find(ue=>ue.id===n);ie&&(b(ie.content),h(!0),w(!1))},I=()=>{n&&(l(n,{content:y}),h(!1))},U=()=>{!n||!T.trim()||(d(n,{authorId:"USER",authorName:"",authorEmoji:"",content:T.trim()}),A(""))},L=ie=>{try{const ue=Ki(ie);return hh(ue)?Vn(ue,"yyyy M d HH:mm",{locale:mr}):"  "}catch{return"  "}},B=(e||[]).find(ie=>ie.id===n),z=t.find(ie=>ie.id===s);return S.jsxs("div",{className:"flex flex-col h-full bg-white relative",children:[S.jsx("div",{className:"h-14 flex items-center justify-between px-8 bg-white/80 backdrop-blur-md sticky top-0 z-10 flex-shrink-0",children:S.jsx("div",{className:"flex items-center gap-2 overflow-hidden text-sm font-normal text-[#9b9a97]",children:B&&z?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"truncate max-w-[120px] font-normal",children:z.name}),S.jsx(qa,{size:14,className:"opacity-40"}),S.jsx("span",{className:"truncate max-w-[200px] text-[#37352f] font-normal",children:m?" ":"AI "})]}):S.jsx("span",{className:"text-[#37352f] font-normal",children:"AI "})})}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:S.jsx("div",{className:"max-w-[800px] mx-auto py-20 px-10 w-full animate-in fade-in duration-500",children:B?S.jsx("div",{className:"space-y-12",children:S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{className:"space-y-6 text-center lg:text-left",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2 lg:justify-start justify-center",children:[S.jsx("span",{className:"text-xl",children:z==null?void 0:z.emoji}),S.jsxs("div",{className:"inline-block px-2.5 py-1 bg-[#f7f7f5] text-[#37352f] text-[10px] font-normal uppercase tracking-widest rounded-md",children:[z==null?void 0:z.name," "]})]}),S.jsx("h1",{className:"text-[52px] font-normal leading-[1.05] tracking-tighter text-[#1a1a1a]",children:"AI "}),S.jsxs("div",{className:"flex items-center justify-between border-b border-[#f1f1f0] pb-8",children:[S.jsx("div",{className:"flex flex-col gap-0.5",children:S.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#9b9a97]",children:[S.jsx("span",{className:"font-normal text-[#37352f]",children:""}),S.jsx("span",{className:"w-px h-2 bg-[#e9e9e8]"}),S.jsx("span",{className:"font-normal text-[#787774]",children:L(B.timestamp)})]})}),!m&&S.jsxs("div",{className:"relative",ref:C,children:[S.jsx("button",{onClick:()=>w(!_),className:"p-1.5 hover:bg-[#efefef] rounded transition-colors text-[#9b9a97] hover:text-[#37352f]",children:S.jsx(fr,{size:20})}),_&&S.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-white border border-[#e9e9e8] rounded-[4px] shadow-lg z-20 py-1 animate-in fade-in zoom-in-95 duration-100",children:[S.jsxs("button",{onClick:N,className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-sm text-[#37352f] hover:bg-[#efefef] transition-colors text-left font-normal",children:[S.jsx(wu,{size:14,className:"text-[#9b9a97]"})," "]}),S.jsxs("button",{onClick:()=>{u(B.id),w(!1)},className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-sm text-[#eb5757] hover:bg-[#fff0f0] transition-colors text-left font-normal",children:[S.jsx(Yi,{size:14})," "]})]})]})]})]}),m?S.jsxs("div",{className:"space-y-6",children:[S.jsx("textarea",{ref:D,value:y,onChange:ie=>b(ie.target.value),className:"w-full text-[19px] leading-[1.9] text-[#37352f] border-none focus:ring-0 outline-none p-0 resize-none placeholder-[#e1e1e0] overflow-hidden",autoFocus:!0}),S.jsxs("div",{className:"flex justify-end gap-3 pt-8 border-t border-[#f1f1f0]",children:[S.jsx("button",{onClick:()=>h(!1),className:"px-5 py-2 text-sm font-normal text-[#787774] hover:bg-[#f5f5f5] rounded-lg transition-colors",children:""}),S.jsx("button",{onClick:I,className:"px-8 py-2 bg-[#37352f] text-white text-sm font-normal rounded-lg hover:bg-black transition-all shadow-lg",children:"  "})]})]}):S.jsxs("div",{className:"space-y-16",children:[S.jsx("div",{className:"text-[19px] leading-[1.9] text-[#37352f] whitespace-pre-wrap min-h-[400px] prose prose-slate max-w-none",children:B.content}),S.jsxs("div",{className:"pt-16 border-t border-[#f1f1f0] space-y-10",children:[S.jsxs("div",{className:"flex items-center gap-2.5",children:[S.jsx(c_,{size:20,className:"text-[#37352f]"}),S.jsxs("h3",{className:"text-lg font-normal tracking-tight",children:[" ",((Z=B.comments)==null?void 0:Z.length)||0]})]}),S.jsxs("div",{className:"space-y-8",children:[(W=B.comments)==null?void 0:W.map(ie=>S.jsxs("div",{className:"flex gap-4 group",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f7f7f5] flex items-center justify-center text-sm flex-shrink-0 mt-1",children:ie.authorEmoji}),S.jsxs("div",{className:"flex-1 space-y-1.5",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-sm font-normal text-[#37352f]",children:ie.authorName}),S.jsx("span",{className:"text-[11px] text-[#9b9a97]",children:L(ie.timestamp)})]}),S.jsx("p",{className:"text-[15px] leading-relaxed text-[#37352f]",children:ie.content})]})]},ie.id)),S.jsxs("div",{className:"flex gap-4 pt-4",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f7f7f5] flex items-center justify-center text-sm flex-shrink-0 mt-1",children:""}),S.jsxs("div",{className:"flex-1 relative",children:[S.jsx("textarea",{value:T,onChange:ie=>A(ie.target.value),placeholder:"   ...",className:"w-full bg-[#f7f7f5] border-none rounded-2xl px-4 py-3 text-[15px] focus:ring-1 focus:ring-[#37352f] transition-all outline-none resize-none pr-12 min-h-[46px]",rows:1,onKeyDown:ie=>{ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),U())}}),S.jsx("button",{onClick:U,disabled:!T.trim(),className:"absolute right-2 top-1.5 p-2 text-[#37352f] hover:bg-white rounded-full transition-all disabled:opacity-20",children:S.jsx(vT,{size:18})})]})]})]})]})]})]})}):S.jsxs("div",{className:"h-[70vh] flex flex-col items-center justify-center text-[#d3d1cb] space-y-6",children:[S.jsx("div",{className:"p-10 bg-[#f7f7f5] rounded-3xl border border-[#e9e9e8]",children:S.jsx(Ei,{size:64,className:"opacity-20 text-[#37352f]",strokeWidth:1})}),S.jsxs("div",{className:"text-center space-y-2",children:[S.jsx("p",{className:"text-2xl font-normal text-[#37352f]",children:" AI  "}),S.jsx("p",{className:"text-sm text-[#787774]",children:"   AI     ."})]})]})})})]})},Kf=[{id:"ARIA",name:"",emoji:"",role:"",personality:"      .   ,      .",tone:"  .     .",color:"#37352f"}],lI=({agents:t,onUpdateAgents:e,settings:n,onUpdateSettings:s,onExportData:r,onClearAllData:l,onClearActivity:u})=>{const[d,m]=M.useState(t),[h,y]=M.useState(null);M.useEffect(()=>{m(t)},[t]);const b=w=>{const T=d.map(A=>A.id===w.id?w:A);m(T),e(T),y(null)},_=()=>{m(Kf),e(Kf)};return S.jsxs("div",{className:"max-w-[900px] mx-auto text-[#37352f] px-2 font-sans",children:[S.jsxs("div",{className:"flex justify-between items-start mb-8 pt-4",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-4xl font-normal mb-3 tracking-tight flex items-center gap-3",children:"AI  "}),S.jsx("p",{className:"text-[#9b9a97] text-lg font-normal",children:" AI   ."})]}),S.jsx("button",{onClick:_,className:"px-4 py-2 text-sm text-[#9b9a97] hover:text-[#37352f] border border-[#e9e9e8] rounded-lg hover:bg-[#f7f7f5] transition-colors",children:" "})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(w=>S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-xl p-6 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>y(w),children:[S.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[S.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shadow-sm overflow-hidden",style:{backgroundColor:w.color+"20",border:`2px solid ${w.color}`},children:w.avatar?S.jsx("img",{src:w.avatar,alt:w.name,className:"w-full h-full object-cover"}):w.emoji}),S.jsxs("div",{className:"flex-1",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-xl font-normal",style:{color:w.color},children:w.name}),S.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-[#f7f7f5] text-[#9b9a97]",children:w.role})]}),S.jsx("p",{className:"text-sm text-[#787774] mt-2 line-clamp-2",children:w.personality})]})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-xs text-[#d3d1cb]",children:" "}),S.jsx("div",{className:"w-6 h-6 rounded-full opacity-60 group-hover:opacity-100 transition-opacity",style:{backgroundColor:w.color}})]})]},w.id))}),S.jsxs("div",{className:"mt-12 bg-[#fbfbfa] border border-[#e9e9e8] rounded-xl p-6",children:[S.jsx("h3",{className:"font-normal mb-4",children:"?"}),S.jsxs("p",{className:"text-sm text-[#787774] leading-relaxed mb-4",children:[" AI      .    ,   ,     AI ",S.jsx("strong",{children:'"AI "'}),"    ."]}),S.jsxs("p",{className:"text-sm text-[#787774] leading-relaxed",children:["   AI  ,      .  ,  ",S.jsx("strong",{children:""}),"     !"]})]}),S.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-xl p-6",children:[S.jsx("h3",{className:"font-normal mb-4",children:"  "}),S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-normal text-[#37352f]",children:"AI  "}),S.jsx("p",{className:"text-xs text-[#9b9a97]",children:" //   AI   ."})]}),S.jsx("button",{onClick:()=>s({...n,autoAiReactions:!n.autoAiReactions}),className:`w-12 h-6 rounded-full transition-colors ${n.autoAiReactions?"bg-[#37352f]":"bg-[#d3d1cb]"}`,children:S.jsx("span",{className:`block w-5 h-5 bg-white rounded-full transition-transform ${n.autoAiReactions?"translate-x-6":"translate-x-1"}`})})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-normal text-[#37352f]",children:"   "}),S.jsx("p",{className:"text-xs text-[#9b9a97]",children:"AI  / /    ."})]}),S.jsx("button",{onClick:()=>s({...n,chatActionConfirm:!n.chatActionConfirm}),className:`w-12 h-6 rounded-full transition-colors ${n.chatActionConfirm?"bg-[#37352f]":"bg-[#d3d1cb]"}`,children:S.jsx("span",{className:`block w-5 h-5 bg-white rounded-full transition-transform ${n.chatActionConfirm?"translate-x-6":"translate-x-1"}`})})]})]}),S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-xl p-6",children:[S.jsx("h3",{className:"font-normal mb-4",children:" "}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("button",{onClick:r,className:"w-full px-4 py-2 text-sm text-[#37352f] border border-[#e9e9e8] rounded-lg hover:bg-[#f7f7f5] transition-colors",children:"  (JSON)"}),S.jsx("button",{onClick:u,className:"w-full px-4 py-2 text-sm text-[#9b9a97] border border-[#e9e9e8] rounded-lg hover:bg-[#f7f7f5] transition-colors",children:"  "}),S.jsx("button",{onClick:l,className:"w-full px-4 py-2 text-sm text-white bg-[#eb5757] rounded-lg hover:bg-[#d64545] transition-colors",children:"  "})]}),S.jsx("p",{className:"text-xs text-[#9b9a97] mt-3",children:" : / //AI /  (  )"})]})]}),h&&S.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-[2px] flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"p-6 border-b border-[#e9e9e8]",style:{backgroundColor:h.color+"10"},children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center text-3xl overflow-hidden",style:{backgroundColor:"white",border:`3px solid ${h.color}`},children:h.avatar?S.jsx("img",{src:h.avatar,alt:h.name,className:"w-full h-full object-cover"}):h.emoji}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-2xl font-normal",style:{color:h.color},children:h.name}),S.jsx("p",{className:"text-[#9b9a97]",children:h.role})]})]})}),S.jsxs("div",{className:"p-6 space-y-5",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:""}),S.jsx("input",{type:"text",value:h.name,onChange:w=>y({...h,name:w.target.value}),className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:""}),S.jsx("input",{type:"text",value:h.role,onChange:w=>y({...h,role:w.target.value}),className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:" "}),S.jsx("textarea",{value:h.personality,onChange:w=>y({...h,personality:w.target.value}),rows:3,className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10 resize-none",placeholder:" AI  ..."})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:" "}),S.jsx("textarea",{value:h.tone,onChange:w=>y({...h,tone:w.target.value}),rows:2,className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10 resize-none",placeholder:"   ..."})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:" "}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("input",{type:"file",accept:"image/*",onChange:w=>{var A;const T=(A=w.target.files)==null?void 0:A[0];if(T){const C=new FileReader;C.onloadend=()=>{y({...h,avatar:C.result})},C.readAsDataURL(T)}},className:"w-full text-sm text-[#787774] file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-normal file:bg-[#f7f7f5] file:text-[#37352f] hover:file:bg-[#efefef]"}),h.avatar&&S.jsx("button",{onClick:()=>y({...h,avatar:void 0}),className:"text-xs text-[#eb5757] hover:underline whitespace-nowrap",children:""})]}),S.jsx("p",{className:"text-xs text-[#9b9a97] mt-1",children:"   ."})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-3",children:" "}),S.jsx("div",{className:"flex gap-3 flex-wrap",children:["#3b82f6","#f59e0b","#10b981","#8b5cf6","#ef4444","#ec4899","#06b6d4","#84cc16","#f97316"].map(w=>S.jsx("button",{onClick:()=>y({...h,color:w}),className:`w-10 h-10 rounded-xl transition-all ${h.color===w?"ring-2 ring-offset-2 ring-[#37352f] scale-110":"hover:scale-105"}`,style:{backgroundColor:w}},w))})]})]}),S.jsxs("div",{className:"p-6 border-t border-[#e9e9e8] flex gap-3 justify-end bg-[#fbfbfa]",children:[S.jsx("button",{onClick:()=>y(null),className:"px-5 py-2.5 text-[#9b9a97] hover:text-[#37352f] transition-colors font-normal",children:""}),S.jsx("button",{onClick:()=>b(h),className:"px-6 py-2.5 bg-[#37352f] text-white rounded-xl hover:bg-[#2f2d28] transition-colors font-normal shadow-sm",children:""})]})]})})]})},Th=async(t,e,n,s="gemini-1.5-flash")=>{var l,u,d,m;if(!t)throw new Error("API Key .");const r=`https://generativelanguage.googleapis.com/v1beta/models/${s}:generateContent?key=${t}`;try{const h=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:.7,maxOutputTokens:4096}})});if(!h.ok){const w=await h.json();throw new Error(((l=w.error)==null?void 0:l.message)||"API    .")}const _=(((m=(d=(u=(await h.json()).candidates)==null?void 0:u[0])==null?void 0:d.content)==null?void 0:m.parts)||[]).map(w=>(w==null?void 0:w.text)||"").join("").trim();if(!_)throw new Error("    .");if(n){const w=Math.ceil((e.length+_.length)/4);n({totalRequests:1,totalTokens:w,lastRequestDate:new Date().toISOString()})}return _.trim()}catch(h){throw console.error("Gemini API Error:",h),h}},uI=(t,e,n)=>`
 "${t.name}"  AI .
 : ${t.role}
 : ${t.personality}
  : ${t.tone}

 ():
${e}

 :
${n}

         . 
     ,    . 
    .
    2~4   .
`,lo="gemini-1.5-flash",Sv=[{id:"gemini-2.5-pro",label:"Gemini 2.5 Pro"},{id:"gemini-2.5-flash",label:"Gemini 2.5 Flash"},{id:"gemini-2.0-flash",label:"Gemini 2.0 Flash"},{id:"gemini-2.0-flash-lite",label:"Gemini 2.0 Flash-Lite"},{id:"gemini-1.5-pro",label:"Gemini 1.5 Pro"},{id:"gemini-1.5-flash",label:"Gemini 1.5 Flash"}],wv=t=>typeof t.apiKey=="string"&&t.apiKey.trim().length>0,gb=t=>{var r,l;const e=t.apiConnections||[],n=e.find(u=>u.id===t.activeConnectionId&&u.provider==="gemini"&&u.isActive&&wv(u));if(n)return{connectionId:n.id,apiKey:n.apiKey,modelName:((r=n.modelName)==null?void 0:r.trim())||lo};const s=e.find(u=>u.provider==="gemini"&&u.isActive&&wv(u));return s?{connectionId:s.id,apiKey:s.apiKey,modelName:((l=s.modelName)==null?void 0:l.trim())||lo}:typeof t.geminiApiKey=="string"&&t.geminiApiKey.trim().length>0?{apiKey:t.geminiApiKey,modelName:lo}:null},cI=t=>t?t.length<=10?`${t.slice(0,3)}...`:`${t.slice(0,6)}...${t.slice(-4)}`:"",dI=({settings:t,onUpdateSettings:e})=>{var C,D;const[n,s]=M.useState(!1),[r,l]=M.useState(null),[u,d]=M.useState({provider:"gemini",isActive:!0,modelName:lo,apiKey:""}),m=t.apiConnections||[],h=M.useMemo(()=>{const N=m.find(I=>I.id===t.activeConnectionId);return N||m.find(I=>I.isActive)},[m,t.activeConnectionId]),y=(N,I)=>{var z,Z;const U=I&&N.some(W=>W.id===I)?I:t.activeConnectionId&&N.some(W=>W.id===t.activeConnectionId)?t.activeConnectionId:((z=N.find(W=>W.isActive))==null?void 0:z.id)||((Z=N[0])==null?void 0:Z.id),L=N.map(W=>({...W,isActive:W.id===U})),B=L.find(W=>W.id===U&&W.provider==="gemini")||L.find(W=>W.provider==="gemini"&&W.isActive);e({...t,apiConnections:L,activeConnectionId:U,geminiApiKey:(B==null?void 0:B.apiKey)||t.geminiApiKey})},b=(N,I)=>{const U=m.map(L=>L.id===N?{...L,modelName:I}:L);y(U)},_=()=>{const N=u.provider||"gemini",I=(u.modelName||"").trim(),U=(u.apiKey||"").trim();if(!I||!U)return;const L={id:crypto.randomUUID(),provider:N,modelName:I,apiKey:U,isActive:!0};y([...m,L],L.id),s(!1),d({provider:"gemini",isActive:!0,modelName:lo,apiKey:""})},w=N=>{if(!window.confirm(" API  ?"))return;const I=m.filter(U=>U.id!==N);y(I)},T=N=>{if(N.provider!=="gemini"){alert("  Gemini  AI  .");return}y(m,N.id)},A=async N=>{if(N.provider!=="gemini"){alert("  Gemini .");return}l(N.id);try{await Th(N.apiKey,'  . " " .',void 0,N.modelName),alert(` : ${N.modelName}`)}catch(I){alert(` : ${(I==null?void 0:I.message)||"   "}`)}finally{l(null)}};return S.jsxs("div",{className:"max-w-[900px] mx-auto text-[#37352f] px-2 font-sans pb-20",children:[S.jsx("div",{className:"flex items-start mb-8 pt-4",children:S.jsxs("div",{children:[S.jsx("h1",{className:"text-4xl font-normal mb-3 tracking-tight flex items-center gap-3",children:"API  "}),S.jsx("p",{className:"text-[#9b9a97] text-lg font-normal",children:"Gemini    //AI    ."})]})}),S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-xl p-5 mb-6",children:[S.jsx("p",{className:"text-sm text-[#787774]",children:"  "}),S.jsx("p",{className:"text-lg font-normal mt-1",children:h?`${h.modelName} (${h.provider})`:"  "})]}),S.jsxs("div",{className:"space-y-4 mb-8",children:[S.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[S.jsxs("h3",{className:"font-normal text-lg",children:[" API (",m.length,")"]}),S.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-[#37352f] text-white rounded-lg hover:bg-[#2f2d28] transition-colors text-sm font-normal shadow-sm",children:[S.jsx(uo,{size:14})," API  "]})]}),m.length===0&&S.jsx("div",{className:"bg-[#fbfbfa] border border-[#e9e9e8] rounded-xl p-8 text-center text-[#9b9a97]",children:" API . Gemini API Key   ."}),m.map(N=>{const I=N.id===(h==null?void 0:h.id),U=N.provider==="gemini";return S.jsxs("div",{className:`bg-white border rounded-xl p-5 flex items-center justify-between transition-all ${I?"border-[#37352f] shadow-sm":"border-[#e9e9e8]"}`,children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("button",{onClick:()=>T(N),className:`w-5 h-5 rounded-full flex items-center justify-center ${I?"text-[#27c93f]":"text-[#d3d1cb]"}`,title:U?"  ":"Gemini  ",children:I?S.jsx(jx,{size:18}):S.jsx(Jx,{size:18})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-[10px] uppercase font-normal px-1.5 py-0.5 bg-[#f1f1f0] text-[#787774] rounded",children:N.provider}),U?S.jsx("select",{value:N.modelName,onChange:L=>b(N.id,L.target.value),className:"text-sm font-normal border border-[#e9e9e8] rounded-lg px-2 py-1 bg-white",children:Sv.map(L=>S.jsx("option",{value:L.id,children:L.label},L.id))}):S.jsx("span",{className:"font-normal text-sm",children:N.modelName})]}),S.jsx("p",{className:"text-sm text-[#9b9a97] font-mono mt-1",children:cI(N.apiKey)})]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>T(N),disabled:!U,className:`px-3 py-1.5 rounded-lg text-xs font-normal transition-colors ${I?"bg-[#e5f9e7] text-[#27c93f]":U?"bg-[#f1f1f0] text-[#37352f] hover:bg-[#e9e9e8]":"bg-[#f7f7f5] text-[#b4b3af] cursor-not-allowed"}`,children:I?" ":U?"":""}),S.jsx("button",{onClick:()=>A(N),disabled:!U||r===N.id,className:`px-3 py-1.5 rounded-lg text-xs font-normal transition-colors ${U?"bg-[#eef5ff] text-[#2b6de9] hover:bg-[#e0ecff]":"bg-[#f7f7f5] text-[#b4b3af] cursor-not-allowed"}`,children:S.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[S.jsx(Zx,{size:13}),r===N.id?" ...":" "]})}),S.jsx("button",{onClick:()=>w(N.id),className:"p-2 text-[#9b9a97] hover:text-[#eb5757] hover:bg-[#fff0f0] rounded-lg transition-colors",children:S.jsx(Yi,{size:16})})]})]},N.id)})]}),n&&S.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-[2px] flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 space-y-5 animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("h3",{className:"text-xl font-normal",children:" API  "}),S.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-[#f1f1f0] rounded-full",children:S.jsx(Hu,{size:20,className:"text-[#9b9a97]"})})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:"Provider"}),S.jsx("div",{className:"grid grid-cols-2 gap-2",children:["gemini","openai","anthropic","custom"].map(N=>S.jsx("button",{onClick:()=>d({...u,provider:N,modelName:N==="gemini"?lo:""}),className:`px-3 py-2.5 rounded-xl border text-sm font-normal transition-all ${u.provider===N?"border-[#37352f] bg-[#37352f] text-white shadow-md":"border-[#e9e9e8] bg-white text-[#787774] hover:bg-[#fbfbfa]"}`,children:N.charAt(0).toUpperCase()+N.slice(1)},N))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:""}),u.provider==="gemini"?S.jsx("select",{value:u.modelName||lo,onChange:N=>d({...u,modelName:N.target.value}),className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10",children:Sv.map(N=>S.jsx("option",{value:N.id,children:N.label},N.id))}):S.jsx("input",{type:"text",placeholder:": gpt-4o",value:u.modelName||"",onChange:N=>d({...u,modelName:N.target.value}),className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-normal mb-2",children:"API Key"}),S.jsx("input",{type:"password",placeholder:"AIza... / sk-...",value:u.apiKey||"",onChange:N=>d({...u,apiKey:N.target.value}),className:"w-full p-3 border border-[#e9e9e8] rounded-xl focus:outline-none focus:border-[#37352f] focus:ring-2 focus:ring-[#37352f]/10 font-mono text-sm"})]}),S.jsx("button",{onClick:_,disabled:!u.modelName||!u.apiKey,className:"w-full py-3.5 bg-[#37352f] text-white rounded-xl hover:bg-[#2f2d28] transition-colors font-normal shadow-md disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:" "})]})}),S.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{className:"bg-[#fbfbfa] border border-[#e9e9e8] rounded-xl p-6",children:[S.jsx("h3",{className:"font-normal mb-1 text-[#37352f]",children:" "}),S.jsx("p",{className:"text-sm text-[#787774] leading-relaxed",children:"API Key       ."})]}),S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-xl p-6",children:[S.jsx("h3",{className:"font-normal mb-1 text-[#37352f]",children:" "}),S.jsxs("div",{className:"flex justify-between items-center mt-2",children:[S.jsx("span",{className:"text-sm text-[#787774]",children:"  "}),S.jsxs("span",{className:"font-normal",children:[((C=t.apiUsage)==null?void 0:C.totalRequests)||0,""]})]}),S.jsxs("div",{className:"flex justify-between items-center mt-1",children:[S.jsx("span",{className:"text-sm text-[#787774]",children:" "}),S.jsx("span",{className:"font-normal",children:(((D=t.apiUsage)==null?void 0:D.totalTokens)||0).toLocaleString()})]})]})]})]})};var fI={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hI,mI;function pI(){return{geminiUrl:hI,vertexUrl:mI}}function gI(t,e,n,s){var r,l;if(!(t!=null&&t.baseUrl)){const u=pI();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zi{}function me(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const m=t[d];if(Array.isArray(n))for(let h=0;h<m.length;h++){const y=m[h];p(y,e.slice(l+1),n[h])}else for(const h of m)p(h,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const m=t[d];p(m[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),n)):n}else return n}else t=t[r]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function yI(t,e){for(const[n,s]of Object.entries(e)){const r=n.split("."),l=s.split("."),u=new Set;let d=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){d=m;break}if(d!==-1&&l.length>d)for(let m=d;m<l.length;m++){const h=l[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Wf(t,r,l,0,u)}}function Wf(t,e,n,s,r){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const m of d[u])Wf(m,e,n,s+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),m={};for(const h of d)m[h]=u[h];for(const[h,y]of Object.entries(m)){const b=[];for(const _ of n.slice(s))_==="*"?b.push(h):b.push(_);p(u,b,y)}for(const h of d)delete u[h]}}else{const u=t;l in u&&Wf(u[l],e,n,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vI(t){const e={},n=f(t,["operationName"]);n!=null&&p(e,["operationName"],n);const s=f(t,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function _I(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);l!=null&&p(e,["error"],l);const u=f(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],SI(u)),e}function bI(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);l!=null&&p(e,["error"],l);const u=f(t,["response"]);return u!=null&&p(e,["response"],wI(u)),e}function SI(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>xI(u))),p(e,["generatedVideos"],l)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function wI(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>TI(u))),p(e,["generatedVideos"],l)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function xI(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],II(n)),e}function TI(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],MI(n)),e}function EI(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function AI(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function CI(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);l!=null&&p(e,["error"],l);const u=f(t,["response"]);return u!=null&&p(e,["response"],NI(u)),e}function NI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["parent"]);s!=null&&p(e,["parent"],s);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function yb(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);l!=null&&p(e,["error"],l);const u=f(t,["response"]);return u!=null&&p(e,["response"],RI(u)),e}function RI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["parent"]);s!=null&&p(e,["parent"],s);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function II(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const s=f(t,["encodedVideo"]);s!=null&&p(e,["videoBytes"],Eh(s));const r=f(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function MI(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const s=f(t,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],Eh(s));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xv||(xv={}));var Tv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Tv||(Tv={}));var Ev;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ev||(Ev={}));var jn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(jn||(jn={}));var Av;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Av||(Av={}));var Cv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Cv||(Cv={}));var Nv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Nv||(Nv={}));var Rv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Rv||(Rv={}));var Iv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Iv||(Iv={}));var Mv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mv||(Mv={}));var Dv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Dv||(Dv={}));var kv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(kv||(kv={}));var Uv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Uv||(Uv={}));var Ov;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ov||(Ov={}));var Pv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Pv||(Pv={}));var Lv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Lv||(Lv={}));var qv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qv||(qv={}));var Gv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gv||(Gv={}));var Hv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Hv||(Hv={}));var zv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(zv||(zv={}));var Bv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Bv||(Bv={}));var Uu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Uu||(Uu={}));var Vv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Vv||(Vv={}));var $v;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($v||($v={}));var jv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jv||(jv={}));var Xf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xf||(Xf={}));var Fv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Fv||(Fv={}));var Jv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Jv||(Jv={}));var Qf;(function(t){t.COLLECTION="COLLECTION"})(Qf||(Qf={}));var Yv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Yv||(Yv={}));var Kv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Kv||(Kv={}));var Wv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Wv||(Wv={}));var Xv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Xv||(Xv={}));var Qv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Qv||(Qv={}));var Zv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zv||(Zv={}));var e0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(e0||(e0={}));var t0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(t0||(t0={}));var n0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(n0||(n0={}));var i0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(i0||(i0={}));var s0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(s0||(s0={}));var o0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(o0||(o0={}));var r0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(r0||(r0={}));var a0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(a0||(a0={}));var l0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(l0||(l0={}));var u0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(u0||(u0={}));var c0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(c0||(c0={}));var d0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(d0||(d0={}));var f0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(f0||(f0={}));var h0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(h0||(h0={}));var m0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(m0||(m0={}));var p0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(p0||(p0={}));var g0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(g0||(g0={}));var y0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(y0||(y0={}));var v0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(v0||(v0={}));var _0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_0||(_0={}));var b0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(b0||(b0={}));var or;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(or||(or={}));class Zf{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ga{get text(){var e,n,s,r,l,u,d,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const b=[];for(const _ of(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[w,T]of Object.entries(_))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(T!==null||T!==void 0)&&b.push(w);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;y=!0,h+=_.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,n,s,r,l,u,d,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const b of(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[_,w]of Object.entries(b))_!=="inlineData"&&(w!==null||w!==void 0)&&y.push(_);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,s,r,l,u,d,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,s,r,l,u,d,m,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,s,r,l,u,d,m,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class S0{}class w0{}class DI{}class kI{}class UI{}class OI{}class x0{}class T0{}class E0{}class PI{}class Ou{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Ou;let r;const l=e;return n?r=bI(l):r=_I(l),Object.assign(s,r),s}}class A0{}class C0{}class N0{}class R0{}class LI{}class qI{}class GI{}class Ah{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Ah,l=CI(e);return Object.assign(s,l),s}}class HI{}class zI{}class BI{}class VI{}class I0{}class $I{get text(){var e,n,s;let r="",l=!1;const u=[];for(const d of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[m,h]of Object.entries(d))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,s;let r="";const l=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class jI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ch{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Ch,l=yb(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ze(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vb(t,e){const n=Ze(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _b(t){return Array.isArray(t)?t.map(e=>Pu(e)):[Pu(t)]}function Pu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function bb(t){const e=Pu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sb(t){const e=Pu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function M0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wb(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>M0(e)):[M0(t)]}function eh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function D0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function k0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function hn(t){if(t==null)throw new Error("ContentUnion is required");return eh(t)?t:{role:"user",parts:wb(t)}}function Nh(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=hn(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=hn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>hn(n)):[hn(e)]}function ii(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(D0(t)||k0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hn(t)]}const e=[],n=[],s=eh(t[0]);for(const r of t){const l=eh(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(D0(r)||k0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:wb(n)}),e}function FI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(jn).includes(n[0].toUpperCase())?n[0].toUpperCase():jn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(jn).includes(s.toUpperCase())?s.toUpperCase():jn.TYPE_UNSPECIFIED})}}function cr(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&FI(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(jn).includes(d.toUpperCase())?d.toUpperCase():jn.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=cr(d);else if(s.includes(u)){const m=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}m.push(cr(h))}e[u]=m}else if(r.includes(u)){const m={};for(const[h,y]of Object.entries(d))m[h]=cr(y);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Rh(t){return cr(t)}function Ih(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Mh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function _r(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cr(e.response));return t}function br(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function JI(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function es(t,e){if(typeof e!="string")throw new Error("name must be a string");return JI(t,e,"cachedContents")}function xb(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Us(t){return Eh(t)}function YI(t){return t!=null&&typeof t=="object"&&"name"in t}function KI(t){return t!=null&&typeof t=="object"&&"video"in t}function WI(t){return t!=null&&typeof t=="object"&&"uri"in t}function Tb(t){var e;let n;if(YI(t)&&(n=t.name),!(WI(t)&&(n=t.uri,n===void 0))&&!(KI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Eb(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ab(t){for(const e of["models","tunedModels","publisherModels"])if(XI(t,e))return t[e];return[]}function XI(t,e){return t!==null&&typeof t=="object"&&e in t}function QI(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function ZI(t,e={}){const n=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=QI(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function Cb(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function eM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Nb(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Sr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Rb(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tM(t){const e={},n=f(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const s=f(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>OM(u))),p(e,["inlinedResponses"],l)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function nM(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const s=f(t,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function iM(t){const e={},n=f(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const s=f(t,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bu(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const r=f(t,["metadata","state"]);r!=null&&p(e,["state"],Rb(r));const l=f(t,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=f(t,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const m=f(t,["metadata","model"]);m!=null&&p(e,["model"],m);const h=f(t,["metadata","output"]);return h!=null&&p(e,["dest"],tM(Nb(h))),e}function th(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["displayName"]);s!=null&&p(e,["displayName"],s);const r=f(t,["state"]);r!=null&&p(e,["state"],Rb(r));const l=f(t,["error"]);l!=null&&p(e,["error"],l);const u=f(t,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(e,["startTime"],d);const m=f(t,["endTime"]);m!=null&&p(e,["endTime"],m);const h=f(t,["updateTime"]);h!=null&&p(e,["updateTime"],h);const y=f(t,["model"]);y!=null&&p(e,["model"],y);const b=f(t,["inputConfig"]);b!=null&&p(e,["src"],sM(b));const _=f(t,["outputConfig"]);_!=null&&p(e,["dest"],nM(Nb(_)));const w=f(t,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function sM(t){const e={},n=f(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const s=f(t,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function oM(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&p(n,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>UM(t,u))),p(n,["requests","requests"],l)}return n}function rM(t){const e={},n=f(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const s=f(t,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function aM(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function lM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Sr(t,s)),n}function uM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Sr(t,s)),n}function cM(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const s=f(t,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],dM(s));const r=f(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=f(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(t,["index"]);m!=null&&p(e,["index"],m);const h=f(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(w=>w)),p(e,["safetyRatings"],_)}const b=f(t,["urlContextMetadata"]);return b!=null&&p(e,["urlContextMetadata"],b),e}function dM(t){const e={},n=f(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function Ib(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>BM(l))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function fM(t,e){const n={},s=f(t,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function hM(t,e){const n={},s=f(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(t,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],iM(eM(r))),n}function U0(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["_url","model"],Ze(t,s));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],oM(t,Cb(t,r)));const l=f(e,["config"]);return l!=null&&fM(l,n),n}function mM(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["model"],Ze(t,s));const r=f(e,["src"]);r!=null&&p(n,["inputConfig"],rM(Cb(t,r)));const l=f(e,["config"]);return l!=null&&hM(l,n),n}function pM(t,e){const n={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),n}function gM(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["_url","model"],Ze(t,s));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],xM(t,r));const l=f(e,["config"]);return l!=null&&pM(l,n),n}function yM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Sr(t,s)),n}function vM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Sr(t,s)),n}function _M(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);return l!=null&&p(e,["error"],l),e}function bM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);return l!=null&&p(e,["error"],l),e}function SM(t,e){const n={},s=f(e,["contents"]);if(s!=null){let l=Nh(t,s);Array.isArray(l)&&(l=l.map(u=>u)),p(n,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(p(n,["_self"],wM(r,n)),yI(n,{"requests[].*":"requests[].request.*"})),n}function wM(t,e){const n={},s=f(t,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xM(t,e){const n={},s=f(e,["fileName"]);s!=null&&p(n,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&p(n,["requests"],SM(t,r)),n}function TM(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function EM(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AM(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const s=f(t,["mode"]);if(s!=null&&p(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CM(t,e,n){const s={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],Ib(hn(r)));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&p(s,["topP"],u);const d=f(e,["topK"]);d!=null&&p(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(s,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&p(s,["stopSequences"],y);const b=f(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const _=f(e,["logprobs"]);_!=null&&p(s,["logprobs"],_);const w=f(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const T=f(e,["frequencyPenalty"]);T!=null&&p(s,["frequencyPenalty"],T);const A=f(e,["seed"]);A!=null&&p(s,["seed"],A);const C=f(e,["responseMimeType"]);C!=null&&p(s,["responseMimeType"],C);const D=f(e,["responseSchema"]);D!=null&&p(s,["responseSchema"],Rh(D));const N=f(e,["responseJsonSchema"]);if(N!=null&&p(s,["responseJsonSchema"],N),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=f(e,["safetySettings"]);if(n!==void 0&&I!=null){let _e=I;Array.isArray(_e)&&(_e=_e.map(Ce=>VM(Ce))),p(n,["safetySettings"],_e)}const U=f(e,["tools"]);if(n!==void 0&&U!=null){let _e=br(U);Array.isArray(_e)&&(_e=_e.map(Ce=>jM(_r(Ce)))),p(n,["tools"],_e)}const L=f(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],$M(L)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=f(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],es(t,B));const z=f(e,["responseModalities"]);z!=null&&p(s,["responseModalities"],z);const Z=f(e,["mediaResolution"]);Z!=null&&p(s,["mediaResolution"],Z);const W=f(e,["speechConfig"]);if(W!=null&&p(s,["speechConfig"],Ih(W)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=f(e,["thinkingConfig"]);ie!=null&&p(s,["thinkingConfig"],ie);const ue=f(e,["imageConfig"]);ue!=null&&p(s,["imageConfig"],kM(ue));const fe=f(e,["enableEnhancedCivicAnswers"]);if(fe!=null&&p(s,["enableEnhancedCivicAnswers"],fe),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function NM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(h=>cM(h))),p(e,["candidates"],m)}const r=f(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=f(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function RM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Sr(t,s)),n}function IM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Sr(t,s)),n}function MM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function DM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function kM(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const s=f(t,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function UM(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["request","model"],Ze(t,s));const r=f(e,["contents"]);if(r!=null){let d=ii(r);Array.isArray(d)&&(d=d.map(m=>Ib(m))),p(n,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&p(n,["metadata"],l);const u=f(e,["config"]);return u!=null&&p(n,["request","generationConfig"],CM(t,u,f(n,["request"],{}))),n}function OM(t){const e={},n=f(t,["response"]);n!=null&&p(e,["response"],NM(n));const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["error"]);return r!=null&&p(e,["error"],r),e}function PM(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function LM(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=f(t,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),n}function qM(t){const e={},n=f(t,["config"]);return n!=null&&PM(n,e),e}function GM(t){const e={},n=f(t,["config"]);return n!=null&&LM(n,e),e}function HM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>bu(u))),p(e,["batchJobs"],l)}return e}function zM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>th(u))),p(e,["batchJobs"],l)}return e}function BM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&p(e,["fileData"],TM(l));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],EM(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(t,["inlineData"]);m!=null&&p(e,["inlineData"],aM(m));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const y=f(t,["thought"]);y!=null&&p(e,["thought"],y);const b=f(t,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const _=f(t,["videoMetadata"]);return _!=null&&p(e,["videoMetadata"],_),e}function VM(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(t,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function $M(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const s=f(t,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],AM(s)),e}function jM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],MM(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],DM(d));const m=f(t,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xi||(Xi={}));class co{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FM extends Zi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Xi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=U0(this.apiClient,e),s=n._url,r=me("{model}:batchGenerateContent",s),d=n.batch.inputConfig.requests,m=d.requests,h=[];for(const y of m){const b=Object.assign({},y);if(b.systemInstruction){const _=b.systemInstruction;delete b.systemInstruction;const w=b.request;w.systemInstruction=_,b.request=w}h.push(b)}return d.requests=h,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=mM(this.apiClient,e);return d=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>th(y))}else{const h=U0(this.apiClient,e);return d=me("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>bu(y))}}async createEmbeddingsInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gM(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>bu(m))}}async get(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=IM(this.apiClient,e);return d=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>th(y))}else{const h=RM(this.apiClient,e);return d=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>bu(y))}}async cancel(e){var n,s,r,l;let u="",d={};if(this.apiClient.isVertexAI()){const m=uM(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=lM(this.apiClient,e);u=me("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=GM(e);return d=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=zM(y),_=new I0;return Object.assign(_,b),_})}else{const h=qM(e);return d=me("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=HM(y),_=new I0;return Object.assign(_,b),_})}}async delete(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=vM(this.apiClient,e);return d=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>bM(y))}else{const h=yM(this.apiClient,e);return d=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>_M(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JM(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function O0(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>gD(l))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function YM(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let y=ii(u);Array.isArray(y)&&(y=y.map(b=>O0(b))),p(e,["contents"],y)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],O0(hn(d)));const m=f(t,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(b=>vD(b))),p(e,["tools"],y)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],yD(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function KM(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let b=ii(u);Array.isArray(b)&&(b=b.map(_=>_)),p(e,["contents"],b)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],hn(d));const m=f(t,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(_=>_D(_))),p(e,["tools"],b)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&p(e,["encryption_spec","kmsKeyName"],y),n}function WM(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["model"],vb(t,s));const r=f(e,["config"]);return r!=null&&YM(r,n),n}function XM(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["model"],vb(t,s));const r=f(e,["config"]);return r!=null&&KM(r,n),n}function QM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],es(t,s)),n}function ZM(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],es(t,s)),n}function eD(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function tD(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function nD(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function iD(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sD(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const s=f(t,["mode"]);if(s!=null&&p(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oD(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function rD(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],es(t,s)),n}function aD(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],es(t,s)),n}function lD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function uD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function cD(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function dD(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function fD(t){const e={},n=f(t,["config"]);return n!=null&&cD(n,e),e}function hD(t){const e={},n=f(t,["config"]);return n!=null&&dD(n,e),e}function mD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function pD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function gD(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&p(e,["fileData"],nD(l));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],iD(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(t,["inlineData"]);m!=null&&p(e,["inlineData"],JM(m));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const y=f(t,["thought"]);y!=null&&p(e,["thought"],y);const b=f(t,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const _=f(t,["videoMetadata"]);return _!=null&&p(e,["videoMetadata"],_),e}function yD(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const s=f(t,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],sD(s)),e}function vD(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],lD(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],uD(d));const m=f(t,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function _D(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(_=>oD(_))),p(e,["functionDeclarations"],b)}const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(t,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const y=f(t,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function bD(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function SD(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function wD(t,e){const n={},s=f(e,["name"]);s!=null&&p(n,["_url","name"],es(t,s));const r=f(e,["config"]);return r!=null&&bD(r,n),n}function xD(t,e){const n={},s=f(e,["name"]);s!=null&&p(n,["_url","name"],es(t,s));const r=f(e,["config"]);return r!=null&&SD(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TD extends Zi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Xi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=XM(this.apiClient,e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=WM(this.apiClient,e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=aD(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=rD(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=ZM(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=tD(y),_=new N0;return Object.assign(_,b),_})}else{const h=QM(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=eD(y),_=new N0;return Object.assign(_,b),_})}}async update(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=xD(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=wD(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=hD(e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=pD(y),_=new R0;return Object.assign(_,b),_})}else{const h=fD(e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=mD(y),_=new R0;return Object.assign(_,b),_})}}}function Lu(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function P0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(t){return this instanceof Pe?(this.v=t,this):new Pe(t)}function fi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(T){return Promise.resolve(T).then(w,b)}}function d(w,T){s[w]&&(r[w]=function(A){return new Promise(function(C,D){l.push([w,A,C,D])>1||m(w,A)})},T&&(r[w]=T(r[w])))}function m(w,T){try{h(s[w](T))}catch(A){_(l[0][3],A)}}function h(w){w.value instanceof Pe?Promise.resolve(w.value.v).then(y,b):_(l[0][2],w)}function y(w){m("next",w)}function b(w){m("throw",w)}function _(w,T){w(T),l.shift(),l.length&&m(l[0][0],l[0][1])}}function hi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof P0=="function"?P0(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(d,m){u=t[l](u),r(d,m,u.done,u.value)})}}function r(l,u,d,m){Promise.resolve(m).then(function(h){l({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ED(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Mb(n)}function Mb(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function AD(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function L0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),l&&!Mb(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class CD{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ND(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ND{constructor(e,n,s,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),AD(l)}async sendMessage(e){var n;await this.sendPromise;const s=hn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,d;const m=await r,h=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=m.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let _=[];y!=null&&(_=(d=y.slice(b))!==null&&d!==void 0?d:[]);const w=h?[h]:[];this.recordHistory(s,w,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=hn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?L0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return fi(this,arguments,function*(){var r,l,u,d,m,h;const y=[];try{for(var b=!0,_=hi(e),w;w=yield Pe(_.next()),r=w.done,!r;b=!0){d=w.value,b=!1;const T=d;if(ED(T)){const A=(h=(m=T.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;A!==void 0&&y.push(A)}yield yield Pe(T)}}catch(T){l={error:T}}finally{try{!b&&!r&&(u=_.return)&&(yield Pe(u.call(_)))}finally{if(l)throw l.error}}this.recordHistory(n,y)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...L0(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class La extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,La.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RD(t){const e={},n=f(t,["file"]);return n!=null&&p(e,["file"],n),e}function ID(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function MD(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],Tb(n)),e}function DD(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function kD(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],Tb(n)),e}function UD(t){const e={},n=f(t,["uris"]);return n!=null&&p(e,["uris"],n),e}function OD(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function PD(t){const e={},n=f(t,["config"]);return n!=null&&OD(n,e),e}function LD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}function qD(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GD extends Zi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Xi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PD(e);return l=me("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const h=LD(m),y=new HI;return Object.assign(y,h),y})}}async createInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RD(e);return l=me("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=ID(m),y=new zI;return Object.assign(y,h),y})}}async get(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kD(e);return l=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MD(e);return l=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const h=DD(m),y=new BI;return Object.assign(y,h),y})}}async registerFilesInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UD(e);return l=me("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=qD(m),y=new VI;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Su(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function HD(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>nk(l))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function zD(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function BD(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VD(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function $D(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const s=f(t,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=f(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=f(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(t,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&p(e,["mediaResolution"],y);const b=f(t,["presencePenalty"]);b!=null&&p(e,["presencePenalty"],b);const _=f(t,["responseLogprobs"]);_!=null&&p(e,["responseLogprobs"],_);const w=f(t,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const T=f(t,["responseModalities"]);T!=null&&p(e,["responseModalities"],T);const A=f(t,["responseSchema"]);A!=null&&p(e,["responseSchema"],A);const C=f(t,["routingConfig"]);C!=null&&p(e,["routingConfig"],C);const D=f(t,["seed"]);D!=null&&p(e,["seed"],D);const N=f(t,["speechConfig"]);N!=null&&p(e,["speechConfig"],N);const I=f(t,["stopSequences"]);I!=null&&p(e,["stopSequences"],I);const U=f(t,["temperature"]);U!=null&&p(e,["temperature"],U);const L=f(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const B=f(t,["topK"]);B!=null&&p(e,["topK"],B);const z=f(t,["topP"]);if(z!=null&&p(e,["topP"],z),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function FD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function JD(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(t,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const b=f(t,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Mh(b));const _=f(t,["thinkingConfig"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","thinkingConfig"],_);const w=f(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=f(t,["systemInstruction"]);e!==void 0&&T!=null&&p(e,["setup","systemInstruction"],HD(hn(T)));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let B=br(A);Array.isArray(B)&&(B=B.map(z=>sk(_r(z)))),p(e,["setup","tools"],B)}const C=f(t,["sessionResumption"]);e!==void 0&&C!=null&&p(e,["setup","sessionResumption"],ik(C));const D=f(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","inputAudioTranscription"],D);const N=f(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const I=f(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&p(e,["setup","realtimeInputConfig"],I);const U=f(t,["contextWindowCompression"]);e!==void 0&&U!=null&&p(e,["setup","contextWindowCompression"],U);const L=f(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function YD(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],$D(s));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(t,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const b=f(t,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Mh(b));const _=f(t,["thinkingConfig"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","thinkingConfig"],_);const w=f(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=f(t,["systemInstruction"]);e!==void 0&&T!=null&&p(e,["setup","systemInstruction"],hn(T));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let z=br(A);Array.isArray(z)&&(z=z.map(Z=>ok(_r(Z)))),p(e,["setup","tools"],z)}const C=f(t,["sessionResumption"]);e!==void 0&&C!=null&&p(e,["setup","sessionResumption"],C);const D=f(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","inputAudioTranscription"],D);const N=f(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const I=f(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&p(e,["setup","realtimeInputConfig"],I);const U=f(t,["contextWindowCompression"]);e!==void 0&&U!=null&&p(e,["setup","contextWindowCompression"],U);const L=f(t,["proactivity"]);e!==void 0&&L!=null&&p(e,["setup","proactivity"],L);const B=f(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&p(e,["setup","explicitVadSignal"],B),n}function KD(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["setup","model"],Ze(t,s));const r=f(e,["config"]);return r!=null&&p(n,["config"],JD(r,n)),n}function WD(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["setup","model"],Ze(t,s));const r=f(e,["config"]);return r!=null&&p(n,["config"],YD(r,n)),n}function XD(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function QD(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["weightedPrompts"],s)}return e}function ZD(t){const e={},n=f(t,["media"]);if(n!=null){let h=_b(n);Array.isArray(h)&&(h=h.map(y=>Su(y))),p(e,["mediaChunks"],h)}const s=f(t,["audio"]);s!=null&&p(e,["audio"],Su(Sb(s)));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&p(e,["video"],Su(bb(l)));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(t,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function ek(t){const e={},n=f(t,["media"]);if(n!=null){let h=_b(n);Array.isArray(h)&&(h=h.map(y=>y)),p(e,["mediaChunks"],h)}const s=f(t,["audio"]);s!=null&&p(e,["audio"],Sb(s));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&p(e,["video"],bb(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(t,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function tk(t){const e={},n=f(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const s=f(t,["serverContent"]);s!=null&&p(e,["serverContent"],s);const r=f(t,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=f(t,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=f(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],rk(u));const d=f(t,["goAway"]);d!=null&&p(e,["goAway"],d);const m=f(t,["sessionResumptionUpdate"]);m!=null&&p(e,["sessionResumptionUpdate"],m);const h=f(t,["voiceActivityDetectionSignal"]);h!=null&&p(e,["voiceActivityDetectionSignal"],h);const y=f(t,["voiceActivity"]);return y!=null&&p(e,["voiceActivity"],ak(y)),e}function nk(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&p(e,["fileData"],zD(l));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],BD(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(t,["inlineData"]);m!=null&&p(e,["inlineData"],Su(m));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const y=f(t,["thought"]);y!=null&&p(e,["thought"],y);const b=f(t,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const _=f(t,["videoMetadata"]);return _!=null&&p(e,["videoMetadata"],_),e}function ik(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sk(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],jD(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],FD(d));const m=f(t,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function ok(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(_=>VD(_))),p(e,["functionDeclarations"],b)}const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(t,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const y=f(t,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function rk(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const s=f(t,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=f(t,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=f(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const m=f(t,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(T=>T)),p(e,["promptTokensDetails"],w)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(T=>T)),p(e,["cacheTokensDetails"],w)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>T)),p(e,["responseTokensDetails"],w)}const b=f(t,["toolUsePromptTokensDetails"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(T=>T)),p(e,["toolUsePromptTokensDetails"],w)}const _=f(t,["trafficType"]);return _!=null&&p(e,["trafficType"],_),e}function ak(t){const e={},n=f(t,["type"]);return n!=null&&p(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lk(t,e){const n={},s=f(t,["data"]);if(s!=null&&p(n,["data"],s),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function uk(t,e){const n={},s=f(t,["content"]);s!=null&&p(n,["content"],s);const r=f(t,["citationMetadata"]);r!=null&&p(n,["citationMetadata"],ck(r));const l=f(t,["tokenCount"]);l!=null&&p(n,["tokenCount"],l);const u=f(t,["finishReason"]);u!=null&&p(n,["finishReason"],u);const d=f(t,["avgLogprobs"]);d!=null&&p(n,["avgLogprobs"],d);const m=f(t,["groundingMetadata"]);m!=null&&p(n,["groundingMetadata"],m);const h=f(t,["index"]);h!=null&&p(n,["index"],h);const y=f(t,["logprobsResult"]);y!=null&&p(n,["logprobsResult"],y);const b=f(t,["safetyRatings"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(T=>T)),p(n,["safetyRatings"],w)}const _=f(t,["urlContextMetadata"]);return _!=null&&p(n,["urlContextMetadata"],_),n}function ck(t,e){const n={},s=f(t,["citationSources"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(n,["citations"],r)}return n}function dk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let u=ii(l);Array.isArray(u)&&(u=u.map(d=>d)),p(s,["contents"],u)}return s}function fk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(n,["tokensInfo"],l)}return n}function hk(t,e){const n={},s=f(t,["values"]);s!=null&&p(n,["values"],s);const r=f(t,["statistics"]);return r!=null&&p(n,["statistics"],mk(r)),n}function mk(t,e){const n={},s=f(t,["truncated"]);s!=null&&p(n,["truncated"],s);const r=f(t,["token_count"]);return r!=null&&p(n,["tokenCount"],r),n}function Qu(t,e){const n={},s=f(t,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>x2(u))),p(n,["parts"],l)}const r=f(t,["role"]);return r!=null&&p(n,["role"],r),n}function pk(t,e){const n={},s=f(t,["controlType"]);s!=null&&p(n,["controlType"],s);const r=f(t,["enableControlImageComputation"]);return r!=null&&p(n,["computeControl"],r),n}function gk(t,e){const n={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function yk(t,e,n){const s={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],hn(r));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>Ob(m))),p(e,["tools"],d)}const u=f(t,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],l2(u)),s}function vk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let d=ii(l);Array.isArray(d)&&(d=d.map(m=>Qu(m))),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&gk(u),s}function _k(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let d=ii(l);Array.isArray(d)&&(d=d.map(m=>m)),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&yk(u,s),s}function bk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["totalTokens"]);r!=null&&p(n,["totalTokens"],r);const l=f(t,["cachedContentTokenCount"]);return l!=null&&p(n,["cachedContentTokenCount"],l),n}function Sk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["totalTokens"]);return r!=null&&p(n,["totalTokens"],r),n}function wk(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],Ze(t,r)),s}function xk(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],Ze(t,r)),s}function Tk(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function Ek(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function Ak(t,e,n){const s={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const m=f(t,["guidanceScale"]);e!==void 0&&m!=null&&p(e,["parameters","guidanceScale"],m);const h=f(t,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const y=f(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&p(e,["parameters","safetySetting"],y);const b=f(t,["personGeneration"]);e!==void 0&&b!=null&&p(e,["parameters","personGeneration"],b);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&p(e,["parameters","includeSafetyAttributes"],_);const w=f(t,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const T=f(t,["language"]);e!==void 0&&T!=null&&p(e,["parameters","language"],T);const A=f(t,["outputMimeType"]);e!==void 0&&A!=null&&p(e,["parameters","outputOptions","mimeType"],A);const C=f(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C);const D=f(t,["addWatermark"]);e!==void 0&&D!=null&&p(e,["parameters","addWatermark"],D);const N=f(t,["labels"]);e!==void 0&&N!=null&&p(e,["labels"],N);const I=f(t,["editMode"]);e!==void 0&&I!=null&&p(e,["parameters","editMode"],I);const U=f(t,["baseSteps"]);return e!==void 0&&U!=null&&p(e,["parameters","editConfig","baseSteps"],U),s}function Ck(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["prompt"]);l!=null&&p(s,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>R2(h))),p(s,["instances[0]","referenceImages"],m)}const d=f(e,["config"]);return d!=null&&Ak(d,s),s}function Nk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Zu(u))),p(n,["generatedImages"],l)}return n}function Rk(t,e,n){const s={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const l=f(t,["title"]);e!==void 0&&l!=null&&p(e,["requests[]","title"],l);const u=f(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function Ik(t,e,n){const s={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const l=f(t,["title"]);e!==void 0&&l!=null&&p(e,["instances[]","title"],l);const u=f(t,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=f(t,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const m=f(t,["autoTruncate"]);return e!==void 0&&m!=null&&p(e,["parameters","autoTruncate"],m),s}function Mk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let m=Nh(t,l);Array.isArray(m)&&(m=m.map(h=>h)),p(s,["requests[]","content"],m)}const u=f(e,["config"]);u!=null&&Rk(u,s);const d=f(e,["model"]);return d!==void 0&&p(s,["requests[]","model"],Ze(t,d)),s}function Dk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let d=Nh(t,l);Array.isArray(d)&&(d=d.map(m=>m)),p(s,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&Ik(u,s),s}function kk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),p(n,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&p(n,["metadata"],l),n}function Uk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>hk(d))),p(n,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&p(n,["metadata"],l),n}function Ok(t,e){const n={},s=f(t,["endpoint"]);s!=null&&p(n,["name"],s);const r=f(t,["deployedModelId"]);return r!=null&&p(n,["deployedModelId"],r),n}function Pk(t,e){const n={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["fileUri"]);s!=null&&p(n,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function Lk(t,e){const n={},s=f(t,["id"]);s!=null&&p(n,["id"],s);const r=f(t,["args"]);r!=null&&p(n,["args"],r);const l=f(t,["name"]);if(l!=null&&p(n,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function qk(t,e){const n={},s=f(t,["allowedFunctionNames"]);s!=null&&p(n,["allowedFunctionNames"],s);const r=f(t,["mode"]);if(r!=null&&p(n,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Gk(t,e){const n={},s=f(t,["description"]);s!=null&&p(n,["description"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const l=f(t,["parameters"]);l!=null&&p(n,["parameters"],l);const u=f(t,["parametersJsonSchema"]);u!=null&&p(n,["parametersJsonSchema"],u);const d=f(t,["response"]);d!=null&&p(n,["response"],d);const m=f(t,["responseJsonSchema"]);if(m!=null&&p(n,["responseJsonSchema"],m),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function Hk(t,e,n,s){const r={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&p(n,["systemInstruction"],Qu(hn(l)));const u=f(e,["temperature"]);u!=null&&p(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(r,["topP"],d);const m=f(e,["topK"]);m!=null&&p(r,["topK"],m);const h=f(e,["candidateCount"]);h!=null&&p(r,["candidateCount"],h);const y=f(e,["maxOutputTokens"]);y!=null&&p(r,["maxOutputTokens"],y);const b=f(e,["stopSequences"]);b!=null&&p(r,["stopSequences"],b);const _=f(e,["responseLogprobs"]);_!=null&&p(r,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&p(r,["logprobs"],w);const T=f(e,["presencePenalty"]);T!=null&&p(r,["presencePenalty"],T);const A=f(e,["frequencyPenalty"]);A!=null&&p(r,["frequencyPenalty"],A);const C=f(e,["seed"]);C!=null&&p(r,["seed"],C);const D=f(e,["responseMimeType"]);D!=null&&p(r,["responseMimeType"],D);const N=f(e,["responseSchema"]);N!=null&&p(r,["responseSchema"],Rh(N));const I=f(e,["responseJsonSchema"]);if(I!=null&&p(r,["responseJsonSchema"],I),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=f(e,["safetySettings"]);if(n!==void 0&&U!=null){let Ce=U;Array.isArray(Ce)&&(Ce=Ce.map(qe=>I2(qe))),p(n,["safetySettings"],Ce)}const L=f(e,["tools"]);if(n!==void 0&&L!=null){let Ce=br(L);Array.isArray(Ce)&&(Ce=Ce.map(qe=>L2(_r(qe)))),p(n,["tools"],Ce)}const B=f(e,["toolConfig"]);if(n!==void 0&&B!=null&&p(n,["toolConfig"],P2(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=f(e,["cachedContent"]);n!==void 0&&z!=null&&p(n,["cachedContent"],es(t,z));const Z=f(e,["responseModalities"]);Z!=null&&p(r,["responseModalities"],Z);const W=f(e,["mediaResolution"]);W!=null&&p(r,["mediaResolution"],W);const ie=f(e,["speechConfig"]);if(ie!=null&&p(r,["speechConfig"],Ih(ie)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=f(e,["thinkingConfig"]);ue!=null&&p(r,["thinkingConfig"],ue);const fe=f(e,["imageConfig"]);fe!=null&&p(r,["imageConfig"],h2(fe));const _e=f(e,["enableEnhancedCivicAnswers"]);if(_e!=null&&p(r,["enableEnhancedCivicAnswers"],_e),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function zk(t,e,n,s){const r={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&p(n,["systemInstruction"],hn(l));const u=f(e,["temperature"]);u!=null&&p(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(r,["topP"],d);const m=f(e,["topK"]);m!=null&&p(r,["topK"],m);const h=f(e,["candidateCount"]);h!=null&&p(r,["candidateCount"],h);const y=f(e,["maxOutputTokens"]);y!=null&&p(r,["maxOutputTokens"],y);const b=f(e,["stopSequences"]);b!=null&&p(r,["stopSequences"],b);const _=f(e,["responseLogprobs"]);_!=null&&p(r,["responseLogprobs"],_);const w=f(e,["logprobs"]);w!=null&&p(r,["logprobs"],w);const T=f(e,["presencePenalty"]);T!=null&&p(r,["presencePenalty"],T);const A=f(e,["frequencyPenalty"]);A!=null&&p(r,["frequencyPenalty"],A);const C=f(e,["seed"]);C!=null&&p(r,["seed"],C);const D=f(e,["responseMimeType"]);D!=null&&p(r,["responseMimeType"],D);const N=f(e,["responseSchema"]);N!=null&&p(r,["responseSchema"],Rh(N));const I=f(e,["responseJsonSchema"]);I!=null&&p(r,["responseJsonSchema"],I);const U=f(e,["routingConfig"]);U!=null&&p(r,["routingConfig"],U);const L=f(e,["modelSelectionConfig"]);L!=null&&p(r,["modelConfig"],L);const B=f(e,["safetySettings"]);if(n!==void 0&&B!=null){let ae=B;Array.isArray(ae)&&(ae=ae.map(be=>be)),p(n,["safetySettings"],ae)}const z=f(e,["tools"]);if(n!==void 0&&z!=null){let ae=br(z);Array.isArray(ae)&&(ae=ae.map(be=>Ob(_r(be)))),p(n,["tools"],ae)}const Z=f(e,["toolConfig"]);n!==void 0&&Z!=null&&p(n,["toolConfig"],Z);const W=f(e,["labels"]);n!==void 0&&W!=null&&p(n,["labels"],W);const ie=f(e,["cachedContent"]);n!==void 0&&ie!=null&&p(n,["cachedContent"],es(t,ie));const ue=f(e,["responseModalities"]);ue!=null&&p(r,["responseModalities"],ue);const fe=f(e,["mediaResolution"]);fe!=null&&p(r,["mediaResolution"],fe);const _e=f(e,["speechConfig"]);_e!=null&&p(r,["speechConfig"],Ih(_e));const Ce=f(e,["audioTimestamp"]);Ce!=null&&p(r,["audioTimestamp"],Ce);const qe=f(e,["thinkingConfig"]);qe!=null&&p(r,["thinkingConfig"],qe);const J=f(e,["imageConfig"]);if(J!=null&&p(r,["imageConfig"],m2(J)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ee=f(e,["modelArmorConfig"]);return n!==void 0&&ee!=null&&p(n,["modelArmorConfig"],ee),r}function q0(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let d=ii(l);Array.isArray(d)&&(d=d.map(m=>Qu(m))),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(s,["generationConfig"],Hk(t,u,s)),s}function G0(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["contents"]);if(l!=null){let d=ii(l);Array.isArray(d)&&(d=d.map(m=>m)),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(s,["generationConfig"],zk(t,u,s)),s}function H0(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>uk(y))),p(n,["candidates"],h)}const l=f(t,["modelVersion"]);l!=null&&p(n,["modelVersion"],l);const u=f(t,["promptFeedback"]);u!=null&&p(n,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&p(n,["responseId"],d);const m=f(t,["usageMetadata"]);return m!=null&&p(n,["usageMetadata"],m),n}function z0(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["candidates"]);if(r!=null){let y=r;Array.isArray(y)&&(y=y.map(b=>b)),p(n,["candidates"],y)}const l=f(t,["createTime"]);l!=null&&p(n,["createTime"],l);const u=f(t,["modelVersion"]);u!=null&&p(n,["modelVersion"],u);const d=f(t,["promptFeedback"]);d!=null&&p(n,["promptFeedback"],d);const m=f(t,["responseId"]);m!=null&&p(n,["responseId"],m);const h=f(t,["usageMetadata"]);return h!=null&&p(n,["usageMetadata"],h),n}function Bk(t,e,n){const s={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=f(t,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const m=f(t,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=f(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const y=f(t,["includeRaiReason"]);e!==void 0&&y!=null&&p(e,["parameters","includeRaiReason"],y);const b=f(t,["language"]);e!==void 0&&b!=null&&p(e,["parameters","language"],b);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const w=f(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=f(t,["imageSize"]);if(e!==void 0&&T!=null&&p(e,["parameters","sampleImageSize"],T),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function Vk(t,e,n){const s={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const m=f(t,["guidanceScale"]);e!==void 0&&m!=null&&p(e,["parameters","guidanceScale"],m);const h=f(t,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const y=f(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&p(e,["parameters","safetySetting"],y);const b=f(t,["personGeneration"]);e!==void 0&&b!=null&&p(e,["parameters","personGeneration"],b);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&p(e,["parameters","includeSafetyAttributes"],_);const w=f(t,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const T=f(t,["language"]);e!==void 0&&T!=null&&p(e,["parameters","language"],T);const A=f(t,["outputMimeType"]);e!==void 0&&A!=null&&p(e,["parameters","outputOptions","mimeType"],A);const C=f(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C);const D=f(t,["addWatermark"]);e!==void 0&&D!=null&&p(e,["parameters","addWatermark"],D);const N=f(t,["labels"]);e!==void 0&&N!=null&&p(e,["labels"],N);const I=f(t,["imageSize"]);e!==void 0&&I!=null&&p(e,["parameters","sampleImageSize"],I);const U=f(t,["enhancePrompt"]);return e!==void 0&&U!=null&&p(e,["parameters","enhancePrompt"],U),s}function $k(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["prompt"]);l!=null&&p(s,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&Bk(u,s),s}function jk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["prompt"]);l!=null&&p(s,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&Vk(u,s),s}function Fk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>s2(d))),p(n,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&p(n,["positivePromptSafetyAttributes"],kb(l)),n}function Jk(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Zu(d))),p(n,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&p(n,["positivePromptSafetyAttributes"],Ub(l)),n}function Yk(t,e,n){const s={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(t,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const m=f(t,["personGeneration"]);if(e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(t,["negativePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","negativePrompt"],h);const y=f(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=f(t,["lastFrame"]);e!==void 0&&b!=null&&p(e,["instances[0]","lastFrame"],ec(b));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let w=_;Array.isArray(w)&&(w=w.map(T=>W2(T))),p(e,["instances[0]","referenceImages"],w)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function Kk(t,e,n){const s={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=f(t,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=f(t,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const m=f(t,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const y=f(t,["resolution"]);e!==void 0&&y!=null&&p(e,["parameters","resolution"],y);const b=f(t,["personGeneration"]);e!==void 0&&b!=null&&p(e,["parameters","personGeneration"],b);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&p(e,["parameters","pubsubTopic"],_);const w=f(t,["negativePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","negativePrompt"],w);const T=f(t,["enhancePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T);const A=f(t,["generateAudio"]);e!==void 0&&A!=null&&p(e,["parameters","generateAudio"],A);const C=f(t,["lastFrame"]);e!==void 0&&C!=null&&p(e,["instances[0]","lastFrame"],gi(C));const D=f(t,["referenceImages"]);if(e!==void 0&&D!=null){let U=D;Array.isArray(U)&&(U=U.map(L=>X2(L))),p(e,["instances[0]","referenceImages"],U)}const N=f(t,["mask"]);e!==void 0&&N!=null&&p(e,["instances[0]","mask"],K2(N));const I=f(t,["compressionQuality"]);return e!==void 0&&I!=null&&p(e,["parameters","compressionQuality"],I),s}function Wk(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["metadata"]);r!=null&&p(n,["metadata"],r);const l=f(t,["done"]);l!=null&&p(n,["done"],l);const u=f(t,["error"]);u!=null&&p(n,["error"],u);const d=f(t,["response","generateVideoResponse"]);return d!=null&&p(n,["response"],e2(d)),n}function Xk(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["metadata"]);r!=null&&p(n,["metadata"],r);const l=f(t,["done"]);l!=null&&p(n,["done"],l);const u=f(t,["error"]);u!=null&&p(n,["error"],u);const d=f(t,["response"]);return d!=null&&p(n,["response"],t2(d)),n}function Qk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["prompt"]);l!=null&&p(s,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&p(s,["instances[0]","image"],ec(u));const d=f(e,["video"]);d!=null&&p(s,["instances[0]","video"],Pb(d));const m=f(e,["source"]);m!=null&&n2(m,s);const h=f(e,["config"]);return h!=null&&Yk(h,s),s}function Zk(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["prompt"]);l!=null&&p(s,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&p(s,["instances[0]","image"],gi(u));const d=f(e,["video"]);d!=null&&p(s,["instances[0]","video"],Lb(d));const m=f(e,["source"]);m!=null&&i2(m,s);const h=f(e,["config"]);return h!=null&&Kk(h,s),s}function e2(t,e){const n={},s=f(t,["generatedSamples"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>r2(d))),p(n,["generatedVideos"],u)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(n,["raiMediaFilteredCount"],r);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&p(n,["raiMediaFilteredReasons"],l),n}function t2(t,e){const n={},s=f(t,["videos"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>a2(d))),p(n,["generatedVideos"],u)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(n,["raiMediaFilteredCount"],r);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&p(n,["raiMediaFilteredReasons"],l),n}function n2(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],ec(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],Pb(u)),s}function i2(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],gi(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],Lb(u)),s}function s2(t,e){const n={},s=f(t,["_self"]);s!=null&&p(n,["image"],p2(s));const r=f(t,["raiFilteredReason"]);r!=null&&p(n,["raiFilteredReason"],r);const l=f(t,["_self"]);return l!=null&&p(n,["safetyAttributes"],kb(l)),n}function Zu(t,e){const n={},s=f(t,["_self"]);s!=null&&p(n,["image"],Db(s));const r=f(t,["raiFilteredReason"]);r!=null&&p(n,["raiFilteredReason"],r);const l=f(t,["_self"]);l!=null&&p(n,["safetyAttributes"],Ub(l));const u=f(t,["prompt"]);return u!=null&&p(n,["enhancedPrompt"],u),n}function o2(t,e){const n={},s=f(t,["_self"]);s!=null&&p(n,["mask"],Db(s));const r=f(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(n,["labels"],l)}return n}function r2(t,e){const n={},s=f(t,["video"]);return s!=null&&p(n,["video"],J2(s)),n}function a2(t,e){const n={},s=f(t,["_self"]);return s!=null&&p(n,["video"],Y2(s)),n}function l2(t,e){const n={},s=f(t,["modelSelectionConfig"]);s!=null&&p(n,["modelConfig"],s);const r=f(t,["responseJsonSchema"]);r!=null&&p(n,["responseJsonSchema"],r);const l=f(t,["audioTimestamp"]);l!=null&&p(n,["audioTimestamp"],l);const u=f(t,["candidateCount"]);u!=null&&p(n,["candidateCount"],u);const d=f(t,["enableAffectiveDialog"]);d!=null&&p(n,["enableAffectiveDialog"],d);const m=f(t,["frequencyPenalty"]);m!=null&&p(n,["frequencyPenalty"],m);const h=f(t,["logprobs"]);h!=null&&p(n,["logprobs"],h);const y=f(t,["maxOutputTokens"]);y!=null&&p(n,["maxOutputTokens"],y);const b=f(t,["mediaResolution"]);b!=null&&p(n,["mediaResolution"],b);const _=f(t,["presencePenalty"]);_!=null&&p(n,["presencePenalty"],_);const w=f(t,["responseLogprobs"]);w!=null&&p(n,["responseLogprobs"],w);const T=f(t,["responseMimeType"]);T!=null&&p(n,["responseMimeType"],T);const A=f(t,["responseModalities"]);A!=null&&p(n,["responseModalities"],A);const C=f(t,["responseSchema"]);C!=null&&p(n,["responseSchema"],C);const D=f(t,["routingConfig"]);D!=null&&p(n,["routingConfig"],D);const N=f(t,["seed"]);N!=null&&p(n,["seed"],N);const I=f(t,["speechConfig"]);I!=null&&p(n,["speechConfig"],I);const U=f(t,["stopSequences"]);U!=null&&p(n,["stopSequences"],U);const L=f(t,["temperature"]);L!=null&&p(n,["temperature"],L);const B=f(t,["thinkingConfig"]);B!=null&&p(n,["thinkingConfig"],B);const z=f(t,["topK"]);z!=null&&p(n,["topK"],z);const Z=f(t,["topP"]);if(Z!=null&&p(n,["topP"],Z),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function u2(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],Ze(t,r)),s}function c2(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],Ze(t,r)),s}function d2(t,e){const n={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=f(t,["enableWidget"]);return s!=null&&p(n,["enableWidget"],s),n}function f2(t,e){const n={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=f(t,["timeRangeFilter"]);return s!=null&&p(n,["timeRangeFilter"],s),n}function h2(t,e){const n={},s=f(t,["aspectRatio"]);s!=null&&p(n,["aspectRatio"],s);const r=f(t,["imageSize"]);if(r!=null&&p(n,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function m2(t,e){const n={},s=f(t,["aspectRatio"]);s!=null&&p(n,["aspectRatio"],s);const r=f(t,["imageSize"]);r!=null&&p(n,["imageSize"],r);const l=f(t,["personGeneration"]);l!=null&&p(n,["personGeneration"],l);const u=f(t,["outputMimeType"]);u!=null&&p(n,["imageOutputOptions","mimeType"],u);const d=f(t,["outputCompressionQuality"]);return d!=null&&p(n,["imageOutputOptions","compressionQuality"],d),n}function p2(t,e){const n={},s=f(t,["bytesBase64Encoded"]);s!=null&&p(n,["imageBytes"],Us(s));const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function Db(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["gcsUri"],s);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(n,["imageBytes"],Us(r));const l=f(t,["mimeType"]);return l!=null&&p(n,["mimeType"],l),n}function ec(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=f(t,["imageBytes"]);s!=null&&p(n,["bytesBase64Encoded"],Us(s));const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function gi(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["gcsUri"],s);const r=f(t,["imageBytes"]);r!=null&&p(n,["bytesBase64Encoded"],Us(r));const l=f(t,["mimeType"]);return l!=null&&p(n,["mimeType"],l),n}function g2(t,e,n,s){const r={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&p(n,["_query","pageSize"],l);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&p(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&p(n,["_query","filter"],d);const m=f(e,["queryBase"]);return n!==void 0&&m!=null&&p(n,["_url","models_url"],Eb(t,m)),r}function y2(t,e,n,s){const r={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&p(n,["_query","pageSize"],l);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&p(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&p(n,["_query","filter"],d);const m=f(e,["queryBase"]);return n!==void 0&&m!=null&&p(n,["_url","models_url"],Eb(t,m)),r}function v2(t,e,n){const s={},r=f(e,["config"]);return r!=null&&g2(t,r,s),s}function _2(t,e,n){const s={},r=f(e,["config"]);return r!=null&&y2(t,r,s),s}function b2(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const l=f(t,["_self"]);if(l!=null){let u=Ab(l);Array.isArray(u)&&(u=u.map(d=>nh(d))),p(n,["models"],u)}return n}function S2(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const l=f(t,["_self"]);if(l!=null){let u=Ab(l);Array.isArray(u)&&(u=u.map(d=>ih(d))),p(n,["models"],u)}return n}function w2(t,e){const n={},s=f(t,["maskMode"]);s!=null&&p(n,["maskMode"],s);const r=f(t,["segmentationClasses"]);r!=null&&p(n,["maskClasses"],r);const l=f(t,["maskDilation"]);return l!=null&&p(n,["dilation"],l),n}function nh(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["displayName"]);r!=null&&p(n,["displayName"],r);const l=f(t,["description"]);l!=null&&p(n,["description"],l);const u=f(t,["version"]);u!=null&&p(n,["version"],u);const d=f(t,["_self"]);d!=null&&p(n,["tunedModelInfo"],q2(d));const m=f(t,["inputTokenLimit"]);m!=null&&p(n,["inputTokenLimit"],m);const h=f(t,["outputTokenLimit"]);h!=null&&p(n,["outputTokenLimit"],h);const y=f(t,["supportedGenerationMethods"]);y!=null&&p(n,["supportedActions"],y);const b=f(t,["temperature"]);b!=null&&p(n,["temperature"],b);const _=f(t,["maxTemperature"]);_!=null&&p(n,["maxTemperature"],_);const w=f(t,["topP"]);w!=null&&p(n,["topP"],w);const T=f(t,["topK"]);T!=null&&p(n,["topK"],T);const A=f(t,["thinking"]);return A!=null&&p(n,["thinking"],A),n}function ih(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["displayName"]);r!=null&&p(n,["displayName"],r);const l=f(t,["description"]);l!=null&&p(n,["description"],l);const u=f(t,["versionId"]);u!=null&&p(n,["version"],u);const d=f(t,["deployedModels"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(w=>Ok(w))),p(n,["endpoints"],_)}const m=f(t,["labels"]);m!=null&&p(n,["labels"],m);const h=f(t,["_self"]);h!=null&&p(n,["tunedModelInfo"],G2(h));const y=f(t,["defaultCheckpointId"]);y!=null&&p(n,["defaultCheckpointId"],y);const b=f(t,["checkpoints"]);if(b!=null){let _=b;Array.isArray(_)&&(_=_.map(w=>w)),p(n,["checkpoints"],_)}return n}function x2(t,e){const n={},s=f(t,["mediaResolution"]);s!=null&&p(n,["mediaResolution"],s);const r=f(t,["codeExecutionResult"]);r!=null&&p(n,["codeExecutionResult"],r);const l=f(t,["executableCode"]);l!=null&&p(n,["executableCode"],l);const u=f(t,["fileData"]);u!=null&&p(n,["fileData"],Pk(u));const d=f(t,["functionCall"]);d!=null&&p(n,["functionCall"],Lk(d));const m=f(t,["functionResponse"]);m!=null&&p(n,["functionResponse"],m);const h=f(t,["inlineData"]);h!=null&&p(n,["inlineData"],lk(h));const y=f(t,["text"]);y!=null&&p(n,["text"],y);const b=f(t,["thought"]);b!=null&&p(n,["thought"],b);const _=f(t,["thoughtSignature"]);_!=null&&p(n,["thoughtSignature"],_);const w=f(t,["videoMetadata"]);return w!=null&&p(n,["videoMetadata"],w),n}function T2(t,e){const n={},s=f(t,["productImage"]);return s!=null&&p(n,["image"],gi(s)),n}function E2(t,e,n){const s={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&p(e,["parameters","baseSteps"],l);const u=f(t,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const h=f(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const y=f(t,["addWatermark"]);e!==void 0&&y!=null&&p(e,["parameters","addWatermark"],y);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_);const w=f(t,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const T=f(t,["labels"]);return e!==void 0&&T!=null&&p(e,["labels"],T),s}function A2(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["source"]);l!=null&&N2(l,s);const u=f(e,["config"]);return u!=null&&E2(u,s),s}function C2(t,e){const n={},s=f(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Zu(l))),p(n,["generatedImages"],r)}return n}function N2(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["personImage"]);e!==void 0&&l!=null&&p(e,["instances[0]","personImage","image"],gi(l));const u=f(t,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>T2(m))),p(e,["instances[0]","productImages"],d)}return s}function R2(t,e){const n={},s=f(t,["referenceImage"]);s!=null&&p(n,["referenceImage"],gi(s));const r=f(t,["referenceId"]);r!=null&&p(n,["referenceId"],r);const l=f(t,["referenceType"]);l!=null&&p(n,["referenceType"],l);const u=f(t,["maskImageConfig"]);u!=null&&p(n,["maskImageConfig"],w2(u));const d=f(t,["controlImageConfig"]);d!=null&&p(n,["controlImageConfig"],pk(d));const m=f(t,["styleImageConfig"]);m!=null&&p(n,["styleImageConfig"],m);const h=f(t,["subjectImageConfig"]);return h!=null&&p(n,["subjectImageConfig"],h),n}function kb(t,e){const n={},s=f(t,["safetyAttributes","categories"]);s!=null&&p(n,["categories"],s);const r=f(t,["safetyAttributes","scores"]);r!=null&&p(n,["scores"],r);const l=f(t,["contentType"]);return l!=null&&p(n,["contentType"],l),n}function Ub(t,e){const n={},s=f(t,["safetyAttributes","categories"]);s!=null&&p(n,["categories"],s);const r=f(t,["safetyAttributes","scores"]);r!=null&&p(n,["scores"],r);const l=f(t,["contentType"]);return l!=null&&p(n,["contentType"],l),n}function I2(t,e){const n={},s=f(t,["category"]);if(s!=null&&p(n,["category"],s),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&p(n,["threshold"],r),n}function M2(t,e){const n={},s=f(t,["image"]);return s!=null&&p(n,["image"],gi(s)),n}function D2(t,e,n){const s={},r=f(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&p(e,["parameters","maxPredictions"],l);const u=f(t,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=f(t,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const m=f(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&p(e,["parameters","binaryColorThreshold"],m);const h=f(t,["labels"]);return e!==void 0&&h!=null&&p(e,["labels"],h),s}function k2(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["source"]);l!=null&&O2(l,s);const u=f(e,["config"]);return u!=null&&D2(u,s),s}function U2(t,e){const n={},s=f(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>o2(l))),p(n,["generatedMasks"],r)}return n}function O2(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],gi(l));const u=f(t,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],M2(u)),s}function P2(t,e){const n={},s=f(t,["retrievalConfig"]);s!=null&&p(n,["retrievalConfig"],s);const r=f(t,["functionCallingConfig"]);return r!=null&&p(n,["functionCallingConfig"],qk(r)),n}function L2(t,e){const n={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["computerUse"]);s!=null&&p(n,["computerUse"],s);const r=f(t,["fileSearch"]);r!=null&&p(n,["fileSearch"],r);const l=f(t,["codeExecution"]);if(l!=null&&p(n,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(t,["functionDeclarations"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(_=>_)),p(n,["functionDeclarations"],b)}const d=f(t,["googleMaps"]);d!=null&&p(n,["googleMaps"],d2(d));const m=f(t,["googleSearch"]);m!=null&&p(n,["googleSearch"],f2(m));const h=f(t,["googleSearchRetrieval"]);h!=null&&p(n,["googleSearchRetrieval"],h);const y=f(t,["urlContext"]);return y!=null&&p(n,["urlContext"],y),n}function Ob(t,e){const n={},s=f(t,["retrieval"]);s!=null&&p(n,["retrieval"],s);const r=f(t,["computerUse"]);if(r!=null&&p(n,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&p(n,["codeExecution"],l);const u=f(t,["enterpriseWebSearch"]);u!=null&&p(n,["enterpriseWebSearch"],u);const d=f(t,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(w=>Gk(w))),p(n,["functionDeclarations"],_)}const m=f(t,["googleMaps"]);m!=null&&p(n,["googleMaps"],m);const h=f(t,["googleSearch"]);h!=null&&p(n,["googleSearch"],h);const y=f(t,["googleSearchRetrieval"]);y!=null&&p(n,["googleSearchRetrieval"],y);const b=f(t,["urlContext"]);return b!=null&&p(n,["urlContext"],b),n}function q2(t,e){const n={},s=f(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["createTime"]);r!=null&&p(n,["createTime"],r);const l=f(t,["updateTime"]);return l!=null&&p(n,["updateTime"],l),n}function G2(t,e){const n={},s=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["createTime"]);r!=null&&p(n,["createTime"],r);const l=f(t,["updateTime"]);return l!=null&&p(n,["updateTime"],l),n}function H2(t,e,n){const s={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=f(t,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),s}function z2(t,e,n){const s={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=f(t,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),s}function B2(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","name"],Ze(t,r));const l=f(e,["config"]);return l!=null&&H2(l,s),s}function V2(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["config"]);return l!=null&&z2(l,s),s}function $2(t,e,n){const s={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=f(t,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const m=f(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const h=f(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h);const y=f(t,["enhanceInputImage"]);e!==void 0&&y!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],y);const b=f(t,["imagePreservationFactor"]);e!==void 0&&b!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const _=f(t,["labels"]);e!==void 0&&_!=null&&p(e,["labels"],_);const w=f(t,["numberOfImages"]);e!==void 0&&w!=null&&p(e,["parameters","sampleCount"],w);const T=f(t,["mode"]);return e!==void 0&&T!=null&&p(e,["parameters","mode"],T),s}function j2(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],Ze(t,r));const l=f(e,["image"]);l!=null&&p(s,["instances[0]","image"],gi(l));const u=f(e,["upscaleFactor"]);u!=null&&p(s,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&$2(d,s),s}function F2(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Zu(u))),p(n,["generatedImages"],l)}return n}function J2(t,e){const n={},s=f(t,["uri"]);s!=null&&p(n,["uri"],s);const r=f(t,["encodedVideo"]);r!=null&&p(n,["videoBytes"],Us(r));const l=f(t,["encoding"]);return l!=null&&p(n,["mimeType"],l),n}function Y2(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["uri"],s);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(n,["videoBytes"],Us(r));const l=f(t,["mimeType"]);return l!=null&&p(n,["mimeType"],l),n}function K2(t,e){const n={},s=f(t,["image"]);s!=null&&p(n,["_self"],gi(s));const r=f(t,["maskMode"]);return r!=null&&p(n,["maskMode"],r),n}function W2(t,e){const n={},s=f(t,["image"]);s!=null&&p(n,["image"],ec(s));const r=f(t,["referenceType"]);return r!=null&&p(n,["referenceType"],r),n}function X2(t,e){const n={},s=f(t,["image"]);s!=null&&p(n,["image"],gi(s));const r=f(t,["referenceType"]);return r!=null&&p(n,["referenceType"],r),n}function Pb(t,e){const n={},s=f(t,["uri"]);s!=null&&p(n,["uri"],s);const r=f(t,["videoBytes"]);r!=null&&p(n,["encodedVideo"],Us(r));const l=f(t,["mimeType"]);return l!=null&&p(n,["encoding"],l),n}function Lb(t,e){const n={},s=f(t,["uri"]);s!=null&&p(n,["gcsUri"],s);const r=f(t,["videoBytes"]);r!=null&&p(n,["bytesBase64Encoded"],Us(r));const l=f(t,["mimeType"]);return l!=null&&p(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(t,e){const n={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&p(e,["displayName"],s),n}function Z2(t){const e={},n=f(t,["config"]);return n!=null&&Q2(n,e),e}function eU(t,e){const n={},s=f(t,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),n}function tU(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const s=f(t,["config"]);return s!=null&&eU(s,e),e}function nU(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function iU(t,e){const n={},s=f(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function sU(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const l=f(t,["error"]);l!=null&&p(e,["error"],l);const u=f(t,["response"]);return u!=null&&p(e,["response"],rU(u)),e}function oU(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const s=f(t,["fileName"]);s!=null&&p(e,["fileName"],s);const r=f(t,["config"]);return r!=null&&iU(r,e),e}function rU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["parent"]);s!=null&&p(e,["parent"],s);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function aU(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function lU(t){const e={},n=f(t,["config"]);return n!=null&&aU(n,e),e}function uU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function qb(t,e){const n={},s=f(t,["mimeType"]);e!==void 0&&s!=null&&p(e,["mimeType"],s);const r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),n}function cU(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const s=f(t,["config"]);return s!=null&&qb(s,e),e}function dU(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fU="Content-Type",hU="X-Server-Timeout",mU="User-Agent",sh="x-goog-api-client",pU="1.39.0",gU=`google-genai-sdk/${pU}`,yU="v1beta1",vU="v1beta";class _U{constructor(e){var n,s,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:yU}else{if(!this.clientOptions.apiKey)throw new La({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:vU,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Qf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,r){if(n&&n.timeout||r){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>l.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&bU(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await B0(r),new Zf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await B0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return fi(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:y}=yield Pe(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=l.decode(y,{stream:!0});try{const T=JSON.parse(b);if("error"in T){const A=JSON.parse(JSON.stringify(T.error)),C=A.status,D=A.code,N=`got status: ${C}. ${JSON.stringify(T)}`;if(D>=400&&D<600)throw new La({message:N,status:D})}}catch(T){if(T.name==="ApiError")throw T}u+=b;let _=-1,w=0;for(;;){_=-1,w=0;for(const C of m){const D=u.indexOf(C);D!==-1&&(_===-1||D<_)&&(_=D,w=C.length)}if(_===-1)break;const T=u.substring(0,_);u=u.substring(_+w);const A=T.trim();if(A.startsWith(d)){const C=A.substring(d.length).trim();try{const D=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new Zf(D))}catch(D){throw new Error(`exception parsing stream chunk ${C}. ${D}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=gU+" "+this.clientOptions.userAgentExtra;return e[mU]=n,e[sh]=n,e[fU]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(hU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const d=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const m={file:r},h=this.getFileName(e),y=me("upload/v1beta/files",m._url),b=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,m,n==null?void 0:n.httpOptions);return l.upload(e,b,this)}async uploadFileToFileSearchStore(e,n,s){var r;const l=this.clientOptions.uploader,u=await l.stat(n),d=String(u.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),b={};s!=null&&qb(s,b);const _=await this.fetchUploadUrl(h,d,m,y,b,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(n,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,r,l,u){var d;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function B0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new La({message:r,status:n}):new Error(r)}}function bU(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],y=d[m];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?d[m]=s(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),d[m]=h)}return d}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SU="mcp_used/unknown";let wU=!1;function Gb(t){for(const e of t)if(xU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return wU}function Hb(t){var e;const n=(e=t[sh])!==null&&e!==void 0?e:"";t[sh]=(n+` ${SU}`).trimStart()}function xU(t){return t!==null&&typeof t=="object"&&t instanceof Dh}function TU(t){return fi(this,arguments,function*(n,s=100){let r,l=0;for(;l<s;){const u=yield Pe(n.listTools({cursor:r}));for(const d of u.tools)yield yield Pe(d),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Dh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Dh(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var d=!0,m=(n=void 0,hi(TU(y))),h;h=await m.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const b=r;u.push(b);const _=b.name;if(l[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);l[_]=y}}catch(b){n={error:b}}finally{try{!d&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ZI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EU(t,e,n){const s=new jI;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(s,r),e(s)}class AU{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=RU(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const y=new Promise(I=>{h=I}),b=e.callbacks,_=function(){h({})},w=this.apiClient,T={onopen:_,onmessage:I=>{EU(w,b.onmessage,I)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(I){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(I){}},A=this.webSocketFactory.create(m,NU(u),T);A.connect(),await y;const N={setup:{model:Ze(this.apiClient,e.model)}};return A.send(JSON.stringify(N)),new CU(A,this.apiClient)}}class CU{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=QD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=XD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(or.PLAY)}pause(){this.sendPlaybackControl(or.PAUSE)}stop(){this.sendPlaybackControl(or.STOP)}resetContext(){this.sendPlaybackControl(or.RESET_CONTEXT)}close(){this.conn.close()}}function NU(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function RU(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function MU(t,e,n){const s=new $I;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const u=tk(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class DU{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new AU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Gb(e.config.tools)&&Hb(b);const _=PU(b);if(this.apiClient.isVertexAI()){const W=this.apiClient.getProject(),ie=this.apiClient.getLocation(),ue=this.apiClient.getApiKey(),fe=!!W&&!!ie||!!ue;this.apiClient.getCustomBaseUrl()&&!fe?y=m:(y=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,y))}else{const W=this.apiClient.getApiKey();let ie="BidiGenerateContent",ue="key";W!=null&&W.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ie="BidiGenerateContentConstrained",ue="access_token"),y=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ie}?${ue}=${W}`}let w=()=>{};const T=new Promise(W=>{w=W}),A=e.callbacks,C=function(){var W;(W=A==null?void 0:A.onopen)===null||W===void 0||W.call(A),w({})},D=this.apiClient,N={onopen:C,onmessage:W=>{MU(D,A.onmessage,W)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(W){},onclose:(s=A==null?void 0:A.onclose)!==null&&s!==void 0?s:function(W){}},I=this.webSocketFactory.create(y,OU(_),N);I.connect(),await T;let U=Ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const W=this.apiClient.getProject(),ie=this.apiClient.getLocation();W&&ie&&(U=`projects/${W}/locations/${ie}/`+U)}let L={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uu.AUDIO]}:e.config.responseModalities=[Uu.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],z=[];for(const W of B)if(this.isCallableTool(W)){const ie=W;z.push(await ie.tool())}else z.push(W);z.length>0&&(e.config.tools=z);const Z={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=WD(this.apiClient,Z):L=KD(this.apiClient,Z),delete L.config,I.send(JSON.stringify(L)),new UU(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const kU={turnComplete:!0};class UU{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=ii(n.turns),e.isVertexAI()||(s=s.map(r=>Qu(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(IU)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},kU),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ek(e)}:n={realtimeInput:ZD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function OU(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function PU(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V0=10;function $0(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(dr(u)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function dr(t){return"callTool"in t&&typeof t.callTool=="function"}function LU(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>dr(r)))!==null&&s!==void 0?s:!1}function j0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,r)=>{if(dr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function F0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qU extends Zi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,l,u,d;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!LU(n)||$0(n.config))return await this.generateContentInternal(m);const h=j0(n);if(h.length>0){const A=h.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let y,b;const _=ii(m.contents),w=(l=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:V0;let T=0;for(;T<w&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const A=y.candidates[0].content,C=[];for(const D of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(dr(D)){const I=await D.callTool(y.functionCalls);C.push(...I)}T++,b={role:"user",parts:C},m.contents=ii(m.contents),m.contents.push(A),m.contents.push(b),F0(m.config)&&(_.push(A),_.push(b))}return F0(m.config)&&(y.automaticFunctionCallingHistory=_),y},this.generateContentStream=async n=>{var s,r,l,u,d;if(this.maybeMoveToResponseJsonSchem(n),$0(n.config)){const b=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(b)}const m=j0(n);if(m.length>0){const b=m.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let l;const u=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new co(Xi.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var s,r,l,u,d,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(d=n.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>dr(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&Gb(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Hb(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,s,r;const l=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(dr(u)){const d=u,m=await d.tool();for(const h of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var n,s,r;const l=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:V0;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(h,y,b){return fi(this,arguments,function*(){for(var _,w,T,A,C,D;d<l;){u&&(d++,u=!1);const L=yield Pe(h.processParamsMaybeAddMcpUsage(b)),B=yield Pe(h.generateContentStreamInternal(L)),z=[],Z=[];try{for(var N=!0,I=(w=void 0,hi(B)),U;U=yield Pe(I.next()),_=U.done,!_;N=!0){A=U.value,N=!1;const W=A;if(yield yield Pe(W),W.candidates&&(!((C=W.candidates[0])===null||C===void 0)&&C.content)){Z.push(W.candidates[0].content);for(const ie of(D=W.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(d<l&&ie.functionCall){if(!ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ie.functionCall.name)){const ue=yield Pe(y.get(ie.functionCall.name).callTool([ie.functionCall]));z.push(...ue)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ie.functionCall.name}`)}}}}catch(W){w={error:W}}finally{try{!N&&!_&&(T=I.return)&&(yield Pe(T.call(I)))}finally{if(w)throw w.error}}if(z.length>0){u=!0;const W=new ga;W.candidates=[{content:{role:"user",parts:z}}],yield yield Pe(W);const ie=[];ie.push(...Z),ie.push({role:"user",parts:z});const ue=ii(b.contents).concat(ie);b.contents=ue}else break}})})(this,m,e)}async generateContentInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=G0(this.apiClient,e);return d=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=z0(y),_=new ga;return Object.assign(_,b),_})}else{const h=q0(this.apiClient,e);return d=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=H0(y),_=new ga;return Object.assign(_,b),_})}}async generateContentStreamInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=G0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(b){return fi(this,arguments,function*(){var _,w,T,A;try{for(var C=!0,D=hi(b),N;N=yield Pe(D.next()),_=N.done,!_;C=!0){A=N.value,C=!1;const I=A,U=z0(yield Pe(I.json()),e);U.sdkHttpResponse={headers:I.headers};const L=new ga;Object.assign(L,U),yield yield Pe(L)}}catch(I){w={error:I}}finally{try{!C&&!_&&(T=D.return)&&(yield Pe(T.call(D)))}finally{if(w)throw w.error}}})})}else{const h=q0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(b){return fi(this,arguments,function*(){var _,w,T,A;try{for(var C=!0,D=hi(b),N;N=yield Pe(D.next()),_=N.done,!_;C=!0){A=N.value,C=!1;const I=A,U=H0(yield Pe(I.json()),e);U.sdkHttpResponse={headers:I.headers};const L=new ga;Object.assign(L,U),yield yield Pe(L)}}catch(I){w={error:I}}finally{try{!C&&!_&&(T=D.return)&&(yield Pe(T.call(D)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Dk(this.apiClient,e);return d=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=Uk(y),_=new S0;return Object.assign(_,b),_})}else{const h=Mk(this.apiClient,e);return d=me("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=kk(y),_=new S0;return Object.assign(_,b),_})}}async generateImagesInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=jk(this.apiClient,e);return d=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=Jk(y),_=new w0;return Object.assign(_,b),_})}else{const h=$k(this.apiClient,e);return d=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=Fk(y),_=new w0;return Object.assign(_,b),_})}}async editImageInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=Ck(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const h=Nk(m),y=new DI;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=j2(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const h=F2(m),y=new kI;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=A2(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=C2(m),y=new UI;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=k2(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=U2(m),y=new OI;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=c2(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>ih(y))}else{const h=u2(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>nh(y))}}async listInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=_2(this.apiClient,e);return d=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=S2(y),_=new x0;return Object.assign(_,b),_})}else{const h=v2(this.apiClient,e);return d=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=b2(y),_=new x0;return Object.assign(_,b),_})}}async update(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=V2(this.apiClient,e);return d=me("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>ih(y))}else{const h=B2(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>nh(y))}}async delete(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=xk(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=Ek(y),_=new T0;return Object.assign(_,b),_})}else{const h=wk(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=Tk(y),_=new T0;return Object.assign(_,b),_})}}async countTokens(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=_k(this.apiClient,e);return d=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=Sk(y),_=new E0;return Object.assign(_,b),_})}else{const h=vk(this.apiClient,e);return d=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=bk(y),_=new E0;return Object.assign(_,b),_})}}async computeTokens(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=dk(this.apiClient,e);return l=me("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const h=fk(m),y=new PI;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Zk(this.apiClient,e);return d=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const b=Xk(y),_=new Ou;return Object.assign(_,b),_})}else{const h=Qk(this.apiClient,e);return d=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const b=Wk(y),_=new Ou;return Object.assign(_,b),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GU extends Zi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=AI(e);return d=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else{const h=EI(e);return d=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=vI(e);return l=me("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HU(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function zU(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>WU(l))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function BU(t,e,n){const s={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&p(n,["newSessionExpireTime"],l);const u=f(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&p(n,["bidiGenerateContentSetup"],KU(t,d));const m=f(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&p(n,["fieldMask"],m),s}function VU(t,e){const n={},s=f(e,["config"]);return s!=null&&p(n,["config"],BU(t,s,n)),n}function $U(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function jU(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FU(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function JU(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function YU(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(t,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const b=f(t,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Mh(b));const _=f(t,["thinkingConfig"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","thinkingConfig"],_);const w=f(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=f(t,["systemInstruction"]);e!==void 0&&T!=null&&p(e,["setup","systemInstruction"],zU(hn(T)));const A=f(t,["tools"]);if(e!==void 0&&A!=null){let B=br(A);Array.isArray(B)&&(B=B.map(z=>QU(_r(z)))),p(e,["setup","tools"],B)}const C=f(t,["sessionResumption"]);e!==void 0&&C!=null&&p(e,["setup","sessionResumption"],XU(C));const D=f(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","inputAudioTranscription"],D);const N=f(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&p(e,["setup","outputAudioTranscription"],N);const I=f(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&p(e,["setup","realtimeInputConfig"],I);const U=f(t,["contextWindowCompression"]);e!==void 0&&U!=null&&p(e,["setup","contextWindowCompression"],U);const L=f(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function KU(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["setup","model"],Ze(t,s));const r=f(e,["config"]);return r!=null&&p(n,["config"],YU(r,n)),n}function WU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&p(e,["fileData"],$U(l));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],jU(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(t,["inlineData"]);m!=null&&p(e,["inlineData"],HU(m));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const y=f(t,["thought"]);y!=null&&p(e,["thought"],y);const b=f(t,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const _=f(t,["videoMetadata"]);return _!=null&&p(e,["videoMetadata"],_),e}function XU(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QU(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["functionDeclarations"],y)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],FU(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],JU(d));const m=f(t,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZU(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function eO(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=ZU(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];l&&m.push(l),d.length>0&&m.push(...d),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class tO extends Zi{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=VU(this.apiClient,e);l=me("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=eO(d,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nO(t,e){const n={},s=f(t,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),n}function iO(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const s=f(t,["config"]);return s!=null&&nO(s,e),e}function sO(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function oO(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function rO(t){const e={},n=f(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const s=f(t,["config"]);return s!=null&&oO(s,e),e}function aO(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lO extends Zi{constructor(e){super(),this.apiClient=e,this.list=async n=>new co(Xi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sO(e);return l=me("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var n,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iO(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rO(e);return l=me("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=aO(m),y=new LI;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO extends Zi{constructor(e,n=new lO(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new co(Xi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Z2(e);return l=me("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nU(e);return l=me("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var n,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tU(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lU(e);return l=me("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=uU(m),y=new qI;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cU(e);return l=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=dU(m),y=new GI;return Object.assign(y,h),y})}}async importFile(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oU(e);return l=me("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const h=sU(m),y=new Ah;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zb=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return zb=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const cO=()=>zb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oh(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const rh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class si extends Error{}class bn extends si{constructor(e,n,s,r){super(`${bn.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,s){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new tc({message:s,cause:rh(n)});const l=n;return e===400?new Vb(e,l,s,r):e===401?new $b(e,l,s,r):e===403?new jb(e,l,s,r):e===404?new Fb(e,l,s,r):e===409?new Jb(e,l,s,r):e===422?new Yb(e,l,s,r):e===429?new Kb(e,l,s,r):e>=500?new Wb(e,l,s,r):new bn(e,l,s,r)}}class ah extends bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class tc extends bn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Bb extends tc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Vb extends bn{}class $b extends bn{}class jb extends bn{}class Fb extends bn{}class Jb extends bn{}class Yb extends bn{}class Kb extends bn{}class Wb extends bn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dO=/^[a-z][a-z0-9+.-]*:/i,fO=t=>dO.test(t);let lh=t=>(lh=Array.isArray,lh(t));const hO=lh;let mO=hO;const J0=mO;function pO(t){if(!t)return!0;for(const e in t)return!1;return!0}function gO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const yO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new si(`${t} must be an integer`);if(e<0)throw new si(`${t} must be a positive integer`);return e},vO=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _O=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ir="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const SO=()=>{var t,e,n,s,r;const l=bO();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ir,"X-Stainless-OS":K0(Deno.build.os),"X-Stainless-Arch":Y0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ir,"X-Stainless-OS":K0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Y0((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=wO();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wO(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const Y0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",K0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let mu;const xO=()=>mu??(mu=SO());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Xb(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function EO(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Xb({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Qb(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function AO(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CO=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Df(t,e,n){return Zb(),new File(t,e??"unknown_file",n)}function NO(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const RO=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",IO=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&eS(t),MO=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function DO(t,e,n){if(Zb(),t=await t,IO(t))return t instanceof File?t:Df([await t.arrayBuffer()],t.name);if(MO(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Df(await uh(r),e,n)}const s=await uh(t);if(e||(e=NO(t)),!(n!=null&&n.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Df(s,e,n)}async function uh(t){var e,n,s,r,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(eS(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(RO(t))try{for(var d=!0,m=hi(t),h;h=await m.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const y=r;u.push(...await uh(y))}}catch(y){n={error:y}}finally{try{!d&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}else{const y=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${kO(t)}`)}return u}function kO(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tS{constructor(e){this._client=e}}tS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const W0=Object.freeze(Object.create(null)),UO=(t=nS)=>(function(n,...s){if(n.length===1)return n[0];let r=!1;const l=[],u=n.reduce((y,b,_)=>{var w,T,A;/[?#]/.test(b)&&(r=!0);const C=s[_];let D=(r?encodeURIComponent:t)(""+C);return _!==s.length&&(C==null||typeof C=="object"&&C.toString===((A=Object.getPrototypeOf((T=Object.getPrototypeOf((w=C.hasOwnProperty)!==null&&w!==void 0?w:W0))!==null&&T!==void 0?T:W0))===null||A===void 0?void 0:A.toString))&&(D=C+"",l.push({start:y.length+b.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),y+b+(_===s.length?"":D)},""),d=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(d))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((y,b)=>y.start-b.start),l.length>0){let y=0;const b=l.reduce((_,w)=>{const T=" ".repeat(w.start-y),A="^".repeat(w.length);return y=w.start+w.length,_+T+A},"");throw new si(`Path parameters result in path with invalid segments:
${l.map(_=>_.error).join(`
`)}
${u}
${b}`)}return u}),pu=UO(nS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iS extends tS{create(e,n){var s;const{api_version:r=this._client.apiVersion}=e,l=Lu(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new si("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new si("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(pu`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(pu`/${r}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(pu`/${r}/interactions/${e}/cancel`,s)}get(e,n={},s){var r;const l=n??{},{api_version:u=this._client.apiVersion}=l,d=Lu(l,["api_version"]);return this._client.get(pu`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},s),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}iS._key=Object.freeze(["interactions"]);class sS extends iS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OO(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let gu;function kh(t){let e;return(gu??(e=new globalThis.TextEncoder,gu=e.encode.bind(e)))(t)}let yu;function X0(t){let e;return(yu??(e=new globalThis.TextDecoder,yu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kh(e):e;this.buffer=OO([this.buffer,n]);const s=[];let r;for(;(r=PO(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(X0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=X0(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}nc.NEWLINE_CHARS=new Set([`
`,"\r"]);nc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PO(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function LO(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qu={off:0,error:200,warn:300,info:400,debug:500},Q0=(t,e,n)=>{if(t){if(gO(qu,t))return t;vn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(qu))}`)}};function ba(){}function vu(t,e,n){return!e||qu[t]>qu[n]?ba:e[t].bind(e)}const qO={error:ba,warn:ba,info:ba,debug:ba};let Z0=new WeakMap;function vn(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return qO;const r=Z0.get(n);if(r&&r[0]===s)return r[1];const l={error:vu("error",n,s),warn:vu("warn",n,s),info:vu("info",n,s),debug:vu("debug",n,s)};return Z0.set(n,[s,l]),l}const so=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rr{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let r=!1;const l=s?vn(s):console;function u(){return fi(this,arguments,function*(){var m,h,y,b;if(r)throw new si("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var w=!0,T=hi(GO(e,n)),A;A=yield Pe(T.next()),m=A.done,!m;w=!0){b=A.value,w=!1;const C=b;if(!_)if(C.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield Pe(JSON.parse(C.data))}catch(D){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),D}}}catch(C){h={error:C}}finally{try{!w&&!m&&(y=T.return)&&(yield Pe(y.call(T)))}finally{if(h)throw h.error}}_=!0}catch(C){if(oh(C))return yield Pe(void 0);throw C}finally{_||n.abort()}})}return new rr(u,n,s)}static fromReadableStream(e,n,s){let r=!1;function l(){return fi(this,arguments,function*(){var m,h,y,b;const _=new nc,w=Qb(e);try{for(var T=!0,A=hi(w),C;C=yield Pe(A.next()),m=C.done,!m;T=!0){b=C.value,T=!1;const D=b;for(const N of _.decode(D))yield yield Pe(N)}}catch(D){h={error:D}}finally{try{!T&&!m&&(y=A.return)&&(yield Pe(y.call(A)))}finally{if(h)throw h.error}}for(const D of _.flush())yield yield Pe(D)})}function u(){return fi(this,arguments,function*(){var m,h,y,b;if(r)throw new si("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var w=!0,T=hi(l()),A;A=yield Pe(T.next()),m=A.done,!m;w=!0){b=A.value,w=!1;const C=b;_||C&&(yield yield Pe(JSON.parse(C)))}}catch(C){h={error:C}}finally{try{!w&&!m&&(y=T.return)&&(yield Pe(y.call(T)))}finally{if(h)throw h.error}}_=!0}catch(C){if(oh(C))return yield Pe(void 0);throw C}finally{_||n.abort()}})}return new rr(u,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),n.push(u)}return l.shift()}});return[new rr(()=>r(e),this.controller,this.client),new rr(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Xb({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await n.next();if(l)return s.close();const u=kh(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function GO(t,e){return fi(this,arguments,function*(){var s,r,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new si("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new si("Attempted to iterate over a response with no body");const d=new zO,m=new nc,h=Qb(t.body);try{for(var y=!0,b=hi(HO(h)),_;_=yield Pe(b.next()),s=_.done,!s;y=!0){u=_.value,y=!1;const w=u;for(const T of m.decode(w)){const A=d.decode(T);A&&(yield yield Pe(A))}}}catch(w){r={error:w}}finally{try{!y&&!s&&(l=b.return)&&(yield Pe(l.call(b)))}finally{if(r)throw r.error}}for(const w of m.flush()){const T=d.decode(w);T&&(yield yield Pe(T))}})}function HO(t){return fi(this,arguments,function*(){var n,s,r,l;let u=new Uint8Array;try{for(var d=!0,m=hi(t),h;h=yield Pe(m.next()),n=h.done,!n;d=!0){l=h.value,d=!1;const y=l;if(y==null)continue;const b=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?kh(y):y;let _=new Uint8Array(u.length+b.length);_.set(u),_.set(b,u.length),u=_;let w;for(;(w=LO(u))!==-1;)yield yield Pe(u.slice(0,w)),u=u.slice(w)}}catch(y){s={error:y}}finally{try{!d&&!n&&(r=m.return)&&(yield Pe(r.call(m)))}finally{if(s)throw s.error}}u.length>0&&(yield yield Pe(u))})}class zO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=BO(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function BO(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VO(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return vn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):rr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const m=n.headers.get("content-type"),h=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return vn(t).debug(`[${s}] response parsed`,so({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uh extends Promise{constructor(e,n,s=VO){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Uh(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oS=Symbol("brand.privateNullableHeaders");function*$O(t){if(!t)return;if(oS in t){const{values:s,nulls:r}=t;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():J0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=J0(s[1])?s[1]:[s[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const ya=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[l,u]of $O(s)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),u===null?(e.delete(l),n.add(d)):(e.append(l,u),n.delete(d))}}return{[oS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kf=t=>{var e,n,s,r,l,u;if(typeof globalThis.process<"u")return(s=(n=(e=fI)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rS;class ic{constructor(e){var n,s,r,l,u,d,m,{baseURL:h=kf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=kf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=e,_=Lu(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:y,apiVersion:b},_),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(s=w.timeout)!==null&&s!==void 0?s:ic.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const T="warn";this.logLevel=T,this.logLevel=(u=(l=Q0(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Q0(kf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:T,this.fetchOptions=w.fetchOptions,this.maxRetries=(d=w.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=w.fetch)!==null&&m!==void 0?m:TO(),this.encoder=CO,this._options=w,this.apiKey=y,this.apiVersion=b,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=ya([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ya([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ya([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new si(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ir}`}defaultIdempotencyKey(){return`stainless-node-retry-${cO()}`}makeStatusError(e,n,s,r){return bn.generate(e,n,s,r)}buildURL(e,n,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=fO(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return pO(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Uh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var r,l,u;const d=await e,m=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=m),await this.prepareOptions(d);const{req:h,url:y,timeout:b}=await this.buildRequest(d,{retryCount:m-n});await this.prepareRequest(h,{url:y,options:d});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=s===void 0?"":`, retryOf: ${s}`,T=Date.now();if(vn(this).debug(`[${_}] sending request`,so({retryOfRequestLogID:s,method:d.method,url:y,options:d,headers:h.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new ah;const A=new AbortController,C=await this.fetchWithTimeout(y,h,b,A).catch(rh),D=Date.now();if(C instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new ah;const U=oh(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return vn(this).info(`[${_}] connection ${U?"timed out":"failed"} - ${I}`),vn(this).debug(`[${_}] connection ${U?"timed out":"failed"} (${I})`,so({retryOfRequestLogID:s,url:y,durationMs:D-T,message:C.message})),this.retryRequest(d,n,s??_);throw vn(this).info(`[${_}] connection ${U?"timed out":"failed"} - error; no more retries left`),vn(this).debug(`[${_}] connection ${U?"timed out":"failed"} (error; no more retries left)`,so({retryOfRequestLogID:s,url:y,durationMs:D-T,message:C.message})),U?new Bb:new tc({cause:C})}const N=`[${_}${w}] ${h.method} ${y} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${D-T}ms`;if(!C.ok){const I=await this.shouldRetry(C);if(n&&I){const W=`retrying, ${n} attempts remaining`;return await AO(C.body),vn(this).info(`${N} - ${W}`),vn(this).debug(`[${_}] response error (${W})`,so({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:D-T})),this.retryRequest(d,n,s??_,C.headers)}const U=I?"error; no more retries left":"error; not retryable";vn(this).info(`${N} - ${U}`);const L=await C.text().catch(W=>rh(W).message),B=vO(L),z=B?void 0:L;throw vn(this).debug(`[${_}] response error (${U})`,so({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:z,durationMs:Date.now()-T})),this.makeStatusError(C.status,B,z,C.headers)}return vn(this).info(N),vn(this).debug(`[${_}] response start`,so({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:D-T})),{response:C,options:d,controller:A,requestLogID:_,retryOfRequestLogID:s,startTime:T}}async fetchWithTimeout(e,n,s,r){const l=n||{},{signal:u,method:d}=l,m=Lu(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),s),y=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},y?{duplex:"half"}:{}),{method:"GET"}),m);d&&(b.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){var l;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const m=r==null?void 0:r.get("retry-after");if(m&&!u){const h=parseFloat(m);Number.isNaN(h)?u=Date.parse(m)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,h)}return await _O(u),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,r,l;const u=Object.assign({},e),{method:d,path:m,query:h,defaultBaseURL:y}=u,b=this.buildURL(m,h,y);"timeout"in u&&yO("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:_,body:w}=this.buildBody({options:u}),T=await this.buildHeaders({options:e,method:d,bodyHeaders:_,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:T},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:b,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=ya([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),xO()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ya([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:EO(e)}:this.encoder({body:e,headers:s})}}ic.DEFAULT_TIMEOUT=6e4;class Qt extends ic{constructor(){super(...arguments),this.interactions=new sS(this)}}rS=Qt;Qt.GeminiNextGenAPIClient=rS;Qt.GeminiNextGenAPIClientError=si;Qt.APIError=bn;Qt.APIConnectionError=tc;Qt.APIConnectionTimeoutError=Bb;Qt.APIUserAbortError=ah;Qt.NotFoundError=Fb;Qt.ConflictError=Jb;Qt.RateLimitError=Kb;Qt.BadRequestError=Vb;Qt.AuthenticationError=$b;Qt.InternalServerError=Wb;Qt.PermissionDeniedError=jb;Qt.UnprocessableEntityError=Yb;Qt.toFile=DO;Qt.Interactions=sS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jO(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function FO(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function JO(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function YO(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function KO(t,e,n){const s={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(t,["learningRateMultiplier"]);if(u!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(t,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return s}function WO(t,e,n){const s={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const L=f(t,["validationDataset"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec"],Uf(L))}else if(r==="PREFERENCE_TUNING"){const L=f(t,["validationDataset"]);e!==void 0&&L!=null&&p(e,["preferenceOptimizationSpec"],Uf(L))}else if(r==="DISTILLATION"){const L=f(t,["validationDataset"]);e!==void 0&&L!=null&&p(e,["distillationSpec"],Uf(L))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=f(t,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const L=f(t,["epochCount"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],L)}else if(d==="PREFERENCE_TUNING"){const L=f(t,["epochCount"]);e!==void 0&&L!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],L)}else if(d==="DISTILLATION"){const L=f(t,["epochCount"]);e!==void 0&&L!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],L)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const L=f(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],L)}else if(m==="PREFERENCE_TUNING"){const L=f(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],L)}else if(m==="DISTILLATION"){const L=f(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],L)}let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const L=f(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],L)}else if(h==="PREFERENCE_TUNING"){const L=f(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],L)}else if(h==="DISTILLATION"){const L=f(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],L)}let y=f(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const L=f(t,["adapterSize"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],L)}else if(y==="PREFERENCE_TUNING"){const L=f(t,["adapterSize"]);e!==void 0&&L!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],L)}else if(y==="DISTILLATION"){const L=f(t,["adapterSize"]);e!==void 0&&L!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],L)}let b=f(n,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const L=f(t,["tuningMode"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","tuningMode"],L)}const _=f(t,["customBaseModel"]);e!==void 0&&_!=null&&p(e,["customBaseModel"],_);let w=f(n,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const L=f(t,["batchSize"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],L)}let T=f(n,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const L=f(t,["learningRate"]);e!==void 0&&L!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],L)}const A=f(t,["labels"]);e!==void 0&&A!=null&&p(e,["labels"],A);const C=f(t,["beta"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],C);const D=f(t,["baseTeacherModel"]);e!==void 0&&D!=null&&p(e,["distillationSpec","baseTeacherModel"],D);const N=f(t,["tunedTeacherModelSource"]);e!==void 0&&N!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],N);const I=f(t,["sftLossWeightMultiplier"]);e!==void 0&&I!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const U=f(t,["outputUri"]);return e!==void 0&&U!=null&&p(e,["outputUri"],U),s}function XO(t,e){const n={},s=f(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&lP(l);const u=f(t,["config"]);return u!=null&&KO(u,n),n}function QO(t,e){const n={},s=f(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&uP(l,n,e);const u=f(t,["config"]);return u!=null&&WO(u,n,e),n}function ZO(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function eP(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function tP(t,e,n){const s={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function nP(t,e,n){const s={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function iP(t,e){const n={},s=f(t,["config"]);return s!=null&&tP(s,n),n}function sP(t,e){const n={},s=f(t,["config"]);return s!=null&&nP(s,n),n}function oP(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const l=f(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>aS(d))),p(n,["tuningJobs"],u)}return n}function rP(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const l=f(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>ch(d))),p(n,["tuningJobs"],u)}return n}function aP(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["model"],s);const r=f(t,["name"]);return r!=null&&p(n,["endpoint"],r),n}function lP(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(t,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(n,["examples","examples"],r)}return n}function uP(t,e,n){const s={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function aS(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const l=f(t,["state"]);l!=null&&p(n,["state"],xb(l));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&p(n,["startTime"],d);const m=f(t,["tuningTask","completeTime"]);m!=null&&p(n,["endTime"],m);const h=f(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const y=f(t,["description"]);y!=null&&p(n,["description"],y);const b=f(t,["baseModel"]);b!=null&&p(n,["baseModel"],b);const _=f(t,["_self"]);return _!=null&&p(n,["tunedModel"],aP(_)),n}function ch(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const l=f(t,["state"]);l!=null&&p(n,["state"],xb(l));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(n,["startTime"],d);const m=f(t,["endTime"]);m!=null&&p(n,["endTime"],m);const h=f(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const y=f(t,["error"]);y!=null&&p(n,["error"],y);const b=f(t,["description"]);b!=null&&p(n,["description"],b);const _=f(t,["baseModel"]);_!=null&&p(n,["baseModel"],_);const w=f(t,["tunedModel"]);w!=null&&p(n,["tunedModel"],w);const T=f(t,["preTunedModel"]);T!=null&&p(n,["preTunedModel"],T);const A=f(t,["supervisedTuningSpec"]);A!=null&&p(n,["supervisedTuningSpec"],A);const C=f(t,["preferenceOptimizationSpec"]);C!=null&&p(n,["preferenceOptimizationSpec"],C);const D=f(t,["distillationSpec"]);D!=null&&p(n,["distillationSpec"],D);const N=f(t,["tuningDataStats"]);N!=null&&p(n,["tuningDataStats"],N);const I=f(t,["encryptionSpec"]);I!=null&&p(n,["encryptionSpec"],I);const U=f(t,["partnerModelTuningSpec"]);U!=null&&p(n,["partnerModelTuningSpec"],U);const L=f(t,["customBaseModel"]);L!=null&&p(n,["customBaseModel"],L);const B=f(t,["experiment"]);B!=null&&p(n,["experiment"],B);const z=f(t,["labels"]);z!=null&&p(n,["labels"],z);const Z=f(t,["outputUri"]);Z!=null&&p(n,["outputUri"],Z);const W=f(t,["pipelineJob"]);W!=null&&p(n,["pipelineJob"],W);const ie=f(t,["serviceAccount"]);ie!=null&&p(n,["serviceAccount"],ie);const ue=f(t,["tunedModelDisplayName"]);ue!=null&&p(n,["tunedModelDisplayName"],ue);const fe=f(t,["veoTuningSpec"]);return fe!=null&&p(n,["veoTuningSpec"],fe),n}function cP(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const l=f(t,["metadata"]);l!=null&&p(n,["metadata"],l);const u=f(t,["done"]);u!=null&&p(n,["done"],u);const d=f(t,["error"]);return d!=null&&p(n,["error"],d),n}function Uf(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["validationDatasetUri"],s);const r=f(t,["vertexDatasetResource"]);return r!=null&&p(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dP extends Zi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Xi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Xf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=eP(e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>ch(y))}else{const h=ZO(e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>aS(y))}}async listInternal(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=sP(e);return d=me("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=rP(y),_=new A0;return Object.assign(_,b),_})}else{const h=iP(e);return d=me("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=oP(y),_=new A0;return Object.assign(_,b),_})}}async cancel(e){var n,s,r,l;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=FO(e);return d=me("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=YO(y),_=new C0;return Object.assign(_,b),_})}else{const h=jO(e);return d=me("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const _=b;return _.sdkHttpResponse={headers:y.headers},_})),u.then(y=>{const b=JO(y),_=new C0;return Object.assign(_,b),_})}}async tuneInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=QO(e,e);return l=me("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>ch(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XO(e);return l=me("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>cP(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const hP=1024*1024*8,mP=3,pP=1e3,gP=2,Gu="x-goog-upload-status";async function yP(t,e,n){var s;const r=await lS(t,e,n),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Gu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function vP(t,e,n){var s;const r=await lS(t,e,n),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Gu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=yb(l),d=new Ch;return Object.assign(d,u),d}async function lS(t,e,n){var s,r;let l=0,u=0,d=new Zf(new Response),m="upload";for(l=t.size;u<l;){const h=Math.min(hP,l-u),y=t.slice(u,u+h);u+h>=l&&(m+=", finalize");let b=0,_=pP;for(;b<mP&&(d=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Gu]));)b++,await bP(_),_=_*gP;if(u+=h,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Gu])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function _P(t){return{size:t.size,type:t.type}}function bP(t){return new Promise(e=>setTimeout(e,t))}class SP{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yP(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vP(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _P(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wP{create(e,n,s){return new xP(e,n,s)}}class xP{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e_="x-goog-api-key";class TP{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(e_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(e_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EP="gl-node/";class uS{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=gI(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new TP(this.apiKey);this.apiClient=new _U({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:EP+"web",uploader:new SP,downloader:new fP}),this.models=new qU(this.apiClient),this.live=new DU(this.apiClient,r,new wP),this.batches=new FM(this.apiClient),this.chats=new CD(this.models,this.apiClient),this.caches=new TD(this.apiClient),this.files=new GD(this.apiClient),this.operations=new GU(this.apiClient),this.authTokens=new tO(this.apiClient),this.tunings=new dP(this.apiClient),this.fileSearchStores=new uO(this.apiClient)}}const AP=async(t,e,n,s,r="gemini-1.5-flash")=>{if(!t)throw new Error("API Key  .  > AI    .");const l=new uS({apiKey:t}),d={currentDate:new Date().toISOString().split("T")[0],recentEvents:e.slice(0,10),pendingTasks:n.filter(h=>!h.completed),completedTasks:n.filter(h=>h.completed).slice(0,10),recentJournal:s.slice(0,5)},m=`
      "LifeSync" AI . 
      ,  ( ),   
          " " .

      :
    ${JSON.stringify(d,null,2)}

     :
    1. :  ,    .
    2. :       .
    3. : 
       -  ( ) .
       -       .
       -        .
       -  " "   .
    4. :  (    ) .
       -  (, , , )  .
    5. : (Korean)

     JSON   .
  `;try{const h=await l.models.generateContent({model:r,contents:m,config:{responseMimeType:"application/json",responseSchema:{type:jn.OBJECT,properties:{title:{type:jn.STRING},content:{type:jn.STRING},tags:{type:jn.ARRAY,items:{type:jn.STRING}}},required:["title","content","tags"]}}}),y=JSON.parse(h.text);return{id:crypto.randomUUID(),title:y.title,content:y.content,tags:y.tags||["Insight","Daily"],date:new Date().toISOString(),type:"analysis"}}catch(h){throw console.error("Gemini generation failed:",h),new Error("AI     .")}},CP=async(t,e,n,s,r,l,u="gemini-1.5-flash")=>{if(!t)throw new Error("API Key .");const d=new uS({apiKey:t}),m=new Date().toISOString().split("T")[0],h={date:m,userName:l,upcomingEvents:n.filter(b=>b.date>=m).slice(0,5),pendingTasks:s.filter(b=>!b.completed).slice(0,5),recentJournal:r.slice(0,3)},y=`
     "Aria()"  AI .
    (${l})  ,   .
    
    [ ]
    ${JSON.stringify(h)}
    
    []
    1.     .
    2. (,  , )      .
    3.    ,    .
    4. 3     .
    5.  .
    `;try{const b=e.map(w=>({role:w.role==="user"?"user":"model",parts:[{text:w.content}]}));return(await d.models.generateContent({model:u,contents:b,config:{systemInstruction:{parts:[{text:y}]}}})).text||",   ."}catch(b){return console.error("Gemini chat generation failed:",b),",    .   ? (API )"}},t_=()=>{const t=new Date().getHours();return t<6?" !":t<12?" ! ":t<14?"! ":t<18?" ! ":t<22?"  ? ":" .   "},NP=(t,e)=>{const n=e.filter(u=>!u.completed).length,s=new Date,r=t.filter(u=>{if(!u.date)return!1;try{return Aa(Ki(u.date),s)}catch{return!1}}).length;if(r===0&&n===0)return"     .   !";let l="";return r>0&&(l+=` **${r} ** , `),n>0&&(l+=`**${n}  ** .`),l.replace(/, $/,".")},n_=({events:t,todos:e,entries:n,posts:s,todoLists:r,onAddEvent:l,onAddTodo:u,onAddEntry:d,onAddPost:m,requireConfirm:h=!0,settings:y,onUpdateSettings:b,agent:_,onUserMessage:w})=>{const T=gb(y),[A,C]=M.useState(()=>localStorage.getItem("ls_userName")||""),[D,N]=M.useState(()=>A?-1:0),I=()=>D===0&&!A?{id:"onboarding-1",role:"assistant",content:`${t_()}

 !  ${(_==null?void 0:_.name)||"LifeSync AI"}. ${(_==null?void 0:_.emoji)||""}
        .

,   ?`,timestamp:new Date,action:{type:"onboarding"}}:{id:"welcome",role:"assistant",content:`${A}, ${t_()}

${NP(t,e)}

 ?`,timestamp:new Date,quickReplies:["  ","  ","  "," "]},[U,L]=M.useState(()=>[I()]),[B,z]=M.useState(""),[Z,W]=M.useState(!1),[ie,ue]=M.useState([]),[fe,_e]=M.useState(null),Ce=M.useRef(null),qe=()=>{var K;(K=Ce.current)==null||K.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{qe()},[U]),M.useEffect(()=>{A&&localStorage.setItem("ls_userName",A)},[A]);const J=K=>{const Q=K.toLowerCase();if(D===0&&!A)return{type:"onboarding",data:{step:1,name:K.trim()}};if(D===1)return{type:"onboarding",data:{step:2,preference:K}};if(Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")){if(Q.includes("")||Q.includes("")||Q.includes(""))return null;const ye=K.match(/(\d{1,2})/),Ee=ye?`${ye[1].padStart(2,"0")}:00`:void 0;let He=0;Q.includes("")?He=1:Q.includes("")?He=2:Q.includes("")&&(He=7);const Ne=Vn(p_(new Date,He),"yyyy-MM-dd");let je=K.replace(/||||||\d+?|||||/g,"").trim();return je.length<2&&(je=" "),{type:"add_event",data:{id:crypto.randomUUID(),title:je,date:Ne,startTime:Ee,type:Q.includes("")?"important":"work"}}}if(Q.includes(" ")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")){let ye=K.replace(/ |||||||/g,"").trim();ye.length<2&&(ye="  ");const Ee=r.find(Ne=>Q.includes(Ne.title.toLowerCase())),He=Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")?"health":Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")?"shopping":Q.includes("")||Q.includes("")||Q.includes("")?"work":"personal";return{type:"add_todo",data:{text:ye,category:He,listId:Ee==null?void 0:Ee.id}}}if(["","","","","","","","","","","","",""].some(ye=>Q.includes(ye))||Q.includes(" ")||Q.includes("")||Q.includes("")){let ye="neutral";(Q.includes("")||Q.includes("")||Q.includes("")||Q.includes(""))&&(ye="good"),(Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes(""))&&(ye="bad");const Ee=K.replace(/\s+/g," ").trim();return{type:"add_journal",data:{title:(Ee.length>24?`${Ee.slice(0,24)}`:Ee)||" ",content:K,category:"",mood:ye}}}return Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")||Q.includes("")?{type:"generate_insight"}:null},ee=async K=>{var Q,ge,Ae,ye,Ee,He,Ne,je;if(K)switch(K.type){case"onboarding":((Q=K.data)==null?void 0:Q.step)===1?(C(K.data.name),N(1)):((ge=K.data)==null?void 0:ge.step)===2&&N(-1);break;case"add_event":l(K.data);break;case"add_todo":{const ke=typeof K.data=="string"?{text:K.data,category:"personal"}:K.data;u(ke.text,ke.listId,ke.dueDate,ke.category)}break;case"add_journal":d(((Ae=K.data)==null?void 0:Ae.title)||" ",((ye=K.data)==null?void 0:ye.content)||"",((Ee=K.data)==null?void 0:Ee.category)||"",((He=K.data)==null?void 0:He.mood)||"neutral");break;case"generate_insight":try{if(!(T!=null&&T.apiKey))throw new Error("API Key .");const ke=await AP(T.apiKey,t,e,n,T.modelName);if(m(ke),b){const pe=JSON.stringify({events:t,todos:e,entries:n}).length/4+ke.content.length/4;b({...y,apiUsage:{totalRequests:(((Ne=y.apiUsage)==null?void 0:Ne.totalRequests)||0)+1,totalTokens:(((je=y.apiUsage)==null?void 0:je.totalTokens)||0)+Math.ceil(pe),lastRequestDate:new Date().toISOString()}})}}catch{const pe={id:crypto.randomUUID(),role:"assistant",content:T!=null&&T.apiKey?"AI    .    . ":"AI    ** > API  ** Gemini API  ! ",timestamp:new Date,quickReplies:[" ",""]};L(ze=>[...ze,pe]);return}break}},ae=(K,Q)=>{var ge,Ae;if((K==null?void 0:K.type)==="onboarding"){if(((ge=K.data)==null?void 0:ge.step)===1)return{content:`${K.data.name}, ! 

    ?

 ,  !`,quickReplies:["  ","   ","   ","  "]};if(((Ae=K.data)==null?void 0:Ae.step)===2)return{content:`!   . 

${A}      .

  ?   !`,quickReplies:["  ","  ","  "]}}if(!K)return ie.slice(-3).join(" "),Q.length<10&&!Q.includes("?")?{content:`, ${A||""}!  .  . `,quickReplies:["  ","  ","   "]}:{content:`,    . 

   ?`,quickReplies:[" ","  ","  ",""]};switch(K.type){case"add_event":return{content:`   !

 **${K.data.title}**
 ${Vn(Ki(K.data.date),"M d (EEEE)",{locale:mr})}${K.data.startTime?`
 ${K.data.startTime}`:""}

 !`,quickReplies:["  ","   ",""]};case"add_todo":return{content:`    !

 **${K.data.text??K.data}**
 ${de(K.data.listId)}

 ! ! `,quickReplies:["   ","   ?",""]};case"add_journal":{const ye=K.data.mood==="good"?"":K.data.mood==="bad"?"":"";return K.data.mood==="bad"?{content:`${ye} ...  .

   .

    ,    .  . `,quickReplies:["   ",",  ","  "]}:K.data.mood==="good"?{content:`${ye} ,  !   .

   .

     ?`,quickReplies:[",   !","  "," "]}:{content:`${ye}    .

     !`,quickReplies:["","   "," "]}}case"generate_insight":return{content:` AI  !

**AI **  ${A||""}    . 

       !`,quickReplies:["  ","   ?",""]};default:return{content:" !"}}},be=K=>K==="good"?"":K==="bad"?"":"",de=K=>{var Q;return K?((Q=r.find(ge=>ge.id===K))==null?void 0:Q.title)??" ":" "},k=K=>h?(K==null?void 0:K.type)==="add_event"||(K==null?void 0:K.type)==="add_todo"||(K==null?void 0:K.type)==="add_journal":!1,G=K=>{var ge;let Q="";if(K.type==="add_event"){const Ae=Vn(Ki(K.data.date),"M d (EEEE)",{locale:mr});Q=` : **${K.data.title}**
 ${Ae}${K.data.startTime?`
 ${K.data.startTime}`:""}`}else K.type==="add_todo"?Q=`  : **${K.data.text??K.data}**
 : ${de(K.data.listId)}`:K.type==="add_journal"&&(Q=` : "${(K.data.content||"").slice(0,60)}${((ge=K.data.content)==null?void 0:ge.length)>60?"":""}"
 : ${be(K.data.mood)}`);return{content:`  .

${Q}

 ?`,quickReplies:["",""]}},oe=async K=>{const Q=K||B;if(!Q.trim()||Z)return;const ge=Q.trim(),Ae=fe&&["","","","",""].includes(ge),ye=fe&&["","","",""].includes(ge);if(!Ae&&!ye)try{w==null||w(ge)}catch(Ne){console.error("onUserMessage callback failed:",Ne)}const Ee={id:crypto.randomUUID(),role:"user",content:Q,timestamp:new Date};if(L(Ne=>[...Ne,Ee]),z(""),W(!0),ue(Ne=>[...Ne.slice(-4),Q]),await new Promise(Ne=>setTimeout(Ne,600+Math.random()*400)),fe&&(Ae||ye)){if(ye){_e(null);const ke={id:crypto.randomUUID(),role:"assistant",content:".  .",timestamp:new Date,quickReplies:["  ","  ","  "]};L(pe=>[...pe,ke]),W(!1);return}await ee(fe);const Ne=ae(fe,Q),je={id:crypto.randomUUID(),role:"assistant",content:Ne.content,timestamp:new Date,action:{...fe,executed:!0},quickReplies:Ne.quickReplies};L(ke=>[...ke,je]),_e(null),W(!1);return}fe&&!Ae&&!ye&&_e(null);const He=J(Q);if(He&&k(He)){_e(He);const Ne=G(He),je={id:crypto.randomUUID(),role:"assistant",content:Ne.content,timestamp:new Date,action:He,quickReplies:Ne.quickReplies};L(ke=>[...ke,je]),W(!1);return}if(He){await ee(He);const Ne=ae(He,Q),je={id:crypto.randomUUID(),role:"assistant",content:Ne.content,timestamp:new Date,action:{...He,executed:!0},quickReplies:Ne.quickReplies};L(ke=>[...ke,je]),W(!1)}else{if(T!=null&&T.apiKey)try{const Ne=[...U,Ee].map(pe=>({role:pe.role,content:pe.content})),je=await CP(T.apiKey,Ne,t,e,n,A,T.modelName),ke={id:crypto.randomUUID(),role:"assistant",content:je,timestamp:new Date};L(pe=>[...pe,ke])}catch(Ne){console.error(Ne);const je={id:crypto.randomUUID(),role:"assistant",content:",    .   ?",timestamp:new Date};L(ke=>[...ke,je])}else{const Ne=ae(null,Q),je={id:crypto.randomUUID(),role:"assistant",content:Ne.content,timestamp:new Date,quickReplies:Ne.quickReplies};L(ke=>[...ke,je])}W(!1)}},le=K=>{oe(K)};return S.jsxs("div",{className:"max-w-[800px] mx-auto text-[#37352f] h-full flex flex-col font-sans",children:[S.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-6 space-y-6",children:[U.map((K,Q)=>S.jsxs("div",{className:`flex w-full mb-6 ${K.role==="user"?"justify-end":"justify-start items-start gap-3"}`,children:[K.role==="assistant"&&S.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white shadow-sm flex-shrink-0 overflow-hidden mt-1",children:_!=null&&_.avatar?S.jsx("img",{src:_.avatar,alt:_.name,className:"w-full h-full object-cover"}):S.jsx("span",{className:"text-sm",children:(_==null?void 0:_.emoji)||S.jsx(Ei,{size:14})})}),S.jsxs("div",{className:`flex flex-col max-w-[85%] ${K.role==="user"?"items-end":"items-start"}`,children:[K.role==="assistant"&&S.jsx("span",{className:"text-xs text-[#9b9a97] mb-1.5 ml-1",children:(_==null?void 0:_.name)||"LifeSync AI"}),S.jsx("div",{className:`
                                    p-3.5 rounded-2xl whitespace-pre-line leading-relaxed shadow-sm text-[15px]
                                    ${K.role==="user"?"bg-[#37352f] text-white rounded-br-sm":"bg-white border border-[#e9e9e8] text-[#37352f] rounded-bl-sm"}
                                `,children:K.content.split("**").map((ge,Ae)=>Ae%2===1?S.jsx("strong",{children:ge},Ae):ge)}),K.role==="assistant"&&Q===0&&K.quickReplies&&K.quickReplies.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 mt-3 ml-1",children:K.quickReplies.map((ge,Ae)=>S.jsx("button",{onClick:()=>le(ge),className:"px-3 py-1.5 text-xs font-normal bg-white border border-[#e9e9e8] text-[#787774] rounded-lg hover:bg-[#f7f7f5] hover:text-[#37352f] transition-all",children:ge},Ae))})]})]},K.id)),Z&&S.jsxs("div",{className:"flex w-full mb-6 justify-start items-start gap-3",children:[S.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white shadow-sm flex-shrink-0 overflow-hidden mt-1",children:_!=null&&_.avatar?S.jsx("img",{src:_.avatar,alt:_.name,className:"w-full h-full object-cover"}):S.jsx("span",{className:"text-sm",children:(_==null?void 0:_.emoji)||S.jsx(Ei,{size:14})})}),S.jsxs("div",{className:"flex flex-col items-start",children:[S.jsx("span",{className:"text-xs text-[#9b9a97] mb-1.5 ml-1",children:(_==null?void 0:_.name)||"LifeSync AI"}),S.jsx("div",{className:"bg-white text-[#9b9a97] p-4 rounded-2xl rounded-bl-sm border border-[#e9e9e8] flex items-center gap-2 shadow-sm",children:S.jsxs("div",{className:"flex gap-1",children:[S.jsx("span",{className:"w-1.5 h-1.5 bg-[#d3d1cb] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),S.jsx("span",{className:"w-1.5 h-1.5 bg-[#d3d1cb] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),S.jsx("span",{className:"w-1.5 h-1.5 bg-[#d3d1cb] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})]}),S.jsx("div",{ref:Ce})]}),S.jsx("div",{className:"p-4 border-t border-[#e9e9e8] bg-white",children:S.jsxs("div",{className:"flex gap-3 items-end",children:[S.jsx("input",{type:"text",value:B,onChange:K=>z(K.target.value),onKeyDown:K=>K.key==="Enter"&&oe(),placeholder:D===0?" ...":" ...",className:"flex-1 p-4 bg-[#f7f7f5] border border-[#e9e9e8] rounded-xl text-lg placeholder-[#d3d1cb] focus:outline-none focus:border-[#37352f] focus:bg-white transition-all",disabled:Z}),S.jsx("button",{onClick:()=>oe(),disabled:!B.trim()||Z,className:"p-4 bg-[#37352f] text-white rounded-xl hover:bg-[#2f2d28] disabled:opacity-40 disabled:cursor-not-allowed transition-all shadow-sm",children:S.jsx(qa,{size:24})})]})})]})},RP=({onLogin:t,initialMode:e="login"})=>{const[n,s]=M.useState(e!=="signup"),[r,l]=M.useState(""),[u,d]=M.useState(""),[m,h]=M.useState(""),[y,b]=M.useState(""),[_,w]=M.useState(!1),[T,A]=M.useState(null);M.useEffect(()=>{s(e!=="signup"),A(null)},[e]);const C=async N=>{var I;N.preventDefault(),w(!0),A(null);try{if(n){const{data:U,error:L}=await Me.auth.signInWithPassword({email:r,password:u});if(L)throw L;if(U.user){const{data:B}=await Me.from("profiles").select("*").eq("id",U.user.id).single(),z={id:U.user.id,email:U.user.email,name:(B==null?void 0:B.name)||((I=U.user.email)==null?void 0:I.split("@")[0]),geminiApiKey:(B==null?void 0:B.gemini_api_key)||""};t(z)}}else{const{data:U,error:L}=await Me.auth.signUp({email:r,password:u,options:{data:{full_name:m}}});if(L)throw L;if(U.user){const{error:B}=await Me.from("profiles").insert([{id:U.user.id,name:m,gemini_api_key:y}]);B&&console.error("Profile creation error:",B);const z={id:U.user.id,email:U.user.email,name:m,geminiApiKey:y};t(z)}}}catch(U){A(U.message||" .   .")}finally{w(!1)}},D=async()=>{w(!0),A(null);try{const{error:N}=await Me.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(N)throw N}catch(N){A(N.message||"Google  ."),w(!1)}};return S.jsx("div",{className:"min-h-screen bg-[#fbfbfa] flex items-center justify-center p-6 font-sans",children:S.jsxs("div",{className:"max-w-[400px] w-full space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-1000",children:[S.jsxs("div",{className:"text-center space-y-4",children:[S.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#37352f] text-white rounded-[22px] shadow-2xl mb-2 rotate-3 hover:rotate-0 transition-transform duration-500",children:S.jsx(Ei,{size:32})}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("h1",{className:"text-3xl font-normal tracking-tight text-[#37352f]",children:"LifeSync AI"}),S.jsx("p",{className:"text-[#787774] font-normal",children:"    "})]})]}),S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-3xl p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] space-y-6",children:[S.jsxs("div",{className:"flex p-1 bg-[#f1f1f0] rounded-xl mb-4",children:[S.jsx("button",{onClick:()=>s(!0),className:`flex-1 py-2 text-sm font-normal rounded-lg transition-all ${n?"bg-white text-[#37352f] shadow-sm":"text-[#787774] hover:text-[#37352f]"}`,children:""}),S.jsx("button",{onClick:()=>s(!1),className:`flex-1 py-2 text-sm font-normal rounded-lg transition-all ${n?"text-[#787774] hover:text-[#37352f]":"bg-white text-[#37352f] shadow-sm"}`,children:""})]}),S.jsxs("form",{onSubmit:C,className:"space-y-4",children:[!n&&S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider ml-1",children:""}),S.jsxs("div",{className:"relative",children:[S.jsx(d_,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#9b9a97]"}),S.jsx("input",{type:"text",placeholder:"",value:m,onChange:N=>h(N.target.value),required:!n,className:"w-full pl-11 pr-4 py-3 bg-[#f7f7f5] border-none rounded-xl focus:ring-2 focus:ring-[#37352f]/10 transition-all outline-none text-sm"})]})]}),S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider ml-1",children:""}),S.jsxs("div",{className:"relative",children:[S.jsx(dT,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#9b9a97]"}),S.jsx("input",{type:"email",placeholder:"name@example.com",value:r,onChange:N=>l(N.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-[#f7f7f5] border-none rounded-xl focus:ring-2 focus:ring-[#37352f]/10 transition-all outline-none text-sm"})]})]}),S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider ml-1",children:""}),S.jsxs("div",{className:"relative",children:[S.jsx(aT,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#9b9a97]"}),S.jsx("input",{type:"password",placeholder:"",value:u,onChange:N=>d(N.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-[#f7f7f5] border-none rounded-xl focus:ring-2 focus:ring-[#37352f]/10 transition-all outline-none text-sm"})]})]}),!n&&S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider ml-1",children:"Gemini API Key ()"}),S.jsxs("div",{className:"relative",children:[S.jsx(Ei,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#9b9a97]"}),S.jsx("input",{type:"password",placeholder:"AIza...",value:y,onChange:N=>b(N.target.value),className:"w-full pl-11 pr-4 py-3 bg-[#f7f7f5] border-none rounded-xl focus:ring-2 focus:ring-[#37352f]/10 transition-all outline-none text-sm font-mono placeholder:font-sans"})]}),S.jsx("p",{className:"text-[10px] text-[#9b9a97] ml-1",children:"    ."})]}),T&&S.jsx("p",{className:"text-xs text-[#eb5757] font-normal ml-1 animate-in shake-1 duration-300",children:T}),S.jsx("button",{type:"submit",disabled:_,className:"w-full bg-[#37352f] text-white py-3.5 rounded-xl font-normal text-sm hover:bg-black transition-all shadow-lg flex items-center justify-center gap-2 group mt-4 disabled:opacity-70 disabled:cursor-not-allowed",children:_?S.jsx(oT,{size:18,className:"animate-spin"}):S.jsxs(S.Fragment,{children:[n?"":" ",S.jsx(Lx,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})})]}),S.jsxs("div",{className:"relative py-4",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-[#f1f1f0]"})}),S.jsx("div",{className:"relative flex justify-center text-[10px] uppercase tracking-widest text-[#9b9a97]",children:S.jsx("span",{className:"bg-white px-3 font-normal",children:"  "})})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("button",{className:"flex items-center justify-center gap-2 py-2.5 border border-[#e9e9e8] rounded-xl hover:bg-[#f7f7f5] transition-all text-xs font-normal text-[#37352f]",children:[S.jsx(tT,{size:16})," GitHub"]}),S.jsxs("button",{type:"button",onClick:D,disabled:_,className:"flex items-center justify-center gap-2 py-2.5 border border-[#e9e9e8] rounded-xl hover:bg-[#f7f7f5] transition-all text-xs font-normal text-[#37352f] disabled:opacity-50",children:[S.jsx("div",{className:"w-4 h-4 bg-[#4285F4] rounded-sm flex items-center justify-center text-[10px] text-white font-normal",children:"G"})," Google"]})]})]}),S.jsxs("p",{className:"text-center text-xs text-[#9b9a97] font-normal",children:["  LifeSync AI ",S.jsx("span",{className:"underline cursor-pointer",children:" "}),"  ",S.jsx("br",{}),S.jsx("span",{className:"underline cursor-pointer",children:" "}),"  ."]})]})})},IP=[{id:"1",date:"2026-02-08",type:"feature",title:"  ",content:"     ,         ."},{id:"2",date:"2026-02-08",type:"style",title:"   ",content:"   , ,     UI  ."},{id:"3",date:"2026-02-08",type:"fix",title:"    ",content:"AI   ,           ."}],MP={feature:{label:"",color:"#2ecc71"},fix:{label:"",color:"#e74c3c"},style:{label:"",color:"#3498db"},refactor:{label:"",color:"#f39c12"}},DP=()=>S.jsxs("div",{className:"max-w-[900px] mx-auto px-2 pb-20",children:[S.jsx("div",{className:"flex items-start mb-8 pt-4",children:S.jsxs("div",{children:[S.jsx("h1",{className:"text-4xl font-normal mb-3 tracking-tight",children:" "}),S.jsx("p",{className:"text-[#9b9a97] text-lg font-normal",children:"LifeSync AI     ."})]})}),S.jsx("div",{className:"space-y-6",children:IP.map(t=>{const e=MP[t.type];return S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-xl p-6 hover:shadow-sm transition-shadow",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[S.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-normal text-white",style:{backgroundColor:e.color},children:e.label}),S.jsx("span",{className:"text-xs text-[#9b9a97]",children:t.date})]}),S.jsx("h3",{className:"text-lg font-normal text-[#37352f] mb-2",children:t.title}),S.jsx("p",{className:"text-sm text-[#787774] leading-relaxed",children:t.content})]},t.id)})}),S.jsxs("div",{className:"mt-16 p-8 rounded-xl bg-[#f7f7f5] border border-[#e9e9e8] text-center",children:[S.jsx("h3",{className:"text-2xl font-normal text-[#37352f] mb-2",children:" ."}),S.jsx("p",{className:"text-[#9b9a97] font-normal",children:"          ."})]})]}),kP=({notifications:t,onRead:e,onLinkClick:n})=>{const s=t.filter(m=>!m.read),[r,l]=M.useState(s[0]||null);M.useEffect(()=>{s.length>0&&!r&&l(s[0])},[s,r]);const u=(m,h)=>{m.stopPropagation(),e(h),l(null)},d=m=>{m.link&&n(m.link),e(m.id),l(null)};return r?S.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] w-80 bg-white border border-[#e9e9e8] rounded-2xl shadow-2xl p-4 animate-in slide-in-from-right-8 fade-in duration-300 cursor-pointer hover:border-gray-300 transition-all",onClick:()=>d(r),children:S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("div",{className:"mt-1 w-10 h-10 rounded-full bg-black flex items-center justify-center text-lg flex-shrink-0 overflow-hidden border border-[#e9e9e8]",children:r.avatar&&S.jsx("img",{src:r.avatar,alt:r.title,className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("h4",{className:"text-sm font-normal text-[#37352f] truncate",children:r.title}),S.jsx("p",{className:"text-[13px] text-[#787774] line-clamp-2 mt-0.5 leading-snug",children:r.message}),S.jsx("div",{className:"mt-2 text-[11px] text-[#9b9a97]",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),S.jsx("button",{onClick:m=>u(m,r.id),className:"p-1 hover:bg-[#efefef] rounded-md text-[#9b9a97] transition-colors",children:S.jsx(Hu,{size:14})})]})}):null},sc=[{id:"ARIA",name:"Aria",emoji:"",role:"Life Analyst",personality:"Data-driven and empathetic assistant focused on practical improvement.",tone:"Warm, direct, and structured.",color:"#37352f"}],i_={journal_added:[`    .

       .`],scheduled_digest:[`  .

,  ,        .`]},UP={journal_added_good:{agents:["ARIA"],chainTypes:["first"]},journal_added_bad:{agents:["ARIA"],chainTypes:["first"]},journal_added_neutral:{agents:["ARIA"],chainTypes:["first"]},scheduled_digest:{agents:["ARIA"],chainTypes:["first"]}},OP=(t,e)=>t.replace(/\{(\w+)\}/g,(n,s)=>e[s]!==void 0?String(e[s]):n),s_=t=>t.length>0?t[Math.floor(Math.random()*t.length)]:void 0,PP=(t,e)=>{const n=e.find(s=>s.id===t)||sc.find(s=>s.id===t);return(n==null?void 0:n.name)||t},LP=(t,e)=>s_(t==="ARIA"?i_[e]||[]:i_[e]||[]),cS=(t,e,n,s,r,l="gemini-1.5-flash",u)=>{const{trigger:d,data:m}=t;let h=d;d==="journal_added"&&(m.mood==="good"||m.mood===""?h="journal_added_good":m.mood==="bad"||m.mood===""?h="journal_added_bad":h="journal_added_neutral");const y=UP[h];if(!y)return;const{agents:b}=y;let _,w;b.forEach((T,A)=>{const C=A*3500;setTimeout(async()=>{let D="";const N=PP(T,e),I=e.find(B=>B.id===T)||sc.find(B=>B.id===T);if(s&&I)try{const B=d==="scheduled_digest"?"This is a 4-hour cadence AI diary entry.":"This is an AI diary entry triggered by a newly written memo.",z=[`You are ${I.name}, an AI observer keeping a private diary about one human.`,"Write in Korean.","This is NOT a message to the user. This is your private diary.",'Write from first-person AI perspective ("").','Do not address the user directly (avoid "", "", "~").',"Write like a human diary entry in natural prose.","Do not use markdown, bullets, numbered lists, or section headers.","Main theme: the human's long-term growth.","Include your own curiosity, hypotheses, and growth-design ideas.","Quality requirements:","- Concise and high quality (one or two paragraphs).","- Personalize only with provided context; do not invent facts.","- Keep the tone introspective, observant, and candid.","- Use concrete details from context (todo/event/memo patterns).",`${B}`,'If something is inferred, explicitly mark it as "".',"User context JSON:",JSON.stringify({trigger:d,data:m,previousAgentName:w||null},null,2)].join(`
`);D=await Th(s,z,r,l)}catch(B){console.warn(`Gemini API failed for ${T}, fallback template will be used.`,B)}if(!D)return;const U=crypto.randomUUID(),L={id:U,author:T,content:D,timestamp:new Date().toISOString(),replyTo:_,trigger:d};n(L),_=U,w=N},C)})},qP=async(t,e,n,s,r,l,u,d="gemini-1.5-flash",m)=>{const h=s.length>0?s[0]:sc[0],y=n?n.filter(T=>!T.completed).length:0,b=n?n.filter(T=>T.completed).length:0,_=e?e.length:0;if(l)try{const T=`
User wrote a memo.
Title: ${t.title}
Content: ${t.content}
Mood: ${t.mood}

Current snapshot:
- Events: ${_}
- Completed todos: ${b}
- Pending todos: ${y}
`,A=uI(h,"Write a short empathetic comment in Korean based on the memo and current snapshot. Keep it concise.",T),C=await Th(l,A,u,d);if(C){r({authorId:h.id,authorName:h.name,authorEmoji:h.emoji||"",content:C}),m&&m({type:"comment",title:`${h.name}  `,message:C,link:{view:"journal",id:t.title},avatar:h.avatar});return}}catch(T){console.error("Gemini API Error in Journal Comment:",T)}const w=LP(h.id,"journal_added");w&&setTimeout(()=>{const T=OP(w,{mood:t.mood});r({authorId:h.id,authorName:h.name,authorEmoji:h.emoji||"",content:T}),m&&m({type:"comment",title:`${h.name}  `,message:T,link:{view:"journal",id:t.title},avatar:h.avatar})},1500)},GP=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_AGENTS:sc,generateCommunityPosts:cS,generateJournalComment:qP},Symbol.toStringTag,{value:"Module"})),HP=[["?",""],["?",""],["",""],["",""],["??",""],["",""],["",""],["",""],["?",""],["?",""],["?",""],["?",""],["",""],["?",""],["",""],["??",""],["?",""],["",""],["",""],["?",""],["",""]],ti=t=>{if(typeof t!="string"||t.length===0)return t??"";let e=t;for(const[n,s]of HP)e.includes(n)&&(e=e.split(n).join(s));return e},an=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return console.error(`Error loading ${t} from storage`,n),e}},yn=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},zP=[{id:"tag_1",name:"",color:"#4c2889"},{id:"tag_2",name:" ",color:"#DEB13B"},{id:"tag_3",name:"",color:"#35B37E"}],Of=[{id:"default",title:" ",order:1}],BP=t=>"default",VP=()=>{var vi,Ri,Ja;const[t,e]=M.useState(()=>an("lifesync_user",null)),[n,s]=M.useState(!1),[r,l]=M.useState("login"),[u,d]=M.useState(()=>an("ls_current_view","chat")),[m,h]=M.useState(()=>{const R=an("ls_events",[]);return Array.isArray(R)?R:[]}),[y,b]=M.useState(()=>{const R=an("ls_todo_lists",[]).map(P=>({...P,title:ti(P.title)}));return R&&(R.some(P=>P.id==="must_do")||R.length>=4)?Of:R&&Array.isArray(R)&&R.length>0?R:Of}),[_,w]=M.useState(()=>an("ls_todos",[]).map(P=>({...P,category:P.category??"personal",listId:P.listId??BP(P.category)}))),[T,A]=M.useState(()=>an("ls_entries",[])),[C,D]=M.useState(()=>an("ls_posts",[])),[N,I]=M.useState(()=>an("ls_community",[])),[U,L]=M.useState(()=>an("ls_agents",Kf).map(P=>({...P,name:ti(P.name),role:ti(P.role),personality:ti(P.personality)}))),[B,z]=M.useState(()=>an("ls_activity",[])),[Z,W]=M.useState(()=>{const R=an("ls_settings",{autoAiReactions:!0,chatActionConfirm:!0,apiConnections:[],activeConnectionId:void 0});if(Array.isArray(R.apiConnections)||(R.apiConnections=[]),R.geminiApiKey&&(!R.apiConnections||R.apiConnections.length===0)&&(R.apiConnections=[{id:"legacy_gemini",provider:"gemini",modelName:"gemini-1.5-flash",apiKey:R.geminiApiKey,isActive:!0}],R.activeConnectionId="legacy_gemini"),!R.activeConnectionId){const P=R.apiConnections.find(j=>j.isActive);R.activeConnectionId=P==null?void 0:P.id}return R}),[ie,ue]=M.useState(()=>{const R=an("ls_calendar_tags",[]);return R&&Array.isArray(R)&&R.length>0?R.map(P=>({...P,name:ti(P.name)})):zP}),[fe,_e]=M.useState(()=>{const R=an("ls_journal_categories",[]);return R&&Array.isArray(R)&&R.length>0?R.map(j=>{const F=ti(j.name);return F==="AI"?{...j,name:""}:{...j,name:F}}):[{id:"ai",name:""}]}),[Ce,qe]=M.useState(null),[J,ee]=M.useState(()=>{const R=an("ls_journal_categories",[]);if(R&&Array.isArray(R)&&R.length>0){const P=R[0],j=ti(P.name);return j==="AI"?"":j}return""}),[ae,be]=M.useState(""),[de,k]=M.useState(!1),[G,oe]=M.useState(""),[le,K]=M.useState(null),[Q,ge]=M.useState(""),[Ae,ye]=M.useState(null),[Ee,He]=M.useState(null),[Ne,je]=M.useState(((vi=U[0])==null?void 0:vi.id)||"ARIA"),[ke,pe]=M.useState(!1),[ze,Gt]=M.useState(""),[Zt,pt]=M.useState(null),[ht,It]=M.useState(""),[Ht,re]=M.useState(null),he=gb(Z),[zt,Mt]=M.useState(()=>an("ls_chat_sessions",[])),[Et,bt]=M.useState(()=>an("ls_active_chat_session",null)),[mn,Ai]=M.useState(()=>an("ls_notifications",[])),at=M.useRef(null),[Mn,Dn]=M.useState(null),Jt=M.useRef(null);M.useEffect(()=>yn("ls_events",m),[m]),M.useEffect(()=>yn("ls_todos",_),[_]),M.useEffect(()=>yn("ls_entries",T),[T]),M.useEffect(()=>yn("ls_posts",C),[C]),M.useEffect(()=>yn("ls_community",N),[N]),M.useEffect(()=>yn("ls_agents",U),[U]),M.useEffect(()=>yn("ls_todo_lists",y),[y]),M.useEffect(()=>yn("ls_activity",B),[B]),M.useEffect(()=>{yn("ls_settings",Z),t&&Z.geminiApiKey&&Me.from("profiles").update({gemini_api_key:Z.geminiApiKey}).eq("id",t.id)},[Z,t]),M.useEffect(()=>yn("ls_current_view",u),[u]),M.useEffect(()=>yn("ls_calendar_tags",ie),[ie]),M.useEffect(()=>yn("ls_chat_sessions",zt),[zt]),M.useEffect(()=>yn("ls_active_chat_session",Et),[Et]),M.useEffect(()=>yn("ls_notifications",mn),[mn]);const wn=R=>{Ai(P=>P.map(j=>j.id===R?{...j,read:!0}:j))};M.useEffect(()=>yn("ls_journal_categories",fe),[fe]),M.useEffect(()=>{(async()=>{var F,ce,Se;const{data:{session:j}}=await Me.auth.getSession();if(j!=null&&j.user){let{data:we}=await Me.from("profiles").select("*").eq("id",j.user.id).single();if(!we){const{data:lt,error:Ie}=await Me.from("profiles").insert([{id:j.user.id,name:((F=j.user.user_metadata)==null?void 0:F.full_name)||((ce=j.user.email)==null?void 0:ce.split("@")[0]),gemini_api_key:""}]).select().single();Ie||(we=lt)}e({id:j.user.id,email:j.user.email||"",name:(we==null?void 0:we.name)||((Se=j.user.email)==null?void 0:Se.split("@")[0]),geminiApiKey:(we==null?void 0:we.gemini_api_key)||""}),Bt(j.user.id)}})();const{data:{subscription:P}}=Me.auth.onAuthStateChange(async(j,F)=>{var ce,Se,we;if(j==="SIGNED_IN"&&(F!=null&&F.user)){let{data:lt}=await Me.from("profiles").select("*").eq("id",F.user.id).single();if(!lt){const{data:Ie,error:We}=await Me.from("profiles").insert([{id:F.user.id,name:((ce=F.user.user_metadata)==null?void 0:ce.full_name)||((Se=F.user.email)==null?void 0:Se.split("@")[0]),gemini_api_key:""}]).select().single();We||(lt=Ie)}e({id:F.user.id,email:F.user.email||"",name:(lt==null?void 0:lt.name)||((we=F.user.email)==null?void 0:we.split("@")[0]),geminiApiKey:(lt==null?void 0:lt.gemini_api_key)||""}),Bt(F.user.id)}else j==="SIGNED_OUT"&&e(null)});return()=>P.unsubscribe()},[]);const Bt=async R=>{const[{data:P},{data:j},{data:F},{data:ce},{data:Se},{data:we}]=await Promise.all([Me.from("todo_lists").select("*").eq("user_id",R).order("order"),Me.from("todos").select("*").eq("user_id",R).order("order"),Me.from("journal_categories").select("*").eq("user_id",R),Me.from("journal_entries").select("*").eq("user_id",R).order("date",{ascending:!1}),Me.from("calendar_events").select("*").eq("user_id",R),Me.from("community_posts").select("*").eq("user_id",R).order("timestamp",{ascending:!1})]);if((!P||P.length===0)&&(!Se||Se.length===0)&&(!j||j.length===0)){console.log("Supabase is empty. Migrating local data..."),y.length>0&&await Me.from("todo_lists").insert(y.map(Ie=>({id:Ie.id,user_id:R,title:Ie.title,order:Ie.order}))),_.length>0&&await Me.from("todos").insert(_.map(Ie=>({id:Ie.id,user_id:R,list_id:Ie.listId,text:Ie.text,completed:Ie.completed,order:0}))),m.length>0&&await Me.from("calendar_events").insert(m.map(Ie=>({id:Ie.id,user_id:R,title:Ie.title,start_time:Ie.date+(Ie.startTime?`T${Ie.startTime}:00`:"T00:00:00"),end_time:Ie.date+(Ie.endTime?`T${Ie.endTime}:00`:"T23:59:59"),description:Ie.description,tags:[Ie.type]}))),T.length>0&&await Me.from("journal_entries").insert(T.map(Ie=>({id:Ie.id,user_id:R,title:Ie.title,content:Ie.content,mood:Ie.mood,date:Ie.date,order:Ie.order})));return}if(P&&b(P.map(Ie=>({...Ie,title:ti(Ie.title)}))),j&&w(j),F&&_e(F.map(Ie=>({...Ie,name:ti(Ie.name)}))),ce){const Ie=new Map((F||[]).map(We=>[We.id,ti(We.name)]));A(ce.map(We=>{const rs=We.mood==="good"||We.mood==="bad"||We.mood==="neutral"?We.mood:"neutral";return{id:We.id,title:ti(We.title||""),content:ti(We.content||""),date:typeof We.date=="string"?We.date:new Date().toISOString(),mood:rs,category:We.category_id&&Ie.get(We.category_id)||"",order:typeof We.order=="number"?We.order:0}}))}Se&&h(Se),we&&I(we)},wr=async()=>{window.confirm(" ?")&&(await Me.auth.signOut(),e(null),localStorage.removeItem("lifesync_user"),window.location.reload())};M.useEffect(()=>{var j;const R=new Set(y.map(F=>F.id)),P=((j=y[0])==null?void 0:j.id)??"routine";w(F=>F.map(ce=>ce.listId&&R.has(ce.listId)?ce:{...ce,listId:P}))},[y]);const fo=async R=>{const P=N.length>0?Math.min(...N.map(F=>F.order||0))-1:0,j={...R,order:P};I(F=>[j,...F]),t&&await Me.from("community_posts").insert([{id:R.id,user_id:t.id,author:R.author,content:R.content,timestamp:R.timestamp,reply_to:R.replyTo,trigger:R.trigger,order:P}])},xr=(R,P)=>{I(j=>j.map(F=>F.id===R?{...F,...P}:F))},ts=R=>{window.confirm("  AI  ?")&&(I(P=>P.filter(j=>j.id!==R)),Ee===R&&He(null))},Ci=(R,P)=>{const j={id:crypto.randomUUID(),timestamp:new Date().toISOString(),...P};A(F=>F.map(ce=>ce.id===R?{...ce,comments:[...ce.comments||[],j]}:ce))},St=(R,P)=>{const j={id:crypto.randomUUID(),timestamp:new Date().toISOString(),...P};I(F=>F.map(ce=>ce.id===R?{...ce,comments:[...ce.comments||[],j]}:ce))},nt=R=>{if(!Z.autoAiReactions)return;const P={...R,data:{...R.data,pendingTodos:_.filter(F=>!F.completed).length,completedTodos:_.filter(F=>F.completed).length,totalEvents:m.length,recentJournal:T.slice(0,3).map(F=>({title:F.title||"",content:(F.content||"").slice(0,280),mood:F.mood,date:F.date}))}},j=F=>{W(ce=>{var Se,we;return{...ce,apiUsage:{totalRequests:(((Se=ce.apiUsage)==null?void 0:Se.totalRequests)||0)+F.totalRequests,totalTokens:(((we=ce.apiUsage)==null?void 0:we.totalTokens)||0)+F.totalTokens,lastRequestDate:F.lastRequestDate}}})};cS(P,U,fo,he==null?void 0:he.apiKey,j,he==null?void 0:he.modelName)};M.useEffect(()=>{const P="ls_last_scheduled_post_key",j=we=>{const lt=we.getFullYear(),Ie=String(we.getMonth()+1).padStart(2,"0"),We=String(we.getDate()).padStart(2,"0"),rs=Math.floor(we.getHours()/4)*4,ho=String(rs).padStart(2,"0");return`${lt}-${Ie}-${We}T${ho}`},F=()=>{const we=new Date,lt=j(we);localStorage.getItem(P)===lt||Jt.current===lt||(Jt.current=lt,localStorage.setItem(P,lt),nt({trigger:"scheduled_digest",data:{slot:"every_4_hours",date:we.toISOString()}}))},ce=()=>{F()};ce();const Se=setInterval(ce,6e4);return()=>clearInterval(Se)},[Z.autoAiReactions,he==null?void 0:he.apiKey,T,m,_,U]);const Dt=async R=>{const P=R.trim();if(!P)return;const j=Math.max(0,...y.map(ce=>ce.order))+1,F={id:crypto.randomUUID(),title:P,order:j};b(ce=>[...ce,F]),t&&await Me.from("todo_lists").insert([{id:F.id,user_id:t.id,title:F.title,order:F.order}])},en=async R=>{const P=R.trim();if(!P||fe.some(F=>F.name===P))return;const j={id:crypto.randomUUID(),name:P};_e(F=>[...F,j]),t&&await Me.from("journal_categories").insert([{id:j.id,user_id:t.id,name:j.name}])},un=R=>{const P=R.trim();if(!P||U.some(F=>F.name===P))return;const j={id:crypto.randomUUID(),name:P,emoji:"",role:" ",personality:"   AI .",tone:"  ",color:"#37352f"};L(F=>[...F,j])},Vt=(R,P)=>{const j=P.trim();j&&L(F=>F.map(ce=>ce.id===R?{...ce,name:j}:ce))},cn=R=>{var j;const P=U.find(F=>F.id===R);P&&window.confirm(`'${P.name}'  ?    .`)&&(L(F=>F.filter(ce=>ce.id!==R)),Ne===R&&je(((j=U.find(F=>F.id!==R))==null?void 0:j.id)||""))},xn=async R=>{var j;const P=fe.find(F=>F.id===R);P&&window.confirm(`'${P.name}'  ?     .`)&&(_e(F=>F.filter(ce=>ce.id!==R)),t&&await Me.from("journal_categories").delete().eq("id",R),J===P.name&&ee(((j=fe.find(F=>F.id!==R))==null?void 0:j.name)||""))},At=(R,P)=>{b(j=>j.map(F=>F.id===R?{...F,...P}:F))},kn=R=>{b(R)},pn=async R=>{const P=y.find(j=>j.id===R);P&&window.confirm(`'${P.title}'  ?     .`)&&(b(j=>j.filter(F=>F.id!==R)),w(j=>j.filter(F=>F.listId!==R)),t&&(await Me.from("todos").delete().eq("list_id",R),await Me.from("todo_lists").delete().eq("id",R)))},it=R=>{const P={id:crypto.randomUUID(),timestamp:new Date().toISOString(),...R};z(j=>[P,...j].slice(0,200))},Yt=(R,P)=>{const j=crypto.randomUUID();at.current=P,Dn({id:j,label:R}),setTimeout(()=>{Dn(F=>(F==null?void 0:F.id)===j?null:F)},6e3)},oi=()=>{var R;(R=at.current)==null||R.call(at),Dn(null)},Un=()=>{const R={exportedAt:new Date().toISOString(),events:m,todos:_,entries:T,posts:C,communityPosts:N,agents:U,settings:Z,activityLog:B,userName:localStorage.getItem("ls_userName")||""},P=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),j=URL.createObjectURL(P),F=document.createElement("a");F.href=j,F.download=`lifesync-export-${new Date().toISOString().slice(0,10)}.json`,F.click(),URL.revokeObjectURL(j)},yi=async()=>{if(window.confirm(`  ? (/ //AI / )
    .`)){if(t)try{const P=t.id,F=(await Promise.all([Me.from("community_posts").delete().eq("user_id",P),Me.from("calendar_events").delete().eq("user_id",P),Me.from("journal_entries").delete().eq("user_id",P),Me.from("todos").delete().eq("user_id",P),Me.from("todo_lists").delete().eq("user_id",P)])).find(ce=>ce.error);if(F!=null&&F.error)throw F.error}catch(P){console.error("Failed to clear remote records:",P),alert("     .    .");return}h([]),w([]),b(Of),A([]),D([]),I([]),z([]),qe(null),He(null),["ls_events","ls_todos","ls_entries","ls_posts","ls_community","ls_activity","ls_userName","ls_todo_lists"].forEach(P=>{localStorage.removeItem(P)})}},Tn=()=>{z([]),localStorage.removeItem("ls_activity")},Ct=async R=>{var P;h(j=>[...j,R]),t&&await Me.from("calendar_events").insert([{id:R.id,user_id:t.id,title:R.title,start_time:R.date+(R.startTime?`T${R.startTime}:00`:"T00:00:00"),end_time:R.date+(R.endTime?`T${R.endTime}:00`:"T23:59:59"),description:R.description,color:((P=ie.find(j=>j.id===R.type))==null?void 0:P.color)||"#4c2889",tags:[R.type]}]),it({type:"event_added",label:` : ${R.title}`,meta:{id:R.id,date:R.date}}),Yt(" ",async()=>{h(j=>j.filter(F=>F.id!==R.id)),t&&await Me.from("calendar_events").delete().eq("id",R.id),it({type:"event_deleted",label:` (Undo): ${R.title}`,meta:{id:R.id}})}),nt({trigger:"event_added",data:{title:R.title,date:R.date,weekCount:m.filter(j=>{const F=new Date(j.date),ce=new Date;return F>=ce&&F<=new Date(ce.getTime()+10080*60*1e3)}).length+1}})},dn=async(R,P)=>{var j;h(F=>F.map(ce=>ce.id===R.id?R:ce)),t&&await Me.from("calendar_events").update({title:R.title,start_time:R.date+(R.startTime?`T${R.startTime}:00`:"T00:00:00"),end_time:R.date+(R.endTime?`T${R.endTime}:00`:"T23:59:59"),description:R.description,color:((j=ie.find(F=>F.id===R.type))==null?void 0:j.color)||"#4c2889",tags:[R.type]}).eq("id",R.id),it({type:"event_updated",label:` : ${R.title}`,meta:{id:R.id,date:R.date}}),Yt(" ",async()=>{h(F=>F.map(ce=>ce.id===P.id?P:ce)),t&&await Me.from("calendar_events").update({title:P.title,start_time:P.date+(P.startTime?`T${P.startTime}:00`:"T00:00:00"),end_time:P.date+(P.endTime?`T${P.endTime}:00`:"T23:59:59"),description:P.description,tags:[P.type]}).eq("id",P.id),it({type:"event_updated",label:` (Undo): ${P.title}`,meta:{id:P.id,date:P.date}})})},ns=async R=>{const P=m.find(j=>j.id===R);P&&(h(j=>j.filter(F=>F.id!==R)),t&&await Me.from("calendar_events").delete().eq("id",R),it({type:"event_deleted",label:` : ${P.title}`,meta:{id:R}}),Yt(" ",async()=>{h(j=>[P,...j]),t&&await Me.from("calendar_events").insert([{id:P.id,user_id:t.id,title:P.title,start_time:P.date+(P.startTime?`T${P.startTime}:00`:"T00:00:00"),end_time:P.date+(P.endTime?`T${P.endTime}:00`:"T23:59:59"),description:P.description,tags:[P.type]}]),it({type:"event_added",label:` (Undo): ${P.title}`,meta:{id:P.id,date:P.date}})}))},Os=async(R,P,j,F="personal")=>{var lt,Ie;const ce=P||((lt=y[0])==null?void 0:lt.id)||"routine",Se=((Ie=y.find(We=>We.id===ce))==null?void 0:Ie.title)||"",we={id:crypto.randomUUID(),text:R,completed:!1,date:new Date().toISOString(),category:F,listId:ce,dueDate:j};w(We=>[...We,we]),t&&await Me.from("todos").insert([{id:we.id,user_id:t.id,list_id:ce,text:we.text,completed:we.completed,order:_.length}]),it({type:"todo_added",label:`  : ${R} (${Se})`,meta:{id:we.id,listId:ce}}),Yt("  ",async()=>{w(We=>We.filter(rs=>rs.id!==we.id)),t&&await Me.from("todos").delete().eq("id",we.id),it({type:"todo_deleted",label:`  (Undo): ${R}`,meta:{id:we.id}})}),nt({trigger:"todo_added",data:{text:R,total:_.length+1,pending:_.filter(We=>!We.completed).length+1}})},oc=async(R,P)=>{if(w(j=>j.map(F=>F.id===R?{...F,...P}:F)),t){const j={};P.text!==void 0&&(j.text=P.text),P.completed!==void 0&&(j.completed=P.completed),P.listId!==void 0&&(j.list_id=P.listId),Object.keys(j).length>0&&await Me.from("todos").update(j).eq("id",R)}},rc=async R=>{var ce;const P=_.find(Se=>Se.id===R);if(!P)return;const F=!P.completed;w(Se=>Se.map(we=>we.id===R?{...we,completed:F}:we)),t&&await Me.from("todos").update({completed:F}).eq("id",R),F&&(it({type:"todo_completed",label:`  : ${P.text}`,meta:{id:P.id}}),Yt(" ",async()=>{w(Se=>Se.map(we=>we.id===R?{...we,completed:!1}:we)),t&&await Me.from("todos").update({completed:!1}).eq("id",R),it({type:"todo_uncompleted",label:` (Undo): ${P.text}`,meta:{id:P.id}})}),nt({trigger:"todo_completed",data:{text:P.text,completed:_.filter(Se=>Se.completed).length+1,pending:_.filter(Se=>!Se.completed).length-1,completionRate:Math.round((_.filter(Se=>Se.completed).length+1)/_.length*100),nextTodo:((ce=_.find(Se=>!Se.completed&&Se.id!==R))==null?void 0:ce.text)||""}}))},ja=async R=>{const P=_.find(j=>j.id===R);P&&(w(j=>j.filter(F=>F.id!==R)),t&&await Me.from("todos").delete().eq("id",R),it({type:"todo_deleted",label:`  : ${P.text}`,meta:{id:R}}),Yt("  ",async()=>{w(j=>[P,...j]),t&&await Me.from("todos").insert([{id:P.id,user_id:t.id,list_id:P.listId,text:P.text,completed:P.completed,order:_.length}]),it({type:"todo_added",label:`  (Undo): ${P.text}`,meta:{id:P.id}})}))},is=R=>{Ix(async()=>{const{generateJournalComment:P}=await Promise.resolve().then(()=>GP);return{generateJournalComment:P}},void 0).then(({generateJournalComment:P})=>{P({title:R.title,content:R.content,mood:R.mood},m,_,U,j=>Ci(R.id,j),he==null?void 0:he.apiKey,j=>W(F=>{var ce,Se;return{...F,apiUsage:{totalRequests:(((ce=F.apiUsage)==null?void 0:ce.totalRequests)||0)+j.totalRequests,totalTokens:(((Se=F.apiUsage)==null?void 0:Se.totalTokens)||0)+j.totalTokens,lastRequestDate:j.lastRequestDate}}}),he==null?void 0:he.modelName)})},Ps=async(R,P,j="",F="neutral")=>{const ce=fe.find(Ie=>Ie.name===j),Se={id:crypto.randomUUID(),title:R,content:P,category:j,mood:F,date:new Date().toISOString(),order:0},we=T.length>0?Math.min(...T.map(Ie=>Ie.order||0))-1:0,lt={...Se,order:we};A(Ie=>[lt,...Ie]),t&&await Me.from("journal_entries").insert([{id:Se.id,user_id:t.id,title:R,content:P,category_id:ce==null?void 0:ce.id,mood:Se.mood,date:Se.date,order:we}]),it({type:"journal_added",label:` : ${R}`,meta:{id:Se.id,mood:F,title:R}}),Yt(" ",async()=>{A(Ie=>Ie.filter(We=>We.id!==Se.id)),t&&await Me.from("journal_entries").delete().eq("id",Se.id),it({type:"journal_deleted",label:" (Undo)",meta:{id:Se.id}})}),nt({trigger:"journal_added",data:{mood:F==="good"?"":F==="bad"?"":""}}),is({id:Se.id,title:Se.title,content:Se.content,mood:Se.mood})},ss=async R=>{const P=T.find(j=>j.id===R);P&&(A(j=>j.filter(F=>F.id!==R)),t&&await Me.from("journal_entries").delete().eq("id",R),it({type:"journal_deleted",label:` : ${P.content.slice(0,20)}${P.content.length>20?"":""}`,meta:{id:R}}),Yt(" ",async()=>{if(A(j=>[P,...j]),t){const j=fe.find(F=>F.name===P.category);await Me.from("journal_entries").insert([{id:P.id,user_id:t.id,title:P.title,content:P.content,category_id:j==null?void 0:j.id,mood:P.mood,date:P.date,order:P.order}])}it({type:"journal_added",label:" (Undo)",meta:{id:P.id}})}))},os=async(R,P)=>{if(A(j=>j.map(F=>F.id===R?{...F,...P}:F)),t){const j={};if(P.title!==void 0&&(j.title=P.title),P.content!==void 0&&(j.content=P.content),P.mood!==void 0&&(j.mood=P.mood),P.category!==void 0){const F=fe.find(ce=>ce.name===P.category);j.category_id=F==null?void 0:F.id}Object.keys(j).length>0&&await Me.from("journal_entries").update(j).eq("id",R)}},Ls=R=>{const P=T.find(j=>j.id===R);P&&is({id:P.id,title:P.title,content:P.content,mood:P.mood})},Ni=R=>D(P=>[R,...P]),kt=R=>L(R),Tr=[{id:"chat",label:"AI ",icon:hT},{id:"board",label:"AI ",icon:Ei},{id:"calendar",label:"",icon:u_},{id:"todo",label:" ",icon:xT},{id:"journal",label:"",icon:l_},{id:"devlog",label:"",icon:Xx}],Fa=()=>{switch(u){case"calendar":return S.jsx(lR,{events:m,tags:ie,onAddEvent:Ct,onDeleteEvent:ns,onUpdateEvent:dn});case"todo":return S.jsx(oI,{todos:_,lists:y,onAddList:Dt,onUpdateList:At,onUpdateListOrder:kn,onAddTodo:Os,onUpdateTodo:oc,onToggleTodo:rc,onDeleteTodo:ja,onDeleteList:pn});case"journal":return S.jsx(rI,{entries:T,categories:fe,selectedId:Ce,selectedCategory:J,searchQuery:ae,onSelectId:qe,onSelectCategory:ee,onSearchQuery:be,onAddEntry:Ps,onUpdateEntry:os,onDeleteEntry:ss,onAddCategory:en,onAddComment:Ci,onRequestAiComment:Ls,agents:U});case"chat":{const R=zt.find(P=>P.id===Et);return S.jsx(n_,{events:m,todos:_,entries:T,posts:C,todoLists:y,onAddEvent:Ct,onAddTodo:Os,onAddEntry:Ps,onAddPost:Ni,requireConfirm:Z.chatActionConfirm,settings:Z,agent:U[0],onUserMessage:P=>{if(!Et){const j=crypto.randomUUID(),F={id:j,title:P.slice(0,20)+(P.length>20?"...":""),messages:[],createdAt:new Date().toISOString(),lastMessageAt:new Date().toISOString()};Mt(ce=>[F,...ce]),bt(j)}nt({trigger:"chat_message",data:{text:P}})},initialMessages:R==null?void 0:R.messages,currentSessionId:Et,onUpdateMessages:(P,j)=>{Mt(F=>F.map(ce=>{if(ce.id===P){let Se=ce.title;if(Se===" "&&j.length>0){const we=j.find(lt=>lt.role==="user");we&&(Se=we.content.slice(0,20)+(we.content.length>20?"...":""))}return{...ce,messages:j,title:Se,lastMessageAt:new Date().toISOString()}}return ce}))}})}case"board":return S.jsx(aI,{agents:U,posts:N,selectedId:Ee,onSelectId:He,selectedAgentId:Ne,onUpdatePost:xr,onDeletePost:ts,onAddComment:St,onUpdateOrder:R=>I(R)});case"settings":return S.jsx(lI,{agents:U,onUpdateAgents:kt,settings:Z,onUpdateSettings:W,onExportData:Un,onClearAllData:yi,onClearActivity:Tn});case"api-settings":return S.jsx(dI,{settings:Z,onUpdateSettings:W});case"devlog":return S.jsx(DP,{});default:return S.jsx(n_,{events:m,todos:_,entries:T,posts:C,todoLists:y,onAddEvent:Ct,onAddTodo:Os,onAddEntry:Ps,onAddPost:Ni,requireConfirm:Z.chatActionConfirm,settings:Z,agent:U[0],onUserMessage:R=>nt({trigger:"chat_message",data:{text:R}})})}};return(Ri=Tr.find(R=>R.id===u))!=null&&Ri.label,n&&!t?S.jsxs("div",{className:"min-h-screen bg-white relative animate-in fade-in duration-300",children:[S.jsx("button",{onClick:()=>s(!1),className:"absolute top-8 right-8 z-[110] p-2 text-[#787774] hover:text-[#37352f] hover:bg-[#efefef] rounded-full transition-all","aria-label":"",children:S.jsx(Hu,{size:24})}),S.jsx(RP,{initialMode:r,onLogin:R=>{e(R),s(!1)}})]}):S.jsxs("div",{className:"flex h-screen bg-[#fbfbfa] font-sans selection:bg-[#2ecc71]/20 relative",children:[S.jsxs("aside",{className:"w-16 lg:w-[240px] bg-[#f7f7f5] border-r border-[#e9e9e8] flex flex-col justify-between transition-all duration-300 z-50 flex-shrink-0",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"p-4 lg:p-5 flex items-center gap-3 group cursor-pointer",onClick:()=>d("chat"),children:[S.jsx("div",{className:"w-8 h-8 bg-[#37352f] text-white rounded-[10px] flex items-center justify-center transition-transform group-hover:rotate-6",children:S.jsx(Ei,{size:16})}),S.jsx("span",{className:"hidden lg:block text-lg font-normal tracking-tight text-[#37352f]",children:"LifeSync AI"})]}),S.jsx("nav",{className:"px-2 space-y-0.5",children:Tr.map(R=>S.jsxs("button",{onClick:()=>d(R.id),className:`
                  w-full flex items-center px-3 py-1.5 rounded-[4px] transition-colors group
                  ${u===R.id?"bg-[#efefef] text-[#37352f] font-normal":"text-[#787774] hover:bg-[#efefef] hover:text-[#37352f]"}
                `,children:[S.jsx(R.icon,{size:18,className:u===R.id?"text-[#37352f]":"text-[#9b9a97] group-hover:text-[#37352f]"}),S.jsx("span",{className:"hidden lg:block ml-2.5 text-sm",children:R.label})]},R.id))}),u==="board"&&S.jsxs("div",{className:"hidden lg:block mt-4 pt-4 border-t border-[#e9e9e8] px-2 space-y-6",children:[S.jsxs("div",{className:"space-y-0.5",children:[S.jsxs("div",{className:"px-3 flex items-center justify-between mb-1.5 group",children:[S.jsx("span",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider",children:"AI "}),S.jsx("button",{onClick:()=>pe(!ke),className:`p-0.5 hover:bg-[#efefef] rounded transition-all ${ke?"bg-[#efefef]":""}`,children:S.jsx(uo,{size:14,className:"text-[#787774]"})})]}),ke&&S.jsx("div",{className:"px-2 mb-2",children:S.jsx("input",{type:"text",placeholder:" ...",value:ze,onChange:R=>Gt(R.target.value),className:"w-full bg-white border border-[#e9e9e8] rounded-[4px] py-1.5 px-3 text-sm outline-none shadow-sm",autoFocus:!0,onKeyDown:R=>{R.key==="Enter"&&(un(ze),Gt(""),pe(!1)),R.key==="Escape"&&pe(!1)}})}),U.map(R=>S.jsxs("div",{className:"relative group/agent",children:[Zt===R.id?S.jsx("div",{className:"px-2 py-1",children:S.jsx("input",{type:"text",value:ht,onChange:P=>It(P.target.value),className:"w-full bg-white border border-[#37352f] rounded-[4px] py-1 px-2 text-sm outline-none shadow-sm",autoFocus:!0,onKeyDown:P=>{P.key==="Enter"&&(Vt(R.id,ht),pt(null)),P.key==="Escape"&&pt(null)},onBlur:()=>{Vt(R.id,ht),pt(null)}})}):S.jsxs("div",{className:"flex items-center",children:[S.jsxs("button",{onClick:()=>je(R.id),className:`flex-1 flex items-center px-3 py-1.5 rounded-[4px] transition-colors group ${Ne===R.id?"bg-[#efefef] text-[#37352f] font-normal":"text-[#9b9a97] hover:bg-[#efefef] hover:text-[#37352f]"}`,children:[S.jsx("span",{className:"mr-2 text-sm",children:R.emoji}),S.jsx("span",{className:"text-sm truncate",children:R.name}),S.jsx("span",{className:"ml-2 text-[11px] opacity-40 font-normal",children:N.filter(P=>P.author===R.id).length})]}),S.jsx("button",{onClick:P=>{P.stopPropagation(),re(Ht===R.id?null:R.id)},className:`p-1 hover:bg-[#e9e9e8] rounded opacity-0 group-hover/agent:opacity-100 transition-opacity mr-1 ${Ht===R.id?"opacity-100 bg-[#e9e9e8]":""}`,children:S.jsx(fr,{size:14,className:"text-[#9b9a97]"})})]}),Ht===R.id&&S.jsxs("div",{className:"absolute right-0 top-full mt-1 w-32 bg-white border border-[#e9e9e8] rounded-[4px] shadow-lg z-[100] py-1 animate-in fade-in zoom-in-95 duration-100",children:[S.jsxs("button",{onClick:()=>{pt(R.id),It(R.name),re(null)},className:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-[#37352f] hover:bg-[#efefef] transition-colors text-left",children:[S.jsx(wu,{size:12,className:"text-[#9b9a97]"}),"  "]}),S.jsxs("button",{onClick:()=>{cn(R.id),re(null)},className:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-[#eb5757] hover:bg-[#fff0f0] transition-colors text-left",children:[S.jsx(Yi,{size:12})," "]})]})]},R.id))]}),S.jsxs("div",{className:"space-y-0.5 overflow-hidden",children:[S.jsx("div",{className:"px-3 mb-1.5",children:S.jsx("span",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider",children:"AI "})}),S.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-0.5",children:N.filter(R=>!Ne||R.author===Ne).sort((R,P)=>new Date(P.timestamp).getTime()-new Date(R.timestamp).getTime()).slice(0,5).map(R=>S.jsx("button",{onClick:()=>He(R.id),className:`w-full text-left px-3 py-2 rounded-[4px] transition-colors group ${Ee===R.id?"bg-[#efefef] text-[#37352f] font-normal":"text-[#9b9a97] hover:bg-[#efefef] hover:text-[#37352f]"}`,children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("span",{className:"text-sm truncate pr-2",children:[R.content.split(`
`)[0].substring(0,15),"..."]}),S.jsx("span",{className:"text-[10px] opacity-60 font-normal flex-shrink-0",children:Vn(Ki(R.timestamp),"MM.dd")})]})},R.id))})]})]}),u==="journal"&&S.jsxs("div",{className:"mt-8 px-2 space-y-6 overflow-hidden",children:[S.jsxs("div",{className:"space-y-0.5",children:[S.jsxs("div",{className:"px-3 mb-1.5 flex items-center justify-between group",children:[S.jsx("span",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider",children:""}),S.jsx("button",{onClick:()=>k(!0),className:"p-1 hover:bg-[#efefef] rounded text-[#9b9a97] opacity-0 group-hover:opacity-100 transition-all",children:S.jsx(uo,{size:12})})]}),fe.map(R=>S.jsxs("div",{className:"relative group/cat",onMouseLeave:()=>ye(null),children:[S.jsxs("button",{onClick:()=>ee(R.name),className:`w-full flex items-center px-3 py-1.5 rounded-[4px] transition-colors text-sm ${J===R.name?"bg-[#efefef] text-[#37352f] font-normal":"text-[#787774] hover:bg-[#efefef] hover:text-[#37352f]"}`,children:[S.jsx(iT,{size:14,className:"mr-2.5 opacity-50"}),S.jsx("span",{className:"truncate flex-1 text-left",children:R.name}),S.jsx("button",{onClick:P=>{P.stopPropagation(),ye(Ae===R.id?null:R.id)},className:"p-0.5 hover:bg-[#d9d9d8] rounded text-[#9b9a97] opacity-0 group-hover/cat:opacity-100 transition-all",children:S.jsx(fr,{size:12})})]}),Ae===R.id&&S.jsxs("div",{className:"absolute left-full top-0 ml-1 w-32 bg-white border border-[#e9e9e8] rounded-lg shadow-xl py-1 z-[60] animate-in fade-in zoom-in-95 duration-200",children:[S.jsxs("button",{onClick:()=>{K(R.id),ge(R.name),ye(null)},className:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-[#37352f] hover:bg-[#efefef] transition-colors text-left",children:[S.jsx(wu,{size:12,className:"text-[#9b9a97]"}),"  "]}),S.jsxs("button",{onClick:()=>{xn(R.id),ye(null)},className:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-[#eb5757] hover:bg-[#fff0f0] transition-colors text-left",children:[S.jsx(Yi,{size:12})," "]})]})]},R.id)),de&&S.jsx("div",{className:"px-2 mb-2",children:S.jsx("input",{type:"text",placeholder:" ...",value:G,onChange:R=>oe(R.target.value),className:"w-full bg-white border border-[#e9e9e8] rounded-[4px] py-1.5 px-3 text-sm outline-none shadow-sm",autoFocus:!0,onKeyDown:R=>{R.key==="Enter"&&(en(G),oe(""),k(!1)),R.key==="Escape"&&k(!1)}})})]}),S.jsxs("div",{className:"space-y-0.5 overflow-hidden",children:[S.jsx("div",{className:"px-3 mb-1.5",children:S.jsx("span",{className:"text-[11px] font-normal text-[#787774] uppercase tracking-wider",children:" "})}),S.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-0.5",children:T.filter(R=>J==="all"||R.category===J).sort((R,P)=>new Date(P.date).getTime()-new Date(R.date).getTime()).map(R=>S.jsx("button",{onClick:()=>qe(R.id),className:`w-full text-left px-3 py-2 rounded-[4px] transition-colors group ${Ce===R.id?"bg-[#efefef] text-[#37352f] font-normal":"text-[#9b9a97] hover:bg-[#efefef] hover:text-[#37352f]"}`,children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-sm truncate pr-2",children:R.title||" "}),S.jsx("span",{className:"text-[10px] opacity-60 font-normal flex-shrink-0",children:Vn(Ki(R.date),"MM.dd")})]})},R.id))})]})]}),S.jsx("div",{className:"mx-4 my-4 border-t border-[#e9e9e8]"}),S.jsxs("div",{className:"px-2",children:[S.jsx("div",{className:"pt-4 space-y-0.5",children:S.jsxs("button",{onClick:()=>d("settings"),className:`w-full flex items-center gap-3 px-3 py-1.5 text-sm font-normal rounded-lg transition-all ${u==="settings"?"bg-[#efefef] text-[#37352f]":"text-[#787774] hover:bg-[#f7f7f5] hover:text-[#37352f]"}`,children:[S.jsx(bT,{size:16}),"  "]})}),S.jsxs("button",{onClick:()=>d("api-settings"),className:`
                w-full flex items-center px-3 py-1.5 rounded-[4px] transition-colors group mt-0.5
                ${u==="api-settings"?"bg-[#efefef] text-[#37352f] font-normal":"text-[#9b9a97] hover:bg-[#efefef] hover:text-[#37352f]"}
              `,children:[S.jsx(Ei,{size:18}),S.jsx("span",{className:"hidden lg:block ml-2.5 text-sm",children:"API  "})]})]})]}),S.jsxs("div",{className:"p-3 space-y-3",children:[S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-lg p-3 shadow-sm hidden lg:block",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-tr from-[#2ecc71] to-[#3498db] flex-shrink-0"}),S.jsx("span",{className:"text-xs font-normal text-[#37352f]",children:" "})]}),S.jsx("p",{className:"text-[11px] text-[#9b9a97] leading-tight",children:"AI  ."})]}),t?S.jsxs("div",{className:"bg-white border border-[#e9e9e8] rounded-lg p-2 flex items-center justify-between shadow-sm",children:[S.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[S.jsx("div",{className:"w-6 h-6 rounded-full bg-[#f1f1f0] flex items-center justify-center text-[10px] font-normal text-[#37352f] flex-shrink-0",children:((Ja=t==null?void 0:t.name)==null?void 0:Ja[0])||"U"}),S.jsx("span",{className:"text-xs font-normal text-[#37352f] truncate",children:t==null?void 0:t.name})]}),S.jsx("button",{onClick:wr,className:"p-1 hover:bg-[#efefef] rounded text-[#9b9a97] hover:text-[#eb5757] transition-colors flex-shrink-0",title:"",children:S.jsx(uT,{size:14})})]}):S.jsx("div",{className:"px-1",children:S.jsxs("button",{onClick:()=>{l("login"),s(!0)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-[#37352f] text-white text-[11px] font-normal rounded-lg hover:bg-black transition-all shadow-sm",children:[S.jsx(d_,{size:14,strokeWidth:3})," / "]})})]})]}),S.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative bg-white",children:[S.jsx("header",{className:"lg:hidden h-12 bg-white border-b border-[#e9e9e8] flex items-center justify-center font-normal text-sm z-40 relative",children:"LifeSync"}),S.jsx("div",{className:`flex-1 relative scroll-smooth ${["todo","journal","board","calendar"].includes(u)?"overflow-hidden":"overflow-y-auto"}`,children:S.jsx("div",{className:`h-full mx-auto ${["todo","journal","board","calendar"].includes(u)?"max-w-none p-0":"max-w-[1200px] p-4 lg:p-8 lg:pt-10"}`,children:Fa()})}),Mn&&S.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:S.jsxs("div",{className:"bg-[#37352f] text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3",children:[S.jsx("span",{className:"text-sm",children:Mn.label}),S.jsx("button",{onClick:oi,className:"text-xs font-normal bg-white/10 hover:bg-white/20 px-2.5 py-1 rounded-md transition-colors",children:" "})]})})]}),S.jsx(kP,{notifications:mn,onRead:wn,onLinkClick:R=>{d(R.view),R.view==="chat"&&R.id?bt(R.id):R.view==="journal"&&R.id?qe(R.id):R.view==="board"&&R.id&&He(R.id)}})]})},dS=document.getElementById("root");if(!dS)throw new Error("Could not find root element to mount to");const $P=Cx.createRoot(dS);$P.render(S.jsx(_t.StrictMode,{children:S.jsx(VP,{})}));
